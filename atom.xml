<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://annecoding.github.io/"/>
  <updated>2019-09-04T06:00:41.086Z</updated>
  <id>https://annecoding.github.io/</id>
  
  <author>
    <name>Annecoding&#39;s</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linuxä½¿ç”¨expectæ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤</title>
    <link href="https://annecoding.github.io/2019/09/04/linux%E4%BD%BF%E7%94%A8expect%E6%89%B9%E9%87%8F%E6%89%A7%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%91%BD%E4%BB%A4/"/>
    <id>https://annecoding.github.io/2019/09/04/linuxä½¿ç”¨expectæ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤/</id>
    <published>2019-09-04T02:57:10.000Z</published>
    <updated>2019-09-04T06:00:41.086Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>ç°åœ¨æœ‰ä¸¤å°Linuxä¸»æœºAå’ŒBï¼Œå¦‚ä½•ä»Aä¸»æœºsshåˆ°Bä¸»æœºï¼Œç„¶ååœ¨Bä¸»æœºä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ä½•ä½¿è¿™ä¸ªè¿‡ç¨‹å®ç°å…¨ç¨‹è‡ªåŠ¨åŒ–ï¼Ÿä¹‹å‰æœ‰ç”¨è¿‡<strong>ssh-copy-idå…å¯†é’¥</strong>çš„å½¢å¼ï¼Œè¿™é‡Œæ˜¯ç”¨ç¬¬äºŒç§æ–¹å¼<strong>expect</strong>å®ç°ã€‚</p><a id="more"></a><h3 id="expectæ˜¯ä»€ä¹ˆ"><a href="#expectæ˜¯ä»€ä¹ˆ" class="headerlink" title="expectæ˜¯ä»€ä¹ˆ"></a>expectæ˜¯ä»€ä¹ˆ</h3><p>expectæ˜¯ä¸€ä¸ªå…è´¹çš„ç¼–ç¨‹å·¥å…·ï¼Œç”¨æ¥<strong>å®ç°è‡ªåŠ¨çš„äº¤äº’å¼ä»»åŠ¡ï¼Œè€Œæ— éœ€äººä¸ºå¹²é¢„ã€‚</strong> è¯´ç™½äº†ï¼Œexpectå°±æ˜¯ä¸€å¥—ç”¨æ¥å®ç°è‡ªåŠ¨äº¤äº’åŠŸèƒ½çš„è½¯ä»¶ã€‚</p><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¿è¡Œå‘½ä»¤ã€è„šæœ¬æˆ–ç¨‹åºæ—¶ï¼Œè¿™äº›å‘½ä»¤ã€è„šæœ¬æˆ–ç¨‹åºéƒ½éœ€è¦ä»ç»ˆç«¯è¾“å…¥æŸäº›ç»§ç»­è¿è¡Œçš„æŒ‡ä»¤ï¼Œè€Œè¿™äº›è¾“å…¥éƒ½éœ€è¦äººä¸ºçš„æ‰‹å·¥è¿›è¡Œã€‚è€Œ<strong>åˆ©ç”¨expectï¼Œåˆ™å¯ä»¥æ ¹æ®ç¨‹åºçš„æç¤ºï¼Œæ¨¡æ‹Ÿæ ‡å‡†è¾“å…¥æä¾›ç»™ç¨‹åºï¼Œä»è€Œå®ç°è‡ªåŠ¨åŒ–äº¤äº’æ‰§è¡Œã€‚</strong> è¿™å°±æ˜¯expectï¼ï¼ï¼</p><p>1.å®‰è£…expect</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install expect -y</span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨expectï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å’Œä»¥ä¸‹å››ä¸ªå‘½ä»¤æ‰“äº¤é“ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>send</td><td>ç”¨äºå‘è¿›ç¨‹å‘é€å­—ç¬¦ä¸²</td></tr><tr><td>expect</td><td>ä»è¿›ç¨‹æ¥æ”¶å­—ç¬¦ä¸²</td></tr><tr><td>spawn</td><td>å¯åŠ¨æ–°çš„è¿›ç¨‹</td></tr><tr><td>interact</td><td>å…è®¸ç”¨æˆ·äº¤äº’</td></tr></tbody></table><p><code>send</code>å‘½ä»¤æ¥æ”¶ä¸€ä¸ª<strong>å­—ç¬¦ä¸²å‚æ•°</strong>ï¼Œå¹¶å°†è¯¥å‚æ•°å‘é€åˆ°è¿›ç¨‹ã€‚</p><p><code>expect</code>å‘½ä»¤å’Œ<code>send</code>å‘½ä»¤ç›¸åï¼Œ<code>expect</code>é€šå¸¸ç”¨æ¥ç­‰å¾…ä¸€ä¸ªè¿›ç¨‹çš„åé¦ˆï¼Œæˆ‘ä»¬æ ¹æ®è¿›ç¨‹çš„åé¦ˆï¼Œå†å‘é€å¯¹åº”çš„äº¤äº’å‘½ä»¤ã€‚</p><p><code>spawn</code>å‘½ä»¤ç”¨æ¥<strong>å¯åŠ¨æ–°çš„è¿›ç¨‹</strong>ï¼Œ<code>spawn</code>åçš„<code>send</code>å’Œ<code>expect</code>å‘½ä»¤éƒ½æ˜¯å’Œä½¿ç”¨<code>spawn</code>æ‰“å¼€çš„è¿›ç¨‹è¿›è¡Œäº¤äº’ã€‚</p><p>interactå‘½ä»¤ç”¨çš„å…¶å®ä¸æ˜¯å¾ˆå¤šï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨<code>spawn</code>ã€<code>send</code>å’Œ<code>expect</code>å‘½ä»¤å°±å¯ä»¥å¾ˆå¥½çš„å®Œæˆæˆ‘ä»¬çš„ä»»åŠ¡ï¼›ä½†åœ¨ä¸€äº›ç‰¹æ®Šåœºåˆä¸‹è¿˜æ˜¯éœ€è¦ä½¿ç”¨<code>interact</code>å‘½ä»¤çš„ï¼Œ<code>interact</code>å‘½ä»¤ä¸»è¦ç”¨äºé€€å‡ºè‡ªåŠ¨åŒ–ï¼Œè¿›å…¥äººå·¥äº¤äº’ã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨<code>spawn</code>ã€<code>send</code>å’Œ<code>expect</code>å‘½ä»¤å®Œæˆäº†ftpç™»é™†ä¸»æœºï¼Œæ‰§è¡Œä¸‹è½½æ–‡ä»¶ä»»åŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨æ–‡ä»¶ä¸‹è½½ç»“æŸä»¥åï¼Œä»ç„¶å¯ä»¥åœç•™åœ¨ftpå‘½ä»¤è¡ŒçŠ¶æ€ï¼Œä»¥ä¾¿æ‰‹åŠ¨çš„æ‰§è¡Œåç»­å‘½ä»¤ï¼Œæ­¤æ—¶ä½¿ç”¨<code>interact</code>å‘½ä»¤å°±å¯ä»¥å¾ˆå¥½çš„å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p><h3 id="sshå…å¯†ç™»å½•"><a href="#sshå…å¯†ç™»å½•" class="headerlink" title="sshå…å¯†ç™»å½•"></a>sshå…å¯†ç™»å½•</h3><p>1.å®ç°sshç™»å½•æ‰§è¡Œå‘½ä»¤ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">SERVER=<span class="string">"192.168.1.241"</span></span><br><span class="line">PASSWD=nf123456</span><br><span class="line">expect -c <span class="string">"</span></span><br><span class="line"><span class="string">        set timeout -1;</span></span><br><span class="line"><span class="string">        spawn ssh <span class="variable">$SERVER</span>;</span></span><br><span class="line"><span class="string">        expect &#123;</span></span><br><span class="line"><span class="string">                \"yes/no\" &#123; send \"yes\r\" ;exp_contine; &#125;</span></span><br><span class="line"><span class="string">                \"password:\" &#123; send \"<span class="variable">$PASSWD</span>\r\"; &#125;</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string">        expect \"]#\" &#123; send \"ls -la \r\" &#125;;</span></span><br><span class="line"><span class="string">        expect \"]#\" &#123; send \"exit \r\" &#125;;</span></span><br><span class="line"><span class="string">        expect eof;</span></span><br><span class="line"><span class="string">        "</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„shellåŠŸèƒ½å’Œexpectè„šæœ¬å®ç°çš„åŠŸèƒ½ä¸€è‡´ï¼Œéƒ½æ˜¯é€šè¿‡sshç™»å½•è¿›å»åè¾“å…¥ï¼Œæ‰§è¡Œ<code>ls -la</code>å‘½ä»¤ï¼Œå…¶ä¸­</p><p><code>set timeout -1</code>è®¾ç½®è¶…æ—¶æ—¶é—´</p><p><code>expect</code>åé¢éœ€è¦åŠ ä¸Š-c</p><p><code>expect</code>å‘½ä»¤ç”¨â€œåŒå¼•å·åŒ…å›´èµ·æ¥çš„ï¼Œè¿™ç‚¹è¦æ³¨æ„ï¼Œé‡Œé¢å¦‚æœæœ‰â€éœ€è¦ç”¨\â€è½¬ä¹‰</p><p><code>ls -la</code>ä»£è¡¨å‘½ä»¤ç»“æŸåå‘é€ä¸€ä¸ªé€€å‡ºå‘½ä»¤ï¼Œä¸€èˆ¬éœ€è¦åŠ ä¸Šï¼Œé˜²æ­¢é˜»å¡</p><p><code>expect eof</code>åŒ¹é…spawnç»“æŸ</p><p>2.sshæ‰¹é‡å…å¯†demoï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">SERVERS=<span class="string">"192.168.1.241 192.168.1.242"</span></span><br><span class="line">PASSWD=<span class="string">"123456"</span></span><br><span class="line"><span class="keyword">function</span> sshcopyid</span><br><span class="line">&#123;</span><br><span class="line">        expect -c <span class="string">"</span></span><br><span class="line"><span class="string">                set timeout -1;</span></span><br><span class="line"><span class="string">                spawn ssh-copy-id <span class="variable">$1</span>;</span></span><br><span class="line"><span class="string">                expect &#123;</span></span><br><span class="line"><span class="string">                        \"yes/no\" &#123; send \"yes\r\" ;exp_contine; &#125;</span></span><br><span class="line"><span class="string">                        \"password:\" &#123; send \"<span class="variable">$PASSWD</span>\r\";exp_continue; &#125;</span></span><br><span class="line"><span class="string">                &#125;;</span></span><br><span class="line"><span class="string">                expect eof;</span></span><br><span class="line"><span class="string">        "</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> server <span class="keyword">in</span> <span class="variable">$SERVERS</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        sshcopyid <span class="variable">$server</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤"><a href="#æ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤" class="headerlink" title="æ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤"></a>æ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤</h3><p>1.å­˜å‚¨åœ¨host.infoçš„ä¸»æœºä¿¡æ¯å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat host.info </span><br><span class="line">192.168.1.3 root 22 111111</span><br></pre></td></tr></table></figure><p>2.linuxä¸‹æ‰¹é‡æ‰§è¡Œä¸»æœºå‘½ä»¤å®ç°è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cat batch_host.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æ¥æ”¶æ‰€ä¼ æ‰€æœ‰å‚æ•°</span></span><br><span class="line">COMMAND=$*</span><br><span class="line">HOST_INFO=host.info</span><br><span class="line"><span class="comment"># ä¸åŒ¹é…æ–‡ä»¶ä¸­çš„æ³¨é‡Š</span></span><br><span class="line"><span class="keyword">for</span> IP <span class="keyword">in</span> $(awk <span class="string">'/^[^#]/&#123;print $1&#125;'</span> <span class="variable">$HOST_INFO</span>);<span class="keyword">do</span></span><br><span class="line">        USER=$(awk -v ip=<span class="variable">$IP</span> <span class="string">'ip=$1&#123;print $2&#125;'</span> <span class="variable">$HOST_INFO</span>)</span><br><span class="line">        PORT=$(awk -v ip=<span class="variable">$IP</span> <span class="string">'ip=$1&#123;print $3&#125;'</span> <span class="variable">$HOST_INFO</span>)</span><br><span class="line">        PASS=$(awk -v ip=<span class="variable">$IP</span> <span class="string">'ip=$1&#123;print $4&#125;'</span> <span class="variable">$HOST_INFO</span>)</span><br><span class="line">        <span class="comment"># expect -cæ‰§è¡Œè‡ªèº«çš„è¯­å¥</span></span><br><span class="line">        <span class="comment"># å› ä¸ºå¤–é¢æœ‰åŒå¼•å·ï¼Œå†æ¬¡å‡ºç°éƒ½éœ€è¦è½¬ä¹‰</span></span><br><span class="line">        <span class="comment"># æ‰§è¡Œå®Œå‘½ä»¤è¦é€€å‡º</span></span><br><span class="line">        expect -c <span class="string">"</span></span><br><span class="line"><span class="string">                spawn ssh -p <span class="variable">$PORT</span> <span class="variable">$USER</span>@<span class="variable">$IP</span></span></span><br><span class="line"><span class="string">                expect &#123;</span></span><br><span class="line"><span class="string">                        \"(yes/no)\" &#123;send \"yes\r\"; exp_continue&#125;</span></span><br><span class="line"><span class="string">                        \"password:\" &#123;send \"<span class="variable">$PASS</span>\r\"; exp_continue&#125;</span></span><br><span class="line"><span class="string">                        \"<span class="variable">$USER</span>@*\" &#123;send \"<span class="variable">$COMMAND</span>\r exit\r\"; exp_continue&#125;</span></span><br><span class="line"><span class="string">                &#125;;</span></span><br><span class="line"><span class="string">        "</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"--------------------------------------------"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>exp_continue</code>è¡¨ç¤ºå¾ªç¯å¼åŒ¹é…ï¼Œé€šå¸¸åŒ¹é…ä¹‹åéƒ½ä¼šé€€å‡ºè¯­å¥ï¼Œä½†å¦‚æœæœ‰<code>exp_continue</code>åˆ™å¯ä»¥ä¸æ–­å¾ªç¯åŒ¹é…ï¼Œè¾“å…¥å¤šæ¡å‘½ä»¤ï¼Œç®€åŒ–å†™æ³•ã€‚</p><p>ç»“åˆç€expect <code>&quot;*password*&quot; {send &quot;$password\r&quot;}</code>è¿™å¥ä»£ç æ¥è¯´è¯´â€œæ¨¡å¼-åŠ¨ä½œâ€ã€‚ç®€å•çš„è¯´å°±æ˜¯åŒ¹é…åˆ°ä¸€ä¸ªæ¨¡å¼ï¼Œå°±æ‰§è¡Œå¯¹åº”çš„åŠ¨ä½œï¼›åŒ¹é…åˆ°passwordå­—ç¬¦ä¸²ï¼Œå°±è¾“å…¥å¯†ç ã€‚</p><p><strong>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ bash  test.sh <span class="string">'df -h'</span></span><br><span class="line">spawn ssh -p 22 root@192.168.1.3</span><br><span class="line">Last login: Tue Sep  3 05:05:47 2019 from 192.168.1.2</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h</span></span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root   14G  979M   13G   7% /</span><br><span class="line">devtmpfs                 3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs                    3.9G     0  3.9G   0% /dev/shm</span><br><span class="line">tmpfs                    3.9G   49M  3.8G   2% /run</span><br><span class="line">tmpfs                    3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  125M  373M  25% /boot</span><br><span class="line">tmpfs                    783M     0  783M   0% /run/user/0</span><br><span class="line">[root@localhost ~]<span class="comment">#  exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line">Connection to 192.168.1.3 closed.</span><br><span class="line">df -h</span><br><span class="line"> <span class="built_in">exit</span></span><br><span class="line">--------------------------------------------</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒé“¾æ¥<br><a href="https://www.jellythink.com/archives/373" target="_blank" rel="noopener">linux expectå‘½ä»¤è¯¦è§£</a><br><a href="https://www.cnblogs.com/nfcm/p/7899831.html" target="_blank" rel="noopener">linuxä¸‹expectå‘½ä»¤å®ç°æ‰¹é‡sshå…å¯†</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;ç°åœ¨æœ‰ä¸¤å°Linuxä¸»æœºAå’ŒBï¼Œå¦‚ä½•ä»Aä¸»æœºsshåˆ°Bä¸»æœºï¼Œç„¶ååœ¨Bä¸»æœºä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ä½•ä½¿è¿™ä¸ªè¿‡ç¨‹å®ç°å…¨ç¨‹è‡ªåŠ¨åŒ–ï¼Ÿä¹‹å‰æœ‰ç”¨è¿‡&lt;strong&gt;ssh-copy-idå…å¯†é’¥&lt;/strong&gt;çš„å½¢å¼ï¼Œè¿™é‡Œæ˜¯ç”¨ç¬¬äºŒç§æ–¹å¼&lt;strong&gt;expect&lt;/strong&gt;å®ç°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>linuxæŸ¥çœ‹ç½‘å¡å®æ—¶æµé‡</title>
    <link href="https://annecoding.github.io/2019/08/30/linux%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E5%AE%9E%E6%97%B6%E6%B5%81%E9%87%8F/"/>
    <id>https://annecoding.github.io/2019/08/30/linuxæŸ¥çœ‹ç½‘å¡å®æ—¶æµé‡/</id>
    <published>2019-08-30T12:24:52.000Z</published>
    <updated>2019-09-01T04:57:57.769Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŸ¥çœ‹æœåŠ¡å™¨çš„å®æ—¶ç½‘å¡æµé‡ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡è¿™å‡ ç§æ–¹å¼æŸ¥çœ‹LinuxæœåŠ¡å™¨çš„å®æ—¶ç½‘å¡æµé‡ã€‚</p><a id="more"></a><h3 id="sarå‘½ä»¤"><a href="#sarå‘½ä»¤" class="headerlink" title="sarå‘½ä»¤"></a>sarå‘½ä»¤</h3><p>sarå‘½ä»¤åŒ…å«åœ¨sysstatå·¥å…·åŒ…ä¸­ï¼Œæä¾›ç³»ç»Ÿçš„ä¼—å¤šç»Ÿè®¡æ•°æ®ã€‚å…¶åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šå‘½ä»¤æœ‰äº›å·®å¼‚ï¼ŒæŸäº›ç³»ç»Ÿæä¾›çš„saræ”¯æŒåŸºäºç½‘ç»œæ¥å£çš„æ•°æ®ç»Ÿè®¡ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹è®¾å¤‡ä¸Šæ¯ç§’æ”¶å‘åŒ…çš„ä¸ªæ•°å’Œæµé‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DEVæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å‘½ä»¤åé¢1 2 æ„æ€æ˜¯ï¼šæ¯ä¸€ç§’é’Ÿå–1æ¬¡å€¼ï¼Œå–2æ¬¡</span></span><br><span class="line">$ sar â€“n DEV  1 2</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œ-nå‚æ•°å¾ˆæœ‰ç”¨ï¼Œä»–æœ‰6ä¸ªä¸åŒçš„å¼€å…³ï¼šDEV | EDEV | NFS | NFSD | SOCK | ALL ï¼Œå…¶ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><p>DEVæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯ã€‚<br>EDEVæ˜¾ç¤ºå…³äºç½‘ç»œé”™è¯¯çš„ç»Ÿè®¡æ•°æ®ã€‚<br>NFSç»Ÿè®¡æ´»åŠ¨çš„NFSå®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚<br>NFSDç»Ÿè®¡NFSæœåŠ¡å™¨çš„ä¿¡æ¯<br>SOCKæ˜¾ç¤ºå¥—æ¥å­—ä¿¡æ¯<br>ALLæ˜¾ç¤ºæ‰€æœ‰5ä¸ªå¼€å…³</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ sar -n DEV 1 2       </span><br><span class="line">Linux 3.10.0-514.26.2.el7.x86_64 (localhost)    08/31/2019      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">09:52:28 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</span><br><span class="line">09:52:29 AM      eth0      2.02      1.01      0.13      0.16      0.00      0.00      0.00</span><br><span class="line">09:52:29 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">09:52:29 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</span><br><span class="line">09:52:30 AM      eth0      1.02      1.02      0.07      0.23      0.00      0.00      0.00</span><br><span class="line">09:52:30 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s</span><br><span class="line">Average:         eth0      1.52      1.02      0.10      0.19      0.00      0.00      0.00</span><br><span class="line">Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°è¯´æ˜ï¼š</strong><br>IFACEï¼šLANæ¥å£<br>rxpck/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„æ•°æ®åŒ…<br>txpck/sï¼šæ¯ç§’é’Ÿå‘é€çš„æ•°æ®åŒ…<br>rxbyt/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å­—èŠ‚æ•°<br>txbyt/sï¼šæ¯ç§’é’Ÿå‘é€çš„å­—èŠ‚æ•°<br>rxcmp/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å‹ç¼©æ•°æ®åŒ…<br>txcmp/sï¼šæ¯ç§’é’Ÿå‘é€çš„å‹ç¼©æ•°æ®åŒ…<br>rxmcst/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„å¤šæ’­æ•°æ®åŒ…<br>rxerr/sï¼šæ¯ç§’é’Ÿæ¥æ”¶çš„åæ•°æ®åŒ…<br>txerr/sï¼šæ¯ç§’é’Ÿå‘é€çš„åæ•°æ®åŒ…<br>coll/sï¼šæ¯ç§’å†²çªæ•°<br>rxdrop/sï¼šå› ä¸ºç¼“å†²å……æ»¡ï¼Œæ¯ç§’é’Ÿä¸¢å¼ƒçš„å·²æ¥æ”¶æ•°æ®åŒ…æ•°<br>txdrop/sï¼šå› ä¸ºç¼“å†²å……æ»¡ï¼Œæ¯ç§’é’Ÿä¸¢å¼ƒçš„å·²å‘é€æ•°æ®åŒ…æ•°<br>txcarr/sï¼šå‘é€æ•°æ®åŒ…æ—¶ï¼Œæ¯ç§’è½½æ³¢é”™è¯¯æ•°<br>rxfram/sï¼šæ¯ç§’æ¥æ”¶æ•°æ®åŒ…çš„å¸§å¯¹é½é”™è¯¯æ•°<br>rxfifo/sï¼šæ¥æ”¶çš„æ•°æ®åŒ…æ¯ç§’FIFOè¿‡é€Ÿçš„é”™è¯¯æ•°<br>txfifo/sï¼šå‘é€çš„æ•°æ®åŒ…æ¯ç§’FIFOè¿‡é€Ÿçš„é”™è¯¯æ•°</p><h3 id="å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ1ï¼‰"><a href="#å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ1ï¼‰" class="headerlink" title="å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ1ï¼‰"></a>å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ1ï¼‰</h3><p>ifconfigå¯ä»¥æŸ¥çœ‹çš„æ˜¯ä»è¿ä¸Šç½‘å¼€å§‹çš„æµé‡æ€»å’Œï¼Œ<code>cat /proc/net/dev</code>è®°å½•çš„å€¼ä¹Ÿæ˜¯æ€»æµé‡ï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—ä¸€ä¸‹ï¼Œå®æ—¶æµé‡=å½“å‰æµé‡-ä¸Šä¸€ç§’çš„æµé‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat network.sh </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># ä¼ å…¥ç½‘å¡å‚æ•°</span></span><br><span class="line">ethn=<span class="variable">$1</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  RX_pre=$(cat /proc/net/dev | grep <span class="variable">$ethn</span> | sed <span class="string">'s/:/ /g'</span> | awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line">  TX_pre=$(cat /proc/net/dev | grep <span class="variable">$ethn</span> | sed <span class="string">'s/:/ /g'</span> | awk <span class="string">'&#123;print $10&#125;'</span>)</span><br><span class="line">  sleep 1</span><br><span class="line">  RX_next=$(cat /proc/net/dev | grep <span class="variable">$ethn</span> | sed <span class="string">'s/:/ /g'</span> | awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line">  TX_next=$(cat /proc/net/dev | grep <span class="variable">$ethn</span> | sed <span class="string">'s/:/ /g'</span> | awk <span class="string">'&#123;print $10&#125;'</span>)</span><br><span class="line"> </span><br><span class="line">  clear</span><br><span class="line">  <span class="comment"># echo -eæ¿€æ´»è½¬ä¹‰ç¬¦</span></span><br><span class="line">  <span class="comment"># è¾“å‡ºæ—¶é—´çš„æ ‡é¢˜</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">"\t RX `date +%k:%M:%S` TX"</span></span><br><span class="line"> </span><br><span class="line">  RX=$((<span class="variable">$&#123;RX_next&#125;</span>-<span class="variable">$&#123;RX_pre&#125;</span>))</span><br><span class="line">  TX=$((<span class="variable">$&#123;TX_next&#125;</span>-<span class="variable">$&#123;TX_pre&#125;</span>))</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$RX</span> -lt 1024 ]];<span class="keyword">then</span></span><br><span class="line">    RX=<span class="string">"<span class="variable">$&#123;RX&#125;</span>B/s"</span></span><br><span class="line">  <span class="keyword">elif</span> [[ <span class="variable">$RX</span> -gt 1048576 ]];<span class="keyword">then</span></span><br><span class="line">    RX=$(<span class="built_in">echo</span> <span class="variable">$RX</span> | awk <span class="string">'&#123;print $1/1048576 "MB/s"&#125;'</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    RX=$(<span class="built_in">echo</span> <span class="variable">$RX</span> | awk <span class="string">'&#123;print $1/1024 "KB/s"&#125;'</span>)</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$TX</span> -lt 1024 ]];<span class="keyword">then</span></span><br><span class="line">    TX=<span class="string">"<span class="variable">$&#123;TX&#125;</span>B/s"</span></span><br><span class="line">  <span class="keyword">elif</span> [[ <span class="variable">$TX</span> -gt 1048576 ]];<span class="keyword">then</span></span><br><span class="line">    TX=$(<span class="built_in">echo</span> <span class="variable">$TX</span> | awk <span class="string">'&#123;print $1/1048576 "MB/s"&#125;'</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    TX=$(<span class="built_in">echo</span> <span class="variable">$TX</span> | awk <span class="string">'&#123;print $1/1024 "KB/s"&#125;'</span>)</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="comment"># è¾“å‡ºæµé‡</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">"<span class="variable">$ethn</span> \t <span class="variable">$RX</span>   <span class="variable">$TX</span> "</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ./network.sh  eth0</span></span><br><span class="line">         RX 20:23:38 TX</span><br><span class="line">eth0     66B/s   0B/s </span><br><span class="line">         RX 20:23:39 TX</span><br><span class="line">eth0     132B/s   0B/s </span><br><span class="line">         RX 20:23:40 TX</span><br><span class="line">eth0     186B/s   194B/s </span><br><span class="line">         RX 20:23:41 TX</span><br><span class="line">eth0     240B/s   194B/s </span><br><span class="line">         RX 20:23:42 TX</span><br><span class="line">eth0     132B/s   0B/s </span><br><span class="line">         RX 20:23:43 TX</span><br><span class="line">eth0     240B/s   194B/s </span><br><span class="line">         RX 20:23:44 TX</span><br><span class="line">eth0     396B/s   4.19727KB/s </span><br><span class="line">         RX 20:23:45 TX</span><br><span class="line">eth0     276B/s   178B/s</span><br></pre></td></tr></table></figure></p><h3 id="å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ2ï¼‰"><a href="#å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ2ï¼‰" class="headerlink" title="å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ2ï¼‰"></a>å®æ—¶ç›‘æ§è„šæœ¬ï¼ˆ2ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ cat network_flow.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># ç›‘æ§å®æ—¶ç½‘å¡æµé‡</span></span><br><span class="line"><span class="comment"># $1 æ¥æ”¶æ‰€ä¼ ç¬¬ä¸€ä¸ªå‚æ•° å³è¦ç›‘æ§çš„ç½‘å¡</span></span><br><span class="line">NIC=<span class="variable">$1</span></span><br><span class="line"><span class="comment"># echo -e "traffic in --- traffic out"</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">        <span class="comment"># $0 å‘½ä»¤è¾“å‡ºç»“æœ ~ åŒ¹é…æ¨¡å¼</span></span><br><span class="line">        OLD_IN=`awk <span class="string">'$0~"'</span><span class="variable">$NIC</span><span class="string">'"&#123;print $2&#125;'</span> /proc/net/dev`</span><br><span class="line">        OLD_OUT=`awk <span class="string">'$0~"'</span><span class="variable">$NIC</span><span class="string">'"&#123;print $10&#125;'</span> /proc/net/dev`</span><br><span class="line">        sleep 1</span><br><span class="line">        NEW_IN=`awk <span class="string">'$0~"'</span><span class="variable">$NIC</span><span class="string">'"&#123;print $2&#125;'</span> /proc/net/dev`</span><br><span class="line">        NEW_OUT=`awk <span class="string">'$0~"'</span><span class="variable">$NIC</span><span class="string">'"&#123;print $10&#125;'</span> /proc/net/dev`</span><br><span class="line">        clear</span><br><span class="line">        <span class="comment"># printfä¸æ¢è¡Œ %så ä½ç¬¦</span></span><br><span class="line">        IN=$(<span class="built_in">printf</span> <span class="string">"%.1f%s"</span> <span class="string">"<span class="variable">$(($NEW_IN-$OLD_IN)</span>)"</span> <span class="string">"B/s"</span>)</span><br><span class="line">        OUT=$(<span class="built_in">printf</span> <span class="string">"%.1f%s"</span> <span class="string">"<span class="variable">$(($NEW_OUT-$OLD_OUT)</span>)"</span> <span class="string">"B/s"</span>)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"       traffic in  `date +%k:%M:%S`  traffic out "</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$NIC</span>   <span class="variable">$IN</span>              <span class="variable">$OUT</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ ./network_flow.sh eth0</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:02  traffic out </span><br><span class="line">eth0   732.0B/s              948.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:03  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:04  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:05  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:06  traffic out </span><br><span class="line">eth0   186.0B/s              242.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:07  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:08  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:09  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:10  traffic out </span><br><span class="line">eth0   240.0B/s              242.0B/s</span><br><span class="line">       traffic <span class="keyword">in</span>  11:15:11  traffic out </span><br><span class="line">eth0   132.0B/s              0.0B/s</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŸ¥çœ‹æœåŠ¡å™¨çš„å®æ—¶ç½‘å¡æµé‡ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡è¿™å‡ ç§æ–¹å¼æŸ¥çœ‹LinuxæœåŠ¡å™¨çš„å®æ—¶ç½‘å¡æµé‡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€é”®æŸ¥çœ‹æœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡</title>
    <link href="https://annecoding.github.io/2019/08/29/%E4%B8%80%E9%94%AE%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B5%84%E6%BA%90%E5%88%A9%E7%94%A8%E7%8E%87/"/>
    <id>https://annecoding.github.io/2019/08/29/ä¸€é”®æŸ¥çœ‹æœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡/</id>
    <published>2019-08-29T09:09:22.000Z</published>
    <updated>2019-08-29T09:18:34.970Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>ä¸€èˆ¬è¦æŸ¥æœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬ä¼šå…ˆä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œæ¯”å¦‚cpuã€å†…å­˜ã€ç¡¬ç›˜ã€tcpè¿æ¥æƒ…å†µç­‰ã€‚</p><a id="more"></a><p>è¿™é‡Œä»¥cpuã€å†…å­˜ã€ç¡¬ç›˜ã€tcpè¿æ¥æƒ…å†µæ¥ä¸¾ä¾‹ï¼Œå®ç°å¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">$ cat resource_utilization_rate.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># ä¸€é”®æŸ¥çœ‹æœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡</span></span><br><span class="line"><span class="comment"># å¯é€šè¿‡ cpu å†…å­˜ ç¡¬ç›˜ tcpè¿æ¥æƒ…å†µ ...ç­‰æ¥æŸ¥çœ‹</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">cpu</span></span>()&#123;</span><br><span class="line">        <span class="comment"># NUM=1</span></span><br><span class="line">        <span class="comment"># while [ $NUM -le 3 ];do</span></span><br><span class="line">                <span class="comment"># ç›¸è¾ƒäºtop vmstat å¯å…äº¤äº’å–é™æ€æ•°æ®ï¼Œid,ç©ºé—´çŠ¶æ€ç™¾åˆ†æ¯”</span></span><br><span class="line">                util=`vmstat |awk <span class="string">'&#123;if(NR==3)print 100-$15"%"&#125;'</span>`</span><br><span class="line">                <span class="comment"># usç”¨æˆ·è¿›ç¨‹æ¶ˆè€—cpuæ—¶é—´ç™¾åˆ†æ¯”</span></span><br><span class="line">                user=`vmstat |awk <span class="string">'&#123;if(NR==3)print $13"%"&#125;'</span>`</span><br><span class="line">                <span class="comment"># ç³»ç»Ÿå†…æ ¸è¿›ç¨‹æ¶ˆè€—cpuæ—¶é—´ç™¾åˆ†æ¯”</span></span><br><span class="line">                sys=`vmstat |awk <span class="string">'&#123;if(NR==3)print $14"%"&#125;'</span>`</span><br><span class="line">                <span class="comment"># cpuèµ„æºç­‰å¾…I/Oæ—¶é—´ç™¾åˆ†æ¯”</span></span><br><span class="line">                iowait=`vmstat |awk <span class="string">'&#123;if(NR==3)print $16"%"&#125;'</span>`</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"CPU - ä½¿ç”¨ç‡ï¼š<span class="variable">$util</span> ,ç­‰å¾…ç£ç›˜IOå“åº”ä½¿ç”¨ç‡ï¼š<span class="variable">$iowait</span>"</span></span><br><span class="line">        <span class="comment">#echo "===========          ****         ================"</span></span><br><span class="line">        <span class="comment">#       let NUM++</span></span><br><span class="line">        <span class="comment">#       sleep 1</span></span><br><span class="line">        <span class="comment">#done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">memory</span></span>()&#123;</span><br><span class="line">        <span class="comment"># ` ` ç­‰åŒäº $()</span></span><br><span class="line">        total=`free -h |awk <span class="string">'&#123;if(NR==2)print $2&#125;'</span>`</span><br><span class="line">        <span class="comment"># $NFè¡¨ç¤ºå–æœ€åä¸€åˆ—æ•°æ®å€¼</span></span><br><span class="line">        used=`free -h |awk <span class="string">'&#123;if(NR==2)print $2-$NF&#125;'</span>`</span><br><span class="line">        available=`free -h |awk <span class="string">'&#123;if(NR==2)print $NF&#125;'</span>`</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"å†…å­˜ - æ€»å¤§å°ï¼š<span class="variable">$&#123;total&#125;</span>G ,å·²ä½¿ç”¨ï¼š<span class="variable">$&#123;used&#125;</span>G ,å¯åˆ©ç”¨ï¼š<span class="variable">$&#123;available&#125;</span>G"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">function</span> <span class="function"><span class="title">disk</span></span>()&#123;</span><br><span class="line">     <span class="comment"># ç‰¹æ®Šç¬¦å·/è½¬ä¹‰,åªå–ç¬¬ä¸€åˆ—</span></span><br><span class="line">     fs=`df -h |awk <span class="string">'/^\/dev/&#123;print $1&#125;'</span>`</span><br><span class="line">     <span class="keyword">for</span> p <span class="keyword">in</span> <span class="variable">$fs</span>;<span class="keyword">do</span></span><br><span class="line">             <span class="comment"># åªæœ‰å½“ç¬¬ä¸€åˆ—æ˜¯ç£ç›˜Filesystemï¼Œè¾“å‡ºæœ€åä¸€åˆ—</span></span><br><span class="line">             mounted=`df -h |awk <span class="string">'$1=="'</span><span class="variable">$p</span><span class="string">'"&#123;print $NF&#125;'</span>`</span><br><span class="line">             size=`df -h |awk <span class="string">'$1=="'</span><span class="variable">$p</span><span class="string">'"&#123;print $2&#125;'</span>`</span><br><span class="line">             used=`df -h |awk <span class="string">'$1=="'</span><span class="variable">$p</span><span class="string">'"&#123;print $3&#125;'</span>`</span><br><span class="line">             used_percent=`df -h |awk <span class="string">'$1=="'</span><span class="variable">$p</span><span class="string">'"&#123;print $5&#125;'</span>`</span><br><span class="line">             <span class="built_in">echo</span> <span class="string">"ç¡¬ç›˜ - æŒ‚è½½ç‚¹ï¼š<span class="variable">$&#123;mounted&#125;</span> , æ€»å¤§å°ï¼š<span class="variable">$&#123;size&#125;</span> , ä½¿ç”¨ï¼š<span class="variable">$&#123;used&#125;</span> , ä½¿ç”¨ç‡ï¼š<span class="variable">$&#123;used_percent&#125;</span>"</span></span><br><span class="line">     <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">tcp_status</span></span>()&#123;</span><br><span class="line"><span class="comment"># printfä¸æ¢è¡Œ â€œ:â€ä»¥å†’å·åˆ†éš”  ssç¬¬ä¸€åˆ—è¡¨ç¤ºè¿æ¥çŠ¶æ€</span></span><br><span class="line">summary=`ss -antp |awk <span class="string">'&#123;status[$1]++&#125;END&#123;for(i in status) printf i ":" status[i]" "&#125;'</span>`</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"TCP - è¿æ¥çŠ¶æ€ï¼š<span class="variable">$summary</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨å‡½æ•°</span></span><br><span class="line">cpu</span><br><span class="line">memory</span><br><span class="line">disk</span><br><span class="line">tcp_status</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ./resource_utilization_rate.sh </span><br><span class="line">CPU - ä½¿ç”¨ç‡ï¼š0% ,ç­‰å¾…ç£ç›˜IOå“åº”ä½¿ç”¨ç‡ï¼š0%</span><br><span class="line">å†…å­˜ - æ€»å¤§å°ï¼š1.8GG ,å·²ä½¿ç”¨ï¼š0.2G ,å¯åˆ©ç”¨ï¼š1.6GG</span><br><span class="line">ç¡¬ç›˜ - æŒ‚è½½ç‚¹ï¼š/ , æ€»å¤§å°ï¼š40G , ä½¿ç”¨ï¼š1.9G , ä½¿ç”¨ç‡ï¼š5%</span><br><span class="line">TCP - è¿æ¥çŠ¶æ€ï¼šLISTEN:3 ESTAB:3 State:1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;ä¸€èˆ¬è¦æŸ¥æœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬ä¼šå…ˆä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œæ¯”å¦‚cpuã€å†…å­˜ã€ç¡¬ç›˜ã€tcpè¿æ¥æƒ…å†µç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>æ‰¹é‡åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®éšæœºå¯†ç </title>
    <link href="https://annecoding.github.io/2019/08/29/%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E8%AE%BE%E7%BD%AE%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81/"/>
    <id>https://annecoding.github.io/2019/08/29/æ‰¹é‡åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®éšæœºå¯†ç /</id>
    <published>2019-08-29T09:08:31.000Z</published>
    <updated>2019-09-01T11:42:01.780Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>å‡å¦‚ï¼Œåœ¨linuxç³»ç»ŸæœåŠ¡å™¨ä¸Šï¼Œè¦ä¸€æ¬¡åˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼Œä½ æœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿè·Ÿæˆ‘æ¥å§ğŸ”…</p><a id="more"></a><h3 id="æ‰¹é‡åˆ›å»ºç”¨æˆ·"><a href="#æ‰¹é‡åˆ›å»ºç”¨æˆ·" class="headerlink" title="æ‰¹é‡åˆ›å»ºç”¨æˆ·"></a>æ‰¹é‡åˆ›å»ºç”¨æˆ·</h3><p>ä½¿ç”¨shellè„šæœ¬å®ç°æ‰¹é‡åˆ›å»ºç”¨æˆ·ï¼Œå®ç°æ–¹å¼å¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cat batch_create_user.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æ‰¹é‡åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="comment"># $@æ¥æ”¶è¾“å…¥çš„æ‰€æœ‰å‚æ•°</span></span><br><span class="line">USER_LIST=<span class="variable">$@</span></span><br><span class="line"><span class="comment"># å°†ç”Ÿæˆçš„ç”¨æˆ·åå’Œå¯†ç å­˜åœ¨æ–‡ä»¶é‡Œé¢ï¼Œè¿™æ ·å†™é»˜è®¤user.txtå­˜åœ¨å½“å‰è·¯å¾„ä¸‹</span></span><br><span class="line">USER_FILE=user.txt</span><br><span class="line"><span class="keyword">for</span> USER <span class="keyword">in</span> <span class="variable">$USER_LIST</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># é€šè¿‡idæ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> ! id <span class="variable">$USER</span> &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># ç”Ÿäº§éšæœºçš„8ä½å­—ç¬¦ä¸²</span></span><br><span class="line">        PASS=$(<span class="built_in">echo</span> <span class="variable">$RANDOM</span> |md5sum |cut -c 1-8)</span><br><span class="line">        <span class="comment"># åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">        useradd <span class="variable">$USER</span></span><br><span class="line">        <span class="comment"># å°†éšæœºç”Ÿæˆçš„å¯†ç åˆ†é…ç»™ç”¨æˆ·</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$PASS</span> |passwd --stdin <span class="variable">$USER</span> &amp;&gt;/dev/null</span><br><span class="line">        <span class="comment"># ç”Ÿæˆçš„ç”¨æˆ·åå’Œå¯†ç å­˜å…¥æ–‡ä»¶ä¸­</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$USER</span>   <span class="variable">$PASS</span>"</span> &gt;&gt; <span class="variable">$USER_FILE</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$USER</span> User create successful."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$USER</span> User already exists!"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ./batch_create_user.sh coco zhangsan</span><br><span class="line">coco User create successful.</span><br><span class="line">zhangsan User create successful.</span><br><span class="line"><span class="comment"># æ–‡ä»¶é»˜è®¤å­˜æ”¾åœ¨å½“å‰ç›®å½•ä¸‹</span></span><br><span class="line">$ cat user.txt </span><br><span class="line">coco   69b7bc14</span><br><span class="line">zhangsan   fd343a4f</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;å‡å¦‚ï¼Œåœ¨linuxç³»ç»ŸæœåŠ¡å™¨ä¸Šï¼Œè¦ä¸€æ¬¡åˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼Œä½ æœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿè·Ÿæˆ‘æ¥å§ğŸ”…&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>shellè„šæœ¬å®ç°centosç³»ç»Ÿåˆå§‹åŒ–é…ç½®</title>
    <link href="https://annecoding.github.io/2019/08/28/shell%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0centos%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE/"/>
    <id>https://annecoding.github.io/2019/08/28/shellè„šæœ¬å®ç°centosç³»ç»Ÿåˆå§‹åŒ–é…ç½®/</id>
    <published>2019-08-28T01:32:11.000Z</published>
    <updated>2019-08-28T04:48:03.309Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>Linuxç³»ç»Ÿé…ç½®åˆå§‹åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œåœ¨æˆ‘ä»¬æœ‰å¤§é‡æœºå™¨è¦åšç›¸åŒå·¥ä½œæ—¶ï¼Œæ¯”å¦‚éƒ½è¦å®‰è£…å¥½æŸäº›è½¯ä»¶ï¼Œé…ç½®ç¯å¢ƒç­‰ï¼Œè¿™æ—¶å€™ï¼Œä¸€ä¸ªä¾¿æ·å®ç”¨çš„è„šæœ¬å°±æ´¾ä¸Šç”¨åœºå•¦ã€‚</p><a id="more"></a><p><strong>èƒŒæ™¯ï¼š</strong>æ–°è´­ä¹°100å°æœåŠ¡å™¨å¹¶å·²å®‰è£…linuxæ“ä½œç³»ç»Ÿ</p><p><strong>éœ€æ±‚ï¼š</strong><br>1.è®¾ç½®æ—¶åŒºå¹¶åŒæ­¥æ—¶é—´<br>2.ç¦ç”¨selinux<br>3.æ¸…ç©ºé˜²ç«å¢™é»˜è®¤ç­–ç•¥<br>4.å†å²å‘½ä»¤æ˜¾ç¤ºæ“ä½œæ—¶é—´<br>5.ç¦æ­¢rootè¿œç¨‹ç™»å½•ï¼Œè¿™ä¸ªè¦æ³¨æ„ï¼Œç¦æ­¢ä¹‹å‰ç¡®ä¿æœ‰æ™®é€šè´¦æˆ·å¯ä»¥sudoåˆ°rootæƒé™ä½¿ç”¨ï¼Œä¸ç„¶åˆ‡ä¸åˆ°rootè´¦æˆ·<br>6.ç¦æ­¢å®šæ—¶ä»»åŠ¡å‘é€é‚®ä»¶<br>7.è®¾ç½®æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°ï¼Œé»˜è®¤æ¯”è¾ƒå°‘<br>8.å‡å°‘swapä½¿ç”¨ï¼Œé»˜è®¤ç‰©ç†å†…å­˜ä¸å¤Ÿä¼šä½¿ç”¨swapæ¥äº¤æ¢ï¼Œé€Ÿåº¦æ…¢ï¼Œä¸å»ºè®®ä½¿ç”¨<br>9.ç³»ç»Ÿå†…æ ¸å‚æ•°ä¼˜åŒ–<br>10.å®‰è£…ç³»ç»Ÿæ€§èƒ½åˆ†æå·¥å…·åŠä¸€äº›å…¶ä»–çš„</p><p><strong>å®ç°è„šæœ¬å¦‚ä¸‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">$ cat server_initialize.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># è®¾ç½®æ—¶åŒºä¸ºä¸Šæµ·å¹¶æ¯å°æ—¶åŒæ­¥ä¸€æ¬¡æ—¶é—´ï¼Œé»˜è®¤æ—¶åŒºä¸ºä¸œå…«åŒº</span></span><br><span class="line">ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"><span class="comment"># ifåˆ¤æ–­æ˜¯æ ¹æ®å‘½ä»¤æ‰§è¡ŒçŠ¶æ€è¿”å›å€¼$#?æ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œæ‰§è¡ŒæˆåŠŸåˆ™ä¸º0ï¼Œæ‰§è¡Œå¤±è´¥åˆ™ä¸ºå…¶ä»–ï¼Œä¸€èˆ¬ä¸º1</span></span><br><span class="line"><span class="keyword">if</span> ! crontab -l | grep ntpdate &amp;&gt;/dev/null; <span class="keyword">then</span> </span><br><span class="line">        <span class="comment"># | crontabé€šè¿‡ç®¡é“ç¬¦æ¥æ”¶å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">        (<span class="built_in">echo</span> <span class="string">"* 1 * * * ntpdate time.windows.com &gt;/dev/null 2&gt;&amp;1"</span>;crontab -l) | crontab</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦ç”¨selinux</span></span><br><span class="line">sed -i <span class="string">'/SELINUX/&#123;s/permissive/disabled/&#125;'</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­é˜²ç«å¢™</span></span><br><span class="line"><span class="keyword">if</span> egrep <span class="string">"7.[0-9]"</span> /etc/redhat-release &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        systemctl stop firewalld</span><br><span class="line">        systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="keyword">elif</span> egrep <span class="string">"6.[0-9]"</span> /etc/redhat-release &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        service iptables stop</span><br><span class="line">        chkconfig iptables off</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å†å²å‘½ä»¤æ˜¾ç¤ºæ“ä½œæ—¶é—´</span></span><br><span class="line"><span class="comment"># æ–¹ä¾¿åæœŸå®¡è®¡ï¼Œè°åœ¨ä»€ä¹ˆæ—¶é—´æ“ä½œ</span></span><br><span class="line"><span class="keyword">if</span> ! grep HISTTIMEFORMAT /etc/bashrc &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">'export HISTTIMEFORMAT="%F %T `whoami` "'</span> &gt;&gt; /etc/bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SSHè¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment"># åªæœ‰TMOUTå¯ä»¥æ§åˆ¶sshè¿æ¥åœ¨ç©ºé—²æ—¶é—´è¶…æ—¶ï¼Œè‡ªåŠ¨æ–­å¼€è¿æ¥çš„æ—¶é—´ï¼Œæ•°å­—å•ä½ä¸ºâ€œç§’â€</span></span><br><span class="line"><span class="keyword">if</span> ! grep <span class="string">"TMOUT=1500"</span> /etc/profile &amp;&gt;/dev/null; <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"export TMOUT=1500"</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦æ­¢rootè¿œç¨‹ç™»å½•</span></span><br><span class="line"><span class="comment"># æ“ä½œä¹‹å‰æˆæƒå…¶ä»–è´¦å·æˆ–è€…å°†è‡ªå·±æœ¬æœºçš„keyä¿å­˜åœ¨ç³»ç»Ÿï¼Œæˆ–è€…æˆæƒå…¶ä»–è´¦æˆ·å¯ä»¥sudoåˆ°rootè´¦æˆ·</span></span><br><span class="line"><span class="comment"># sed -i 's/#PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦æ­¢å®šæ—¶ä»»åŠ¡å‘rootå‘é€é‚®ä»¶</span></span><br><span class="line"><span class="comment"># å®šæ—¶ä»»åŠ¡çš„é”™è¯¯ç­‰ä¼šç»™å½“å‰ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œé»˜è®¤æ˜¯å½“å‰ç”¨æˆ·ï¼Œä¼šåœ¨/var/mailå¾ˆå¤šå°æ–‡ä»¶å ç”¨å¾ˆå¤§çš„ç£ç›˜ç©ºé—´</span></span><br><span class="line">sed -i <span class="string">'s/^MAILTO=root/MAILTO=""/'</span> /etc/crontab</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°</span></span><br><span class="line"><span class="comment"># å¹¶å‘è¾ƒé«˜æ—¶ï¼Œå¾ˆå®¹æ˜“ä¼šè¾¾åˆ°é»˜è®¤ï¼Œå¾ˆå®¹æ˜“ä¸å¯ç”¨ï¼Œè¿™é‡Œåšä¸ªä¼˜åŒ–</span></span><br><span class="line"><span class="comment"># EOFç›´æ¥å°†å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œéœ€è¦åœ¨å½“å‰è¡Œèµ·å§‹ä½ç½®ï¼Œä¸èƒ½åŠ ç©ºæ ¼</span></span><br><span class="line"><span class="keyword">if</span> ! grep <span class="string">"* soft nofile 65535"</span> /etc/security/limits.conf &amp;&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">        cat &gt;&gt; /etc/security/limits.conf &lt;&lt; EOF</span><br><span class="line">        * soft nofile 65535</span><br><span class="line">        * hard nofile 65535</span><br><span class="line">EOF</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿå†…æ ¸ä¼˜åŒ–</span></span><br><span class="line"><span class="comment"># é»˜è®¤æ•°å€¼å¯é€šè¿‡systcl -aæŸ¥çœ‹</span></span><br><span class="line"><span class="comment"># net.core.netdev_max_backlog å†³å®šäº†ï¼Œç½‘ç»œè®¾å¤‡æ¥æ”¶æ•°æ®åŒ…çš„é€Ÿç‡æ¯”å†…æ ¸å¤„ç†è¿™äº›åŒ…çš„é€Ÿç‡å¿«æ—¶ï¼Œå…è®¸é€åˆ°é˜Ÿåˆ—çš„æ•°æ®åŒ…çš„æœ€å¤§æ•°ç›®ã€‚</span></span><br><span class="line"><span class="comment"># net.ipv4.tcp_syncookies = 1è¡¨ç¤ºå¼€å¯SYN Cookiesã€‚å½“å‡ºç°SYNç­‰å¾…é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œå¯ç”¨cookiesæ¥å¤„ç†ï¼Œå¯é˜²èŒƒå°‘é‡SYNæ”»å‡»ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚</span></span><br><span class="line"><span class="comment"># net.ipv4.tcp_fin_timeout =20è¡¨ç¤ºå¦‚æœå¥—æ¥å­—ç”±æœ¬ç«¯è¦æ±‚å…³é—­ï¼Œè¿™ä¸ªå‚æ•°å†³å®šäº†å®ƒä¿æŒåœ¨FIN-WAIT-2çŠ¶æ€çš„æ—¶é—´ã€‚</span></span><br><span class="line">cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOF</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 20480</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 20480</span><br><span class="line">net.core.netdev_max_backlog = 262144</span><br><span class="line">net.ipv4.tcp_fin_timeout = 20</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡å°‘SWAPä½¿ç”¨</span></span><br><span class="line"><span class="comment"># æƒé‡å€¼è®¾ç½®çš„è¶Šå¤§ï¼Œä½¿ç”¨çš„å¯èƒ½è¶Šå¤§ã€‚è®¾ç½®ä¸º0ï¼Œå°½å¯èƒ½ä¸ä½¿ç”¨å®ƒã€‚</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"0"</span> &gt; /proc/sys/vm/swappiness</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ç³»ç»Ÿæ€§èƒ½åˆ†æå·¥å…·åŠå…¶ä»–</span></span><br><span class="line"><span class="comment"># htop æ¯”topå¥½ç”¨çš„å·¥å…·</span></span><br><span class="line">yum install gcc make autoconf vim htop sysstat net-tools iostat iftop iotp lrzsz -y</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;Linuxç³»ç»Ÿé…ç½®åˆå§‹åŒ–ï¼Œé¡¾åæ€ä¹‰ï¼Œåœ¨æˆ‘ä»¬æœ‰å¤§é‡æœºå™¨è¦åšç›¸åŒå·¥ä½œæ—¶ï¼Œæ¯”å¦‚éƒ½è¦å®‰è£…å¥½æŸäº›è½¯ä»¶ï¼Œé…ç½®ç¯å¢ƒç­‰ï¼Œè¿™æ—¶å€™ï¼Œä¸€ä¸ªä¾¿æ·å®ç”¨çš„è„šæœ¬å°±æ´¾ä¸Šç”¨åœºå•¦ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Centosä½¿ç”¨mailxå‘Šè­¦é‚®ä»¶é…ç½®</title>
    <link href="https://annecoding.github.io/2019/08/22/Centos%E4%BD%BF%E7%94%A8mailx%E5%91%8A%E8%AD%A6%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/"/>
    <id>https://annecoding.github.io/2019/08/22/Centosä½¿ç”¨mailxå‘Šè­¦é‚®ä»¶é…ç½®/</id>
    <published>2019-08-22T01:09:19.000Z</published>
    <updated>2019-08-24T01:38:04.551Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>ä»Šå¤©ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸ªå¯ä»¥ç›´æ¥åœ¨ Linux ä¸Šä½¿ç”¨ SMTP å‘é€é‚®ä»¶çš„ç¨‹åºï¼šMailxï¼Œè¿™ä¸ªç¨‹åºå¯ä»¥å¸®åŠ©æˆ‘ä»¬è®©æœåŠ¡å™¨ç›´æ¥æ”¯æŒé‚®ä»¶å‘é€ï¼Œä¸ç”¨å†åœ¨æ¯ä¸ªç«™ç‚¹ä¸Šéƒ½è®¾ç½®äº†ã€‚</p><a id="more"></a><p><strong>centosé…ç½®è‡ªå¸¦é‚®ä»¶æœåŠ¡å™¨mailxå‘ä»¶é…ç½®</strong></p><h4 id="å®‰è£…mailxç¨‹åº"><a href="#å®‰è£…mailxç¨‹åº" class="headerlink" title="å®‰è£…mailxç¨‹åº"></a>å®‰è£…mailxç¨‹åº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mailx</span><br></pre></td></tr></table></figure><p>ğŸŒŸ å®‰è£…ä¹‹å‰ï¼Œå»ºè®®ç§»é™¤ä¸å†éœ€è¦ä¸”å¯èƒ½ä¼šå¼•èµ·å†²çªçš„ postfix æˆ– sendmail ç¨‹åºã€‚</p><h4 id="ä¿®æ”¹å‘ä»¶äººè®¾ç½®"><a href="#ä¿®æ”¹å‘ä»¶äººè®¾ç½®" class="headerlink" title="ä¿®æ”¹å‘ä»¶äººè®¾ç½®"></a>ä¿®æ”¹å‘ä»¶äººè®¾ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ vim + /etc/mail.rc </span><br><span class="line"><span class="built_in">set</span> nss-config-dir=/root/.certs</span><br><span class="line"><span class="built_in">set</span> smtp=<span class="string">"smtps://smtp.163.com:465"</span></span><br><span class="line"><span class="comment"># set smtp=smtp.163.com  é»˜è®¤25ç«¯å£ä¸æ”¾å¼€</span></span><br><span class="line"><span class="built_in">set</span> from=<span class="string">"annecoding@163.com"</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth=login</span><br><span class="line"><span class="built_in">set</span> smtp-auth-user=<span class="string">"annecoding@163.com"</span></span><br><span class="line"><span class="comment"># ä¸æ˜¯å¯†ç ï¼Œä¸æ˜¯å¯†ç ï¼ï¼ï¼è·å–ç½‘æ˜“163è®¾ç½®çš„å®¢æˆ·ç«¯æˆæƒå¯†ç ã€‚</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-password=<span class="string">"xxxxxx"</span></span><br><span class="line"><span class="built_in">set</span> ssl-verify=ignore</span><br></pre></td></tr></table></figure><p>ğŸ’¡ ä¸€èˆ¬é‚®ä»¶æœåŠ¡å™¨ä¼šæä¾› smtpã€smtps å’Œ smtp starttls æœåŠ¡æ¥å‘é€é‚®ä»¶ã€‚smtp æœ€ç®€å•çš„ï¼Œä¹Ÿæœ€ä¸å®‰å…¨çš„ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œæœ€å¥½ä½¿ç”¨ smtps æˆ–è€… smtp starttls æ¥å‘é€é‚®ä»¶ã€‚</p><h4 id="æµ‹è¯•å‘é€"><a href="#æµ‹è¯•å‘é€" class="headerlink" title="æµ‹è¯•å‘é€"></a>æµ‹è¯•å‘é€</h4><p>å¯ä»¥å‘é€å‡ºé‚®ä»¶ï¼Œä½†æ˜¯ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹é¢è¿™ç§æƒ…å†µã€‚éœ€è¦ç”Ÿæˆè¯ä¹¦æ¥è§£å†³æ­¤é—®é¢˜ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"TEST"</span> | mail -s <span class="string">"Title"</span> <span class="string">"annecoding@163.com"</span></span><br><span class="line">$ Error <span class="keyword">in</span> certificate: Peer<span class="string">'s certificate issuer is not recognized.</span></span><br></pre></td></tr></table></figure></p><h4 id="ç”Ÿæˆè¯ä¹¦"><a href="#ç”Ÿæˆè¯ä¹¦" class="headerlink" title="ç”Ÿæˆè¯ä¹¦"></a>ç”Ÿæˆè¯ä¹¦</h4><p>åœ¨æœ¬åœ°æ–°å»ºç›®å½•ç”Ÿæˆè¯ä¹¦<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /root/.certs/</span><br><span class="line">$ <span class="built_in">echo</span> -n | openssl s_client -connect smtp.163.com:465 | sed -ne <span class="string">'/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p'</span> &gt; ~/.certs/163.crt</span><br><span class="line">$ certutil -A -n <span class="string">"GeoTrust SSL CA"</span> -t <span class="string">"C,,"</span> -d ~/.certs -i ~/.certs/163.crt</span><br><span class="line">$ certutil -A -n <span class="string">"GeoTrust Global CA"</span> -t <span class="string">"C,,"</span> -d ~/.certs -i ~/.certs/163.crt</span><br><span class="line">$ certutil -L -d /root/.certs</span><br><span class="line"><span class="comment"># ä¿¡ä»»è¯ä¹¦</span></span><br><span class="line">$ <span class="built_in">cd</span> .certs</span><br><span class="line">$ certutil -A -n <span class="string">"GeoTrust SSL CA - G3"</span> -t <span class="string">"Pu,Pu,Pu"</span>  -d ./ -i 163.crt</span><br></pre></td></tr></table></figure></p><p>ğŸ’¡ å‚è€ƒä¸Šé¢çš„è®¾ç½®ï¼ˆå¦‚æœè¦ç”¨qqé‚®ç®±ï¼Œå¯ä»¥æŠŠæ‰€æœ‰çš„ç”Ÿæˆè¯ä¹¦çš„163æ”¹ä¸ºqqï¼‰ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ 126ï¼Œ163 ç­‰é‚®ç®±åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡ SMTP å‘é€é‚®ä»¶ã€‚è®¾ç½®æˆåŠŸä»¥åï¼ŒæœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰ç«™ç‚¹ï¼Œæˆ–è€…å…¶ä»–ç¨‹åºã€å…¶ä»–è¯­è¨€å¼€å‘çš„ç«™ç‚¹ï¼Œéƒ½å¯ä»¥ç›´æ¥å‘é€é‚®ä»¶äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿ</p><h4 id="å†æ¬¡ä¿®æ”¹mail-rc"><a href="#å†æ¬¡ä¿®æ”¹mail-rc" class="headerlink" title="å†æ¬¡ä¿®æ”¹mail.rc"></a>å†æ¬¡ä¿®æ”¹mail.rc</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/mail.rc</span><br><span class="line">$ <span class="built_in">set</span> nss-config-dir=/root/.certs/</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•å‘é€-1"><a href="#æµ‹è¯•å‘é€-1" class="headerlink" title="æµ‹è¯•å‘é€"></a>æµ‹è¯•å‘é€</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mail -så‘é€é‚®ä»¶ -vå¯ä»¥æ˜¾ç¤ºå‘ä»¶çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"é‚®ä»¶æ­£æ–‡"</span> | mail -s <span class="string">"æ ‡é¢˜"</span> <span class="string">"annecoding@163.com"</span> </span><br><span class="line">$ mail -s <span class="string">"xxxx"</span> annecoding@163.com &lt; /root/cpu.sh</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://www.wpzhiku.com/shi-yong-mailx-tong-guo-smtp-zai-centos-shang-fa-song-you-jian/" target="_blank" rel="noopener">ä½¿ç”¨ Mailx é€šè¿‡ SMTP åœ¨ Centos ä¸Šå‘é€é‚®ä»¶ï¼Œè§£å†³ WordPress å‘é€é‚®ä»¶é—®é¢˜</a></p><p> <a href="https://www.cnblogs.com/hqqq/p/6261419.html" target="_blank" rel="noopener">mialxé…ç½®qqé‚®ç®±å‘é€é‚®ä»¶</a></p><p> <a href="https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac2cda80145a1742516" target="_blank" rel="noopener">å¦‚ä½•å¼€å¯å®¢æˆ·ç«¯æˆæƒç ï¼Ÿ</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;ä»Šå¤©ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸ªå¯ä»¥ç›´æ¥åœ¨ Linux ä¸Šä½¿ç”¨ SMTP å‘é€é‚®ä»¶çš„ç¨‹åºï¼šMailxï¼Œè¿™ä¸ªç¨‹åºå¯ä»¥å¸®åŠ©æˆ‘ä»¬è®©æœåŠ¡å™¨ç›´æ¥æ”¯æŒé‚®ä»¶å‘é€ï¼Œä¸ç”¨å†åœ¨æ¯ä¸ªç«™ç‚¹ä¸Šéƒ½è®¾ç½®äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="mailx" scheme="https://annecoding.github.io/tags/mailx/"/>
    
  </entry>
  
  <entry>
    <title>shellä¸­åˆ‡åˆ†æ–‡ä»¶åå’Œæ‰©å±•å</title>
    <link href="https://annecoding.github.io/2019/08/13/shell%E4%B8%AD%E5%88%87%E5%88%86%E6%96%87%E4%BB%B6%E5%90%8D%E5%92%8C%E6%89%A9%E5%B1%95%E5%90%8D/"/>
    <id>https://annecoding.github.io/2019/08/13/shellä¸­åˆ‡åˆ†æ–‡ä»¶åå’Œæ‰©å±•å/</id>
    <published>2019-08-13T08:22:49.000Z</published>
    <updated>2019-08-13T08:50:59.385Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>å¯¹äºshellæ¶‰åŠçš„ä¿®æ”¹æ–‡ä»¶åçš„æ“ä½œï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æå–æŸä¸ªæ–‡ä»¶åï¼Œæˆ–è€…æå–æŸä¸ªæ–‡ä»¶çš„æ‰©å±•åã€‚getâœ”</p><a id="more"></a><h3 id="æ ¹æ®æ‰©å±•ååˆ‡åˆ†æ–‡ä»¶å"><a href="#æ ¹æ®æ‰©å±•ååˆ‡åˆ†æ–‡ä»¶å" class="headerlink" title="æ ¹æ®æ‰©å±•ååˆ‡åˆ†æ–‡ä»¶å"></a>æ ¹æ®æ‰©å±•ååˆ‡åˆ†æ–‡ä»¶å</h3><p>æˆªå–æ–‡ä»¶åç§°ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat file.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">file_jpg=<span class="string">"sample.jpg"</span></span><br><span class="line">name=<span class="variable">$&#123;file_jpg%.*&#125;</span></span><br><span class="line"><span class="built_in">echo</span> File name is:<span class="variable">$name</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./file.sh </span><br><span class="line">File name is:sample</span><br></pre></td></tr></table></figure><p>æˆªå–æ–‡ä»¶æ‰©å±•åç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat file1.sh</span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">file_jpg=<span class="string">"sample.jpg"</span></span><br><span class="line">extension=<span class="variable">$&#123;file_jpg#*.&#125;</span></span><br><span class="line"><span class="built_in">echo</span> Extension is:<span class="variable">$extension</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./file1.sh</span><br><span class="line">Extension is:jpg</span><br></pre></td></tr></table></figure><p><code>${VAR%.*}</code>å·¥ä½œåŸç†ï¼š</p><ul><li>ä»<code>$VAR</code>ä¸­åˆ é™¤ä½äº<code>%</code>å³ä¾§çš„é€šé…ç¬¦ï¼ˆåœ¨ä¸Šä¾‹ä¸­å¼<code>.*</code>ï¼‰ï¼Œé€šé…ç¬¦ä»å³å‘å·¦è¿›è¡ŒåŒ¹é…ã€‚</li><li>ç»™<code>VAR</code>èµ‹å€¼ï¼Œå³<code>VAR=sample.jpg</code>ï¼Œé€šé…ç¬¦ä»å³å‘å·¦åŒ¹é…å¾—åˆ°çš„å†…å®¹æ˜¯<code>.jpg</code>ï¼Œå› æ­¤ä»<code>$VAR</code>ä¸­åˆ é™¤åŒ¹é…ç»“æœï¼Œå¾—åˆ°è¾“å‡ºç»“æœsampleã€‚</li></ul><p>ğŸ’¡ é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰è€ƒè™‘è¿‡ï¼Œè¦æ˜¯æ–‡ä»¶åæœ‰å¾ˆå¤šåç¼€å‘¢<code>cute.a.b.c.d.txt</code>ï¼Ÿè¦æ˜¯æå–çš„å˜é‡ä¸ºåŸŸå<code>www.google.com</code>å‘¢ï¼Ÿæœ‰çš„æ˜¯åŠæ³•ï¼Œå¾€ä¸‹çœ‹~</p><p><strong>%å±äºéè´ªå©ªåŒ¹é…ï¼Œå®ƒä»å³å‘å·¦æ‰¾å‡ºåŒ¹é…é€šé…ç¬¦çš„æœ€çŸ­ç»“æœã€‚è¿˜æœ‰å¦ä¸€ä¸ªæ“ä½œç¬¦%%ï¼Œå®ƒäº%ç›¸ä¼¼ï¼Œä½†è¡Œä¸ºæ¨¡å¼ç¡®æ˜¯è´ªå©ªçš„ï¼Œå®ƒä¼šåŒ¹é…ç¬¦åˆé€šé…ç¬¦çš„æœ€é•¿ç»“æœã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å£°æ˜å˜é‡var</span></span><br><span class="line">$ var=hack.fun.book.txt</span><br><span class="line"><span class="comment"># æ‰§è¡Œä»å³å‘å·¦éè´ªå©ªåŒ¹é…ï¼Œå¾—åˆ°çš„åŒ¹é…ç»“æœä¸º.txt,åˆ é™¤äº†.txtä¹‹åæ–‡ä»¶åï¼Œå¯ä»¥å¾—åˆ°å…·ä½“çš„æ–‡ä»¶å</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var%.*&#125;</span></span><br><span class="line">hack.fun.book</span><br><span class="line"><span class="comment"># æ‰§è¡Œä»å³å‘å·¦è´ªå©ªåŒ¹é…ï¼Œå¾—åˆ°ç»“æœ.fun.book.txt,åˆ é™¤äº†.fun.book.txt</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var%%.*&#125;</span></span><br><span class="line">hack</span><br></pre></td></tr></table></figure><p><code>${VAR#*.}</code>å·¥ä½œåŸç†ï¼š</p><ul><li>ä»<code>$VAR</code>ä¸­åˆ é™¤ä½äº<code>#</code>å³ä¾§çš„é€šé…ç¬¦ï¼ˆä¸Šä¸ªæ —å­ä¸­ä½¿ç”¨çš„<code>*.</code>ï¼‰ï¼Œä»å·¦åˆ°å³åŒ¹é…å­—ç¬¦ä¸²ã€‚</li><li>å’Œ<code>#</code>å¯¹åº”çš„è´ªå©ªæ“ä½œæ˜¯<code>##</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»å³åˆ°å·¦è¿›è¡Œéè´ªå©ªåŒ¹é…ï¼Œå¾—åˆ°åŒ¹é…ç»“æœhackï¼Œä»æŒ‡å®šå˜é‡ä¸­åˆ é™¤åŒ¹é…ç»“æœ</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var#*.&#125;</span></span><br><span class="line">fun.book.txt</span><br><span class="line"><span class="comment"># ä»å³åˆ°å·¦è¿›è¡Œéè´ªå©ªåŒ¹é…ï¼Œå¾—åˆ°åŒ¹é…ç»“æœhack.fun.bookï¼Œåˆ é™¤åŒ¹é…ç»“æœåå¾—åˆ°æ‰©å±•å</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var##*.&#125;</span></span><br><span class="line">txt</span><br></pre></td></tr></table></figure><p>ğŸ’¡æ€»ç»“</p><p><strong>æ–‡ä»¶åä¸­å¯èƒ½åŒ…å«å¤šä¸ª.å­—ç¬¦ï¼Œæ‰€ä»¥å‘¢</strong></p><p><strong>å¯¹äºæ–‡ä»¶åï¼šç›¸è¾ƒäº%%ï¼Œ%æ›´é€‚åˆäºæå–æ–‡ä»¶åã€‚%æ‰§è¡Œçš„æ˜¯éè´ªå©ªåŒ¹é…ï¼Œåªä¼šåˆ é™¤æ‰©å±•åã€‚</strong></p><p><strong>å¯¹äºæ‰©å±•åï¼šç›¸è¾ƒäº#ï¼Œ##æ›´é€‚åˆäºä»ä¸­æå–æ‰©å±•åã€‚##æ‰§è¡Œçš„æ˜¯è´ªå©ªåŒ¹é…ï¼Œå› æ­¤èƒ½å‡†ç¡®çš„æå–æ‰©å±•åã€‚</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;å¯¹äºshellæ¶‰åŠçš„ä¿®æ”¹æ–‡ä»¶åçš„æ“ä½œï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æå–æŸä¸ªæ–‡ä»¶åï¼Œæˆ–è€…æå–æŸä¸ªæ–‡ä»¶çš„æ‰©å±•åã€‚getâœ”&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>ç›‘æ§å¤šå°æœåŠ¡å™¨åˆ©ç”¨ç‡</title>
    <link href="https://annecoding.github.io/2019/07/25/%E7%9B%91%E6%8E%A7%E5%A4%9A%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%A9%E7%94%A8%E7%8E%87/"/>
    <id>https://annecoding.github.io/2019/07/25/ç›‘æ§å¤šå°æœåŠ¡å™¨åˆ©ç”¨ç‡/</id>
    <published>2019-07-25T02:12:15.000Z</published>
    <updated>2019-09-01T04:57:52.968Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨linuxä¸»æœºsshé€šè¿‡å¯†ç <strong>äº¤äº’ç™»å½•</strong>åˆ°è¿œç¨‹å…¶ä»–ä¸»æœºã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨è„šæœ¬é‡Œé¢ä¸æƒ³ç”¨äº¤äº’å‘¢ï¼Ÿå½“ç„¶äº†ï¼Œsshç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚</p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç¯å¢ƒï¼š192.168.1.2ï¼ˆç›‘æ§ä¸»æœºï¼‰ 192.168.1.3ï¼ˆè¢«ç›‘æ§ä¸»æœºï¼‰ 192.168.1.4ï¼ˆè¢«ç›‘æ§ä¸»æœºï¼‰</span><br></pre></td></tr></table></figure><p>ç°åœ¨è¦åšçš„æ˜¯åœ¨sshä¸»æœºä¹‹é—´å…å¯†é’¥ç™»å½•ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿æˆ‘ä»¬ä¸‹ä¸€æ­¥ä½¿ç”¨è„šæœ¬åœ¨ç›´æ¥åœ¨æœ¬æœºè¿æ¥è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤ã€‚å…¶å®å°±æ˜¯åœ¨ç›‘æ§ä¸»æœºä¸Šé¢ç”Ÿæˆå…¬é’¥ï¼Œç„¶åæ”¾åˆ°è¢«ç›‘æ§ä¸»æœºä¸Šï¼Œç±»ä¼¼äºæˆ‘ä»¬ç™»å½•githubæŠŠè‡ªå·±æœ¬æœºçš„å…¬é’¥æ”¾åœ¨githubæœåŠ¡å™¨ä¸Šé¢ä¸€æ ·ï¼Œè¿™æ ·æˆ‘ä»¬sshè¿æ¥çš„æ—¶å€™å°±ä¸ç”¨æ€»è¾“å…¥å¯†ç äº†ã€‚</p><h3 id="å…å¯†é’¥ç™»å½•"><a href="#å…å¯†é’¥ç™»å½•" class="headerlink" title="å…å¯†é’¥ç™»å½•"></a>å…å¯†é’¥ç™»å½•</h3><p>1.äº§ç”Ÿå…¬é’¥å¯¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨æœ¬åœ°æœºå™¨ä¸Šä½¿ç”¨ssh-keygenäº§ç”Ÿå…¬é’¥ç§é’¥å¯¹</span></span><br><span class="line"><span class="comment"># åœ¨/rootæ ¹ç›®å½•ä¸‹ï¼Œä¸€ç›´é»˜è®¤ï¼Œé»˜è®¤å­˜åœ¨å½“å‰ç›®å½•ä¸‹.sshé‡Œé¢ï¼ˆll -aï¼‰</span></span><br><span class="line">$ ssh-keygen</span><br></pre></td></tr></table></figure></p><p>2.å°†æœ¬æœºå…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹è¦å…å¯†ç™»å½•çš„æœºå™¨ä¸­<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨ssh-copy-idå°†å…¬é’¥id_rsa.pubå¤åˆ¶åˆ°è¿œç¨‹æœºå™¨ä¸­ï¼Œç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment"># é»˜è®¤å°†192.168.1.2çš„å…¬é’¥å­˜æ”¾åœ¨/rootæ ¹ç›®å½•ä¸‹çš„.sshé‡Œé¢authorized_keys</span></span><br><span class="line">$ ssh root@192.168.1.3</span><br><span class="line">$ ssh root@192.168.1.4</span><br></pre></td></tr></table></figure></p><p>3.å…å¯†è¿æ¥è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@192.168.1.3</span><br><span class="line">$ ssh root@192.168.1.4 <span class="string">'df -h'</span></span><br></pre></td></tr></table></figure></p><h3 id="ç›‘æ§æœåŠ¡å™¨åˆ©ç”¨ç‡"><a href="#ç›‘æ§æœåŠ¡å™¨åˆ©ç”¨ç‡" class="headerlink" title="ç›‘æ§æœåŠ¡å™¨åˆ©ç”¨ç‡"></a>ç›‘æ§æœåŠ¡å™¨åˆ©ç”¨ç‡</h3><p>å¥½äº†ï¼Œç°åœ¨åŸºç¡€ç¯å¢ƒå·²ç»åšå¥½äº†ï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µå¯ä»¥ç”¨<code>df -h</code>æ¥æŸ¥è¯¢ï¼Œè„šæœ¬å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ cat disk_availabile.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># ç›‘æ§å¤šå°æœåŠ¡å™¨åˆ©ç”¨ç‡</span></span><br><span class="line"><span class="comment"># å°†éœ€è¦ç›‘æ§çš„æœåŠ¡å™¨ä¿¡æ¯å­˜å‚¨åœ¨host.infoä¸­ï¼ŒIPåœ°å€ ç”¨æˆ· ç«¯å£å·</span></span><br><span class="line">HOST_INFO=host.info</span><br><span class="line"><span class="comment"># é€è¡ŒåŒ¹é…ï¼Œä¸åŒ¹é…æ³¨é‡Šï¼ˆä»¥#å¼€å¤´ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> IP <span class="keyword">in</span> $(awk <span class="string">'/^[^#]/&#123;print $1&#125;'</span> <span class="variable">$HOST_INFO</span>);<span class="keyword">do</span></span><br><span class="line"> <span class="comment"># awk -v åœ¨shellä¸­ä½¿ç”¨å˜é‡ï¼Œä»¥ipä¸ºåŸºå‡†åŒ¹é…ï¼ŒåŒ¹é…åˆ°äº†å–å‡ºç”¨æˆ·</span></span><br><span class="line">        USER=`awk -v ip=<span class="variable">$IP</span> <span class="string">'ip==$1&#123;print $2&#125;'</span> <span class="variable">$HOST_INFO</span>`</span><br><span class="line">        PORT=`awk -v ip=<span class="variable">$IP</span> <span class="string">'ip==$1&#123;print $3&#125;'</span> <span class="variable">$HOST_INFO</span>`</span><br><span class="line">        TMP_FILE=/tmp/disk.tmp</span><br><span class="line">        <span class="comment"># å°†è¿æ¥åˆ°è¿œç¨‹ä¸»æœºçš„ä¿¡æ¯æš‚æ—¶å­˜å…¥æ–‡ä»¶ä¸­</span></span><br><span class="line">        ssh -p <span class="variable">$PORT</span> <span class="variable">$USER</span>@<span class="variable">$IP</span> <span class="string">'df -h'</span> &gt; <span class="variable">$TMP_FILE</span></span><br><span class="line">        <span class="comment"># å–å‡ºæŒ‚è½½ç‚¹å¹¶æ·»åŠ åˆ†éš”ç¬¦=  </span></span><br><span class="line">        <span class="comment"># int($5) å»é™¤ç™¾åˆ†æ¯”ä»¥æ–¹ä¾¿åé¢åšåˆ¤æ–­ /=5</span></span><br><span class="line">        USE_PART_LIST=`awk <span class="string">'BEGIN&#123;OFS="="&#125;/^\/dev/&#123;print $NF,int($5)&#125;'</span> <span class="variable">$TMP_FILE</span>`</span><br><span class="line">        <span class="comment"># å–æŒ‚è½½ç‚¹å’Œåˆ©ç”¨ç‡</span></span><br><span class="line">        <span class="keyword">for</span> USE_RATE <span class="keyword">in</span> <span class="variable">$USE_PART_LIST</span>;<span class="keyword">do</span></span><br><span class="line">                <span class="comment"># æŒ‚è½½ç‚¹ åŒ¹é…åˆ°=å³è¾¹çš„ /</span></span><br><span class="line">                PART_NAME=<span class="variable">$&#123;USE_RATE%=*&#125;</span></span><br><span class="line">                <span class="comment"># ä½¿ç”¨ç‡ åŒ¹é…åˆ°=å·¦è¾¹çš„ 5</span></span><br><span class="line">                USE_RATE=<span class="variable">$&#123;USE_RATE#*=&#125;</span></span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$USE_RATE</span> -ge 80 ]; <span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">$IP</span> \n Warning: <span class="variable">$PART_NAME</span> Partition usage <span class="variable">$USE_RATE</span>%!"</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat host.info </span><br><span class="line">192.168.1.3 root 22</span><br><span class="line">$ ./disk_availabile.sh</span><br><span class="line">192.168.1.3 </span><br><span class="line"> Warning: / Partition usage 86%!</span><br><span class="line">192.168.1.3 </span><br><span class="line"> Warning: /dev/sda2 Partition usage 88%!</span><br><span class="line">192.168.1.4</span><br><span class="line"> Warning: / Partition usage 89%!</span><br><span class="line">192.168.1.4 </span><br><span class="line"> Warning: /dev/vda1 Partition usage 92%!</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨linuxä¸»æœºsshé€šè¿‡å¯†ç &lt;strong&gt;äº¤äº’ç™»å½•&lt;/strong&gt;åˆ°è¿œç¨‹å…¶ä»–ä¸»æœºã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨è„šæœ¬é‡Œé¢ä¸æƒ³ç”¨äº¤äº’å‘¢ï¼Ÿå½“ç„¶äº†ï¼Œsshç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>mtrç½‘ç»œåˆ†æå·¥å…·å®‰è£…</title>
    <link href="https://annecoding.github.io/2019/07/24/mtr%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/"/>
    <id>https://annecoding.github.io/2019/07/24/mtrç½‘ç»œåˆ†æå·¥å…·å®‰è£…/</id>
    <published>2019-07-24T08:00:54.000Z</published>
    <updated>2019-08-03T01:19:07.801Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>é‡åˆ°äº†å®‰è£…å®Œæˆmträ»¥åå‘½ä»¤ä¸èƒ½ä½¿ç”¨çš„æƒ…å†µï¼Œå› ä¸ºç¯å¢ƒå˜é‡çš„é…ç½®é—®é¢˜ï¼ï¼ï¼</p><a id="more"></a><p>mtrç½‘ç»œåˆ†æå·¥å…·å®‰è£…</p><p>1.é¦–å…ˆä¿è¯å®‰è£…brewå·¥å…·</p><p>2.æ‰§è¡Œ<code>brew cask mtr</code>è¿›è¡Œè½¯ä»¶å®‰è£…</p><p>3.é…ç½®PATHå˜é‡ <code>vim ~/.bash_profile</code> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/sbin</span><br></pre></td></tr></table></figure><p>4.é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>5.å®‰è£…å®Œä»¥ååœ¨<code>usr/local/sbin</code>ç›®å½•ä¸‹ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå¯ä»¥æ‰§è¡Œï¼Œå†æ‰“å¼€çª—å£å°±ä¸è¡Œï¼Œç¯å¢ƒå˜é‡åªç”Ÿæ•ˆäº†ä¸€æ¬¡ã€‚</p><p>å†æ¬¡æ‰“å¼€æ–°çš„çª—å£å°±å‘ç°ä¸èƒ½ä½¿ç”¨äº†ï¼Œè¾“å…¥<code>mtr</code>å‘½ä»¤å‘ç°ä¸èƒ½è¿è¡Œï¼Œæç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mtr: mtr should not run suid</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line"><span class="comment"># å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">/usr/<span class="built_in">local</span>/bin:/usr/bin:/bin:/usr/sbin:/sbin</span><br></pre></td></tr></table></figure><p>æœç„¶ï¼Œæ²¡æœ‰<code>usr/local/sbin</code></p><p>6.æ­¤æ—¶æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š </p><p>ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå»ºç«‹è½¯é“¾æ¥ï¼Œå°†æ‰€å®‰è£…çš„mtræŒ‡ä»¤è½¯é“¾æ¥åˆ°ç³»ç»Ÿæ‰¾å¾—åˆ°çš„ç›®å½•ä¸‹ï¼Œæ¯”å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/sbin/mtr* /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼Œä¿®æ”¹/etc/pathsçš„pathæ–‡ä»¶ï¼Œæ·»åŠ ã€‚ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/paths </span><br><span class="line">åœ¨æœ€åä¸€è¡Œæ·»åŠ ï¼š/usr/<span class="built_in">local</span>/sbinï¼Œæ­¤ä¿®æ”¹é‡æ–°å¯åŠ¨ç¨‹åºä¾¿ä¼šç”Ÿæ•ˆã€‚</span><br></pre></td></tr></table></figure><p>7.ä½¿ç”¨mtrå‘½ä»¤å¿…é¡»æ˜¯rootæƒé™ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹ç›®å½•æƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mtr www.baidu.com</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;é‡åˆ°äº†å®‰è£…å®Œæˆmträ»¥åå‘½ä»¤ä¸èƒ½ä½¿ç”¨çš„æƒ…å†µï¼Œå› ä¸ºç¯å¢ƒå˜é‡çš„é…ç½®é—®é¢˜ï¼ï¼ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="mtr" scheme="https://annecoding.github.io/tags/mtr/"/>
    
  </entry>
  
  <entry>
    <title>macä¸‹å¦‚ä½•ä¿®æ”¹ç¯å¢ƒå˜é‡</title>
    <link href="https://annecoding.github.io/2019/07/24/mac%E4%B8%8B%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <id>https://annecoding.github.io/2019/07/24/macä¸‹å¦‚ä½•ä¿®æ”¹ç¯å¢ƒå˜é‡/</id>
    <published>2019-07-24T08:00:33.000Z</published>
    <updated>2019-07-28T01:39:28.265Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>macä¸‹ç¯å¢ƒå˜é‡åˆ°åº•è¯¥ä¿®æ”¹å“ªä¸ªæ–‡ä»¶å‘¢ï¼Ÿï¼Ÿï¼Ÿé»‘äººé—®å·è„¸ï¼Œæ‰€ä»¥ï¼Œä¸€èµ·æ¥æ­ç©¿å®ƒç¥ç§˜çš„é¢çº±å§ã€‚<br><a id="more"></a></p><p>macä¸‹ä¸€èˆ¬ä½¿ç”¨bashä½œä¸ºé»˜è®¤shell</p><p>macç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼ŒåŠ è½½é¡ºåºä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile /etc/paths ~/.bash_profile ~/.bash_login ~/.profile ~/.bashrc</span><br></pre></td></tr></table></figure><p>å½“ç„¶<code>/etc/profile</code>å’Œ<code>/etc/paths</code>æ˜¯ç³»ç»Ÿçº§åˆ«çš„ï¼Œç³»ç»Ÿå¯åŠ¨å°±ä¼šåŠ è½½ï¼Œåé¢å‡ ä¸ªæ˜¯å½“å‰ç”¨æˆ·çº§çš„ç¯å¢ƒå˜é‡ã€‚</p><p>åé¢3ä¸ªæŒ‰ç…§ä»å‰å¾€åçš„é¡ºåºè¯»å–ï¼Œå¦‚æœ<code>/.bash_profile</code>æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åé¢çš„å‡ ä¸ªæ–‡ä»¶å°±ä¼šè¢«å¿½ç•¥ä¸è¯»äº†ï¼Œå¦‚æœ<code>~/.bash_profile</code>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰ä¼šä»¥æ­¤ç±»æ¨è¯»å–åé¢çš„æ–‡ä»¶ã€‚</p><p><code>~/.bashrc</code>æ²¡æœ‰ä¸Šè¿°è§„åˆ™ï¼Œå®ƒæ˜¯<code>bash shell</code>æ‰“å¼€çš„æ—¶å€™è½½å…¥çš„ã€‚</p><p>å¦‚æœæ²¡ç‰¹æ®Šè¯´æ˜,è®¾ç½®PATHçš„è¯­æ³•éƒ½ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸­é—´ç”¨å†’å·éš”å¼€ </span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:&lt;PATH 1&gt;:&lt;PATH 2&gt;:&lt;PATH 3&gt;:------:&lt;PATH N&gt;</span><br></pre></td></tr></table></figure><h3 id="å…¨å±€è®¾ç½®"><a href="#å…¨å±€è®¾ç½®" class="headerlink" title="å…¨å±€è®¾ç½®"></a>å…¨å±€è®¾ç½®</h3><p>ä¸‹é¢çš„å‡ ä¸ªæ–‡ä»¶è®¾ç½®æ˜¯å…¨å±€çš„,ä¿®æ”¹æ—¶éœ€è¦rootæƒé™</p><p>1ã€<code>/etc/paths</code> ï¼ˆå…¨å±€å»ºè®®ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ ï¼‰</p><p>ç¼–è¾‘ <code>/etc/paths</code>ï¼Œå°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ°<code>/etc/paths</code>æ–‡ä»¶ä¸­ ï¼Œä¸€è¡Œä¸€ä¸ªè·¯å¾„</p><p>Hintï¼šè¾“å…¥ç¯å¢ƒå˜é‡æ—¶ï¼Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªåœ°è¾“å…¥ï¼Œåªè¦æ‹–åŠ¨æ–‡ä»¶å¤¹åˆ° Terminal é‡Œå°±å¯ä»¥äº†ã€‚</p><p>2ã€<code>/etc/profile</code>ï¼ˆå»ºè®®ä¸ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ ï¼‰å…¨å±€ï¼ˆå…¬æœ‰ï¼‰é…ç½®ï¼Œä¸ç®¡æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œç™»å½•æ—¶éƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶ã€‚</p><p>3ã€<code>/etc/bashrc</code>ï¼ˆä¸€èˆ¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ç³»ç»Ÿçº§ç¯å¢ƒå˜é‡ï¼‰å…¨å±€ï¼ˆå…¬æœ‰ï¼‰é…ç½®ï¼Œbash shellæ‰§è¡Œæ—¶ï¼Œä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œéƒ½ä¼šè¯»å–æ­¤æ–‡ä»¶ã€‚</p><p>4ã€è¿™æ¡æ˜¯ä»€ä¹ˆé¬¼ï¼Œå…ˆæ”¾ç€hhh~~~~ğŸ‘»</p><p>1.åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/paths.d/mysql</span><br></pre></td></tr></table></figure><p>2.ç”¨ vim æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœæ˜¯ä»¥ open -t çš„æ–¹å¼æ‰“å¼€ï¼Œåˆ™ä¸å…è®¸ç¼–è¾‘ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/paths.d/mysql</span><br></pre></td></tr></table></figure><p>3.ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œé”®å…¥è·¯å¾„å¹¶ä¿å­˜ï¼ˆå…³é—­è¯¥ Terminal çª—å£å¹¶é‡æ–°æ‰“å¼€ä¸€ä¸ªï¼Œå°±èƒ½ä½¿ç”¨ mysql å‘½ä»¤äº†ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/mysql/bin</span><br></pre></td></tr></table></figure><p>æ®è¯´ï¼Œè¿™æ ·å¯ä»¥è‡ªå·±ç”Ÿæˆæ–°çš„æ–‡ä»¶ï¼Œä¸ç”¨æŠŠå˜é‡å…¨éƒ½æ”¾åˆ° paths ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><h3 id="å•ä¸ªç”¨æˆ·è®¾ç½®"><a href="#å•ä¸ªç”¨æˆ·è®¾ç½®" class="headerlink" title="å•ä¸ªç”¨æˆ·è®¾ç½®"></a>å•ä¸ªç”¨æˆ·è®¾ç½®</h3><p>1ã€<code>~/.bash_profile</code> ï¼ˆä»»æ„ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ç”¨æˆ·çº§ç¯å¢ƒå˜é‡ï¼‰</p><p>ï¼ˆæ³¨ï¼šLinux é‡Œé¢æ˜¯<code>.bashrc</code> è€Œ Mac æ˜¯ <code>.bash_profile</code>ï¼‰</p><p>è‹¥<code>bash shell</code>æ˜¯ä»¥loginæ–¹å¼æ‰§è¡Œæ—¶ï¼Œæ‰ä¼šè¯»å–æ­¤æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä»…ä»…æ‰§è¡Œä¸€æ¬¡!é»˜è®¤æƒ…å†µä¸‹,ä»–è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡</p><p>è®¾ç½®å‘½ä»¤åˆ«å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ll=â€™ls -laâ€™</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/opt/<span class="built_in">local</span>/bin:/opt/<span class="built_in">local</span>/sbin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>2ã€<code>~/.bashrc</code>åŒä¸Š</p><p>å¦‚æœæƒ³ç«‹åˆ»ç”Ÿæ•ˆï¼Œåˆ™å¯æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ source ç›¸åº”çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬ç¯å¢ƒå˜é‡æ›´æ”¹åï¼Œé‡å¯ç¨‹åºåç”Ÿæ•ˆã€‚</p><blockquote><p>å‚è€ƒï¼š</p><p><a href="https://segmentfault.com/q/1010000008484965/a-1020000008485621" target="_blank" rel="noopener">MAC OSä¸­ä¿®æ”¹ç¯å¢ƒå˜é‡åˆ°åº•åº”è¯¥ä¿®æ”¹å“ªä¸ªæ–‡ä»¶</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;macä¸‹ç¯å¢ƒå˜é‡åˆ°åº•è¯¥ä¿®æ”¹å“ªä¸ªæ–‡ä»¶å‘¢ï¼Ÿï¼Ÿï¼Ÿé»‘äººé—®å·è„¸ï¼Œæ‰€ä»¥ï¼Œä¸€èµ·æ¥æ­ç©¿å®ƒç¥ç§˜çš„é¢çº±å§ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Mac" scheme="https://annecoding.github.io/categories/Mac/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Mac" scheme="https://annecoding.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>linuxå®‰è£…hpingæ·»åŠ ç¯å¢ƒå˜é‡</title>
    <link href="https://annecoding.github.io/2019/07/20/linux%E5%AE%89%E8%A3%85hping%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <id>https://annecoding.github.io/2019/07/20/linuxå®‰è£…hpingæ·»åŠ ç¯å¢ƒå˜é‡/</id>
    <published>2019-07-20T11:06:59.000Z</published>
    <updated>2019-07-24T09:03:16.493Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>å½“æˆ‘è¯•å›¾å»å®‰è£…hpingçš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸€äº›äº›é—®é¢˜ï¼Œæ˜æ˜å·²ç»å®‰è£…ï¼Œä½†æ˜¯å´ä¸èƒ½ä½¿ç”¨ï¼Œåæ¥å‘ç°æ˜¯ç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½®ä¸Šã€‚<br><a id="more"></a></p><p>åœ¨macä¸‹é€šè¿‡brewå®‰è£…hping<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install hping</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹å·²å®‰è£…åˆ—è¡¨â€¦æ‰¾åˆ°å¦‚ä¸‹ä¸€åˆ—<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew list</span><br><span class="line">.... ... .... hping ... .... ...</span><br></pre></td></tr></table></figure></p><p>ç„¶è€Œ,å½“æˆ‘è¿è¡Œhpingæ—¶â€¦<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hping</span><br><span class="line">zsh: <span class="built_in">command</span> not found: hping</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡æŸ¥çœ‹å®‰è£…ä¿¡æ¯<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ brew info hping</span><br><span class="line">hping: stable 3.20051105</span><br><span class="line">http://www.hping.org/</span><br><span class="line">/usr/<span class="built_in">local</span>/Cellar/hping/3.20051105 (9 files, 196K) *</span><br><span class="line">  Built from <span class="built_in">source</span></span><br><span class="line">From: https://github.com/Homebrew/homebrew/blob/master/Library/Formula/hping.rb</span><br></pre></td></tr></table></figure></p><p>emmmâ€¦å¾—å‡ºç»“è®ºï¼Œå®‰è£…äº†hpingå´ä¸èƒ½ä½¿ç”¨<br>å°†<code>/usr/local/sbin</code>æ·»åŠ åˆ°<code>$PATH</code>,<br>å› ä¸ºhpingäºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…åœ¨<code>/usr/local/sbin</code>ä¸­,è€Œä¸æ˜¯å®‰è£…åœ¨<code>/usr/local/bin</code>ä¸­ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/sbin</span><br></pre></td></tr></table></figure></p><p>å“¦å¯¹äº† ç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</p>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;å½“æˆ‘è¯•å›¾å»å®‰è£…hpingçš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸€äº›äº›é—®é¢˜ï¼Œæ˜æ˜å·²ç»å®‰è£…ï¼Œä½†æ˜¯å´ä¸èƒ½ä½¿ç”¨ï¼Œåæ¥å‘ç°æ˜¯ç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½®ä¸Šã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Mac" scheme="https://annecoding.github.io/categories/Mac/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="hping" scheme="https://annecoding.github.io/tags/hping/"/>
    
      <category term="Mac" scheme="https://annecoding.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>ubuntuä¿®æ”¹IPåœ°å€</title>
    <link href="https://annecoding.github.io/2019/07/20/ubuntu%E4%BF%AE%E6%94%B9IP%E5%9C%B0%E5%9D%80/"/>
    <id>https://annecoding.github.io/2019/07/20/ubuntuä¿®æ”¹IPåœ°å€/</id>
    <published>2019-07-20T10:59:03.000Z</published>
    <updated>2019-07-28T01:42:55.801Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>ubuntuä¿®æ”¹é™æ€ipåœ°å€éœ€è¦å•ç‹¬è®¾ç½®DNSï¼Œè¿™ä¸ªè¦æ³¨æ„ä¸€ä¸‹å“¦ã€‚<br><a id="more"></a></p><h3 id="ubuntuä¿®æ”¹ipåœ°å€"><a href="#ubuntuä¿®æ”¹ipåœ°å€" class="headerlink" title="ubuntuä¿®æ”¹ipåœ°å€"></a>ubuntuä¿®æ”¹ipåœ°å€</h3><h4 id="ubuntu16-04ä¿®æ”¹IPåœ°å€"><a href="#ubuntu16-04ä¿®æ”¹IPåœ°å€" class="headerlink" title="ubuntu16.04ä¿®æ”¹IPåœ°å€"></a>ubuntu16.04ä¿®æ”¹IPåœ°å€</h4><p>1ã€ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo  vi /etc/network/interfaces</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°å…¶ä¸­ä»¥ä¸‹å‡ è¡Œè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">auto ens123</span><br><span class="line">iface ens123 inet static</span><br><span class="line">        address 10.10.133.233</span><br><span class="line">        netmask 255.255.255.0</span><br><span class="line">        network 10.10.133.0</span><br><span class="line">        broadcast 10.10.133.255</span><br><span class="line">        gateway 10.10.133.254</span><br><span class="line">        <span class="comment"># dns-* options are implemented by the resolvconf package, if installed</span></span><br><span class="line">        dns-nameservers 8.8.8.8</span><br></pre></td></tr></table></figure><p>2ã€ä¿®æ”¹DNSé…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi + /etc/resolvconf/resolv.conf.d/head</span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶æœ€åæ·»åŠ ä¸€å¥è¯</span></span><br><span class="line">nameserver 8.8.8.8</span><br></pre></td></tr></table></figure><p>3ã€é‡å¯ç½‘å¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /etc/init.d/networking restart</span><br></pre></td></tr></table></figure><h4 id="ubuntu18-04ä¿®æ”¹ipåœ°å€"><a href="#ubuntu18-04ä¿®æ”¹ipåœ°å€" class="headerlink" title="ubuntu18.04ä¿®æ”¹ipåœ°å€"></a>ubuntu18.04ä¿®æ”¹ipåœ°å€</h4><p>1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/netplan/50-cloud-init.yaml</span><br><span class="line"><span class="comment"># ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">network:</span><br><span class="line">    ethernets:</span><br><span class="line">        eth0:</span><br><span class="line">            addresses:</span><br><span class="line">            - 192.168.15.72/20</span><br><span class="line">            gateway4: 192.168.12.2</span><br><span class="line">            nameservers:</span><br><span class="line">                addresses:</span><br><span class="line">                - 223.5.5.5</span><br><span class="line">                search: []</span><br><span class="line">            optional: <span class="literal">true</span></span><br><span class="line">    version: 2</span><br></pre></td></tr></table></figure><p>2ã€ä½¿é…ç½®ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netplan apply</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;ubuntuä¿®æ”¹é™æ€ipåœ°å€éœ€è¦å•ç‹¬è®¾ç½®DNSï¼Œè¿™ä¸ªè¦æ³¨æ„ä¸€ä¸‹å“¦ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Ubuntu" scheme="https://annecoding.github.io/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°</title>
    <link href="https://annecoding.github.io/2019/07/20/linux%E7%B3%BB%E7%BB%9F%E6%89%AB%E6%8F%8F%E5%91%BD%E4%BB%A4%E5%92%8C%E5%AE%89%E5%85%A8%E9%98%B2%E8%8C%83%E7%AC%94%E8%AE%B0/"/>
    <id>https://annecoding.github.io/2019/07/20/linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°/</id>
    <published>2019-07-20T09:21:31.000Z</published>
    <updated>2019-07-28T01:40:42.649Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„ç½‘ç»œæ‰«æå·¥å…·ä»¥åŠå®‰å…¨é˜²èŒƒï¼Œäº†è§£æ›´å¤šå‘½ä»¤çš„ä½¿ç”¨ã€‚<br><a id="more"></a></p><h3 id="linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°"><a href="#linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°" class="headerlink" title="linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°"></a><strong>linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°</strong></h3><p>é€šè¿‡ç½‘ç»œå…¥ä¾µæ¥çªƒå–æ•æ„Ÿä¿¡æ¯</p><p>é€šè¿‡ç½‘ç»œæ‰«æè·å–è¿è¥å•†æ ¸å¿ƒè®¾å¤‡çš„ç®¡ç†æƒé™</p><h3 id="ç½‘ç»œå…¥ä¾µæ–¹å¼"><a href="#ç½‘ç»œå…¥ä¾µæ–¹å¼" class="headerlink" title="ç½‘ç»œå…¥ä¾µæ–¹å¼"></a><strong>ç½‘ç»œå…¥ä¾µæ–¹å¼</strong></h3><p>è¸©ç‚¹-ç½‘ç»œæ‰«æ-å·®ç‚¹-ææƒ</p><p><strong>å¸¸ç”¨å‘½ä»¤</strong></p><p>tracert/tracerouteã€nampã€nc</p><h3 id="ä¸»æœºæ‰«æå‘½ä»¤fping"><a href="#ä¸»æœºæ‰«æå‘½ä»¤fping" class="headerlink" title="ä¸»æœºæ‰«æå‘½ä»¤fping"></a><strong>ä¸»æœºæ‰«æå‘½ä»¤fping</strong></h3><p>æ‰¹é‡çš„ç»™ç›®æ ‡ä¸»æœºå‘é€pingè¯·æ±‚ï¼Œæµ‹è¯•ä¸»æœºçš„å­˜æ´»æƒ…å†µã€‚</p><p>ç‰¹ç‚¹ï¼šå¹¶è¡Œå‘é€ï¼Œç»“æœæ˜“è¯»</p><p><strong>æºç åŒ…ç¼–è¯‘è¿‡ç¨‹</strong></p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g54yozizhcj30yg0lign8.jpg" alt="image-20190719105646797"></p><p>fpingç¼–è¯‘å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># wget https://fping.org/dist/fping-4.2.tar.gz</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tar -xvf fping-4.2.tar.gz </span></span><br><span class="line">[root@localhost fping-4.2]<span class="comment"># ./configure &amp; make &amp; make install</span></span><br><span class="line">[root@localhost fping-4.2]<span class="comment"># fping -h  #æŸ¥çœ‹å¸®åŠ©å‘½ä»¤</span></span><br><span class="line">[root@localhost fping-4.2]<span class="comment"># fping -v</span></span><br><span class="line">fping: Version 4.2</span><br><span class="line">fping: comments to david@schweikert.ch</span><br></pre></td></tr></table></figure><h4 id="fpingå‚æ•°ä»‹ç»"><a href="#fpingå‚æ•°ä»‹ç»" class="headerlink" title="fpingå‚æ•°ä»‹ç»"></a><strong>fpingå‚æ•°ä»‹ç»</strong></h4><p>å‘½ä»¤å‚æ•°manã€-hæ–¹å¼</p><p>å¸¸ç”¨å‚æ•°ï¼š</p><p>-a åªæ˜¾ç¤ºå‡ºå­˜æ´»çš„ä¸»æœº(ç›¸åå‚æ•°-u)</p><p>-l å¾ªç¯ping</p><p>1ã€é€šè¿‡æ ‡å‡†è¾“å…¥æ–¹å¼fping+IP1+IP2</p><p>-g æ”¯æŒä¸»æœºæ®µçš„æ–¹å¼ 192.168.1.1 192.168.1.255 192.168.1.0/24</p><p>2ã€é€šè¿‡è¯»å–ä¸€ä¸ªæ–‡ä»¶ä¸­çš„IPå†…å®¹</p><p>æ–¹å¼ï¼šfping -f filename</p><p>3ã€fpingä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾å­˜è´§çš„ä¸»æœº</span></span><br><span class="line">fping -a 10.10.163.233</span><br><span class="line"><span class="comment"># å¯ä»¥æŸ¥æ‰¾æŸä¸ªç½‘æ®µå†…å­˜æ´»çš„ä¸»æœº</span></span><br><span class="line">fping  -g -a 10.10.163.1 10.10.163.254</span><br><span class="line"><span class="comment"># æŸ¥æ‰¾æŸä¸ªç½‘æ®µå†…å­˜æ´»ä¸»æœºç¬¬äºŒç§å†™æ³•</span></span><br><span class="line">fping -a -g 10.10.163.233/24</span><br></pre></td></tr></table></figure><h3 id="ä¸»æœºæ‰«æå‘½ä»¤hping"><a href="#ä¸»æœºæ‰«æå‘½ä»¤hping" class="headerlink" title="ä¸»æœºæ‰«æå‘½ä»¤hping"></a><strong>ä¸»æœºæ‰«æå‘½ä»¤hping</strong></h3><p>æ”¯æŒä½¿ç”¨tcp/ipæ•°æ®åŒ…ç»„è£…ã€åˆ†æå·¥å…·</p><p>linuxä¸‹ç¼–è¯‘å®‰è£…</p><p>å¦‚æœé‡åˆ°å¦‚ä¸‹é”™è¯¯</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g556megt3vj30oi04et9c.jpg" alt="image-20190719153110732"></p><p>å¯é€šè¿‡å®‰è£…ä¸‹é¢åº“è§£å†³</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g556sceynmj30ji09274q.jpg" alt="image-20190719153652881"></p><p><a href="http://rpmfind.net/" target="_blank" rel="noopener">http://rpmfind.net/</a></p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g556pk21f9j30xy082do7.jpg" alt="image-20190719153414670"></p><h4 id="hpingå¸¸ç”¨å‚æ•°"><a href="#hpingå¸¸ç”¨å‚æ•°" class="headerlink" title="hpingå¸¸ç”¨å‚æ•°"></a><strong>hpingå¸¸ç”¨å‚æ•°</strong></h4><p>1ã€å¯¹ç‰¹å®šçš„ç›®æ ‡å‘èµ·tcpæ¢æµ‹ï¼ˆè§„é¿è¿è¥å•†é˜²ç«å¢™ã€ä¸»æœºç­‰å¯¹icmpåŒ…å±è”½ï¼‰</p><p>-p ç«¯å£tcp</p><p>-S è®¾ç½®TCPæ¨¡å¼SYNåŒ…</p><p>2ã€ä¼ªé€ æ¥æºIPï¼Œæ¨¡æ‹ŸDdosæ”»å‡»</p><p>-a ä¼ªé€ IPåœ°å€</p><p>3ã€hpingä½¿ç”¨ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo hping -p 22 -S 10.10.163.233</span><br><span class="line"></span><br><span class="line">sudo hping -p 22 -S 10.10.163.233 -a 10.10.163.235</span><br></pre></td></tr></table></figure><p> centosæ‹’ç»æ‰icmpåŒ…è®¾ç½®</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g56489gypsj30kg01mwei.jpg" alt="image-20190720105353473"></p><h3 id="è·¯ç”±æ‰«æ"><a href="#è·¯ç”±æ‰«æ" class="headerlink" title="è·¯ç”±æ‰«æ"></a><strong>è·¯ç”±æ‰«æ</strong></h3><p>ä½œç”¨ï¼šæŸ¥è¯¢ä¸€ä¸ªä¸»æœºç»è¿‡çš„è·¯ç”±çš„è·³æ•°ã€åŠæ•°æ®å»¶è¿Ÿæƒ…å†µ</p><p>å¸¸ç”¨å·¥å…·ï¼štracerouteã€mtr</p><p>mtrç‰¹ç‚¹ï¼šèƒ½æµ‹å‡ºä¸»æœºåˆ°æ¯ä¸€ä¸ªè·¯ç”±é—´çš„è”é€šæ€§ã€‚</p><p>tracerouteè¿æ¥åŸç†ã€‚</p><p>linuxä¸‹å‘é€udpåŒ…ï¼ˆ&gt;30000ç«¯å£ï¼‰ï¼Œwindowså‘é€icmpåŒ…ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g564xl90vhj30pk0i23zb.jpg" alt="image-20190720111813791"></p><p>TTLï¼Œç”Ÿå­˜æ—¶é—´çš„å€¼ã€‚å‘ç»™ç¬¬ä¸€è·³ï¼Œttl-1=0ï¼Œè¿”å›udpæ•°æ®åŒ…ã€‚</p><p>æ‰«æåˆ°å‡ ä¸ªè·¯ç”±å™¨ï¼Œå‘é€å‡ ä¸ªttlæ•°æ®åŒ…ã€‚</p><h4 id="tracerouteå‚æ•°çš„ä½¿ç”¨"><a href="#tracerouteå‚æ•°çš„ä½¿ç”¨" class="headerlink" title="tracerouteå‚æ•°çš„ä½¿ç”¨"></a><strong>tracerouteå‚æ•°çš„ä½¿ç”¨</strong></h4><p> linuxä¸€èˆ¬é»˜è®¤æœ‰ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…æ–¹å¼</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5657hwwdpj30mi03gjru.jpg" alt="image-20190720112746947"></p><p>1ã€é»˜è®¤ä½¿ç”¨çš„æ˜¯udpåè®®(30000ä»¥ä¸Šçš„ç«¯å£)</p><p>2ã€æ”¯æŒä½¿ç”¨TCPåè®® -T(å‘é€tcpåè®®) -p(åŸºäºtcpä»€ä¹ˆç«¯å£)</p><p>3ã€ä½¿ç”¨ICMPåè®®ä»‹ç» -I </p><p>4ã€tracerouteä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.baidu.com</span><br><span class="line"><span class="comment"># -n å»æ‰è§£æ</span></span><br><span class="line">traceroute -n www.baidu.com </span><br><span class="line"><span class="comment"># ä½¿ç”¨icmpï¼Œwindowé»˜è®¤ä½¿ç”¨</span></span><br><span class="line">traceroute -In  www.imooc.com</span><br><span class="line"><span class="comment"># ä½¿ç”¨tcpæ‰èƒ½æ£€æµ‹åˆ°æœ€ç»ˆè·³æ•°(ä¸€èˆ¬ä¼šå±è”½icmpåè®®)</span></span><br><span class="line">traceroute -T -p 80 -n www.imooc.com</span><br></pre></td></tr></table></figure><h4 id="mträ½¿ç”¨"><a href="#mträ½¿ç”¨" class="headerlink" title="mträ½¿ç”¨"></a>mträ½¿ç”¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">yum install mtr -y</span><br><span class="line"><span class="comment"># ä½¿ç”¨ï¼ŒåŸç†å’Œtracerouteä¸€æ ·ï¼Œå¯ä»¥çœ‹åˆ°åˆ°å“ªä¸€è·³ä¸¢åŒ…ç‡æ›´ä¸ºä¸¥é‡</span></span><br><span class="line">mtr www.baidu.com</span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡ä¸»æœºæ‰«æ"><a href="#æ‰¹é‡ä¸»æœºæ‰«æ" class="headerlink" title="æ‰¹é‡ä¸»æœºæ‰«æ"></a><strong>æ‰¹é‡ä¸»æœºæ‰«æ</strong></h3><p>ç›®çš„ï¼š</p><p>1ã€æ‰¹é‡ä¸»æœºå­˜æ´»æ‰«æ</p><p>2ã€é’ˆå¯¹ä¸»æœºæœåŠ¡æ‰«æ</p><p>ä½œç”¨ï¼š</p><p>1ã€èƒ½å¿«æ·çš„è·å–ä¸»æœºçš„å­˜æ´»çŠ¶æ€</p><p>2ã€èƒ½æ›´åŠ ç»†è‡´ã€åªèƒ½è·å–ä¸»æœºæœåŠ¡ä¾¦æŸ¥æƒ…å†µ</p><p><strong>å…¸å‹å‘½ä»¤</strong></p><p>1ã€nmap åŸºäºç«¯å£æ‰«æï¼Œç‰¹åˆ«å¼ºå¤§</p><p>2ã€ncat ç‘å£«å†›åˆ€</p><h4 id="nmapä½¿ç”¨"><a href="#nmapä½¿ç”¨" class="headerlink" title="nmapä½¿ç”¨"></a><strong>nmapä½¿ç”¨</strong></h4><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g56dmqgtktj30v60f8dhb.jpg" alt="image-20190720161913675"></p><p>tcpåŠå¼€æ”¾ï¼Œä¸å»ºç«‹å®Œæ•´çš„tcpï¼Œæœªå»ºç«‹å®Œæ•´çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚</p><p>1ã€ä¸»æœºå­˜æ´»æ‰«æ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰«æä¸»æœºå­˜æ´»çŠ¶æ€,sæ£€æµ‹ç”¨ä»€ä¹ˆåè®®åšä¾¦æµ‹</span></span><br><span class="line">namp -sP 10.10.140.0/24</span><br></pre></td></tr></table></figure><p>2ã€ä¸»æœºç«¯å£å¼€æ”¾æ‰«æï¼Œé»˜è®¤æ‰«æèŒƒå›´1-1024ï¼Œä»¥åŠä¸€äº›å¸¸ç”¨çš„æœåŠ¡ç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namp -sS 10.10.10.163.233</span><br></pre></td></tr></table></figure><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g56dzj5o2kj30mq0ae400.jpg" alt="image-20190720163117782"></p><p>3ã€åŠå¼€æ”¾æŒ‡å®šç«¯å£æ‰«æ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namp -sS -p 0-30000 10.10.163.233</span><br></pre></td></tr></table></figure><p><img src="http://ww4.sinaimg.cn/large/006tNc79ly1g56e6peru2j30nw0a0t9w.jpg" alt="image-20190720163823202"></p><p>4ã€å…¨å¼€æ”¾è¿æ¥å‚æ•°ï¼Œå»ºç«‹ä¸€æ¬¡å…¨æ¡æ‰‹ï¼Œæ—¶é—´é•¿</p><p>å»ºç«‹å…¨æ¡æ‰‹ï¼Œå¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·çš„çœŸå®æ“ä½œè¯·æ±‚ï¼Œéœ€è¦æœåŠ¡ç«¯èƒ½æ£€æµ‹åˆ°ç›¸å…³çš„æ—¥å¿—ï¼Œæ‰“å°å‡ºç›¸å…³è®°å½•ä¿¡æ¯ã€‚</p><p>å»ºè®®æ—¥å¸¸ä½¿ç”¨åŠæ‰«ææ¨¡å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -p 0-30000 10.10.163.233</span><br></pre></td></tr></table></figure><p> 5ã€udpåè®®æ‰«ææ–¹å¼</p><p>æ‰«æudpï¼Œå“åº”æ¯”è¾ƒæ…¢ã€å¯èƒ½ç‰¹åˆ«æ…¢ã€‚ä¼šé™åˆ¶icmpä¸å¯è¾¾è¿”å›çš„æ¬¡æ•°ã€‚ä¸å»ºè®®ä½¿ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sU 10.10.163.233</span><br></pre></td></tr></table></figure><h4 id="ncatä½¿ç”¨"><a href="#ncatä½¿ç”¨" class="headerlink" title="ncatä½¿ç”¨"></a><strong>ncatä½¿ç”¨</strong></h4><p>æŸ¥çœ‹æŸä¸ªè·¯ç”±å¼€æ”¾å“ªäº›ç«¯å£80 23</p><p>é€šè¿‡shelläº¤äº’æ›´æ”¹æ•°æ® ï¼Œå¯è¿›è¡Œä»»æ„æ“ä½œ</p><p>nc -lvp 2005 ç›‘å¬ç«¯å£</p><p><strong>ncå¥½å¤„</strong></p><p>1ã€ä¸ä¼šé¢‘ç¹é€šè¿‡ç•Œé¢ç™»å½•ç•™ä¸‹ç—•è¿¹</p><p>2ã€ç™»å½•éå¸¸æ–¹ä¾¿</p><p>3ã€ä¸ä¼šè¢«ä¾¦æµ‹è®¾å¤‡ä¾¦æµ‹åˆ°</p><p>-w è®¾ç½®çš„è¶…å¸‚æ—¶é—´</p><p>-z ä¸€ä¸ªè¾“å…¥è¾“å‡ºæ¨¡å¼</p><p>-v æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹</p><p>1ã€åŸºäºtcpåè®®(é»˜è®¤)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹22ç«¯å£å¼€æ”¾æƒ…å†µ</span></span><br><span class="line">nc -zv 10.10.163.233 22</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€äº›ç«¯å£å¼€æ”¾ è¶…æ—¶2s</span></span><br><span class="line">nc -zv -w2 10.10.163.233 1-50</span><br></pre></td></tr></table></figure><p>2ã€åŸºäºudpåè®® -u  </p><p>å›åº”æ—¶é—´é•¿ï¼Œä¸å»ºè®®ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€äº›ç«¯å£å¼€æ”¾ è¶…æ—¶2s</span></span><br><span class="line">nc -zv -u -w2 10.10.163.233 1-50</span><br></pre></td></tr></table></figure><h3 id="é¢„é˜²ç­–ç•¥"><a href="#é¢„é˜²ç­–ç•¥" class="headerlink" title="é¢„é˜²ç­–ç•¥"></a><strong>é¢„é˜²ç­–ç•¥</strong></h3><p>åœ¨linuxè¿›è¡Œé˜²å¾¡ã€‚</p><p>å¸¸è§æ”»å‡»æ–¹æ³•ï¼š</p><p>1ã€SYNæ”»å‡»</p><p>2ã€DDoSæ”»å‡»</p><p>3ã€æ¶æ„æ‰«æ</p><p>ä»€ä¹ˆæ˜¯SYNæ”»å‡»ï¼Ÿ</p><p>åˆ©ç”¨TCPåè®®ç¼ºé™·è¿›è¡Œï¼Œå¯¼è‡´ç³»ç»ŸæœåŠ¡åœæ­¢å“åº”ï¼Œç½‘ç»œå¸¦å®½è·‘æ»¡æˆ–è€…å“åº”ç¼“æ…¢ã€‚</p><p>ä»€ä¹ˆæ˜¯DDoSæ”»å‡»ï¼Ÿ</p><p>åˆ†å¸ƒå¼æ‹’ç»è®¿é—®æœåŠ¡æ”»å‡»ã€‚</p><p>æ­£å¸¸æœåŠ¡åœ¨åŒä¸€æ—¶é—´æ¥åˆ°äº†å¾ˆå¤šä¸ªç±»ä¼¼äºæ­£å¸¸æœåŠ¡çš„è¯·æ±‚ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å®Œå…¨æ­£å¸¸çš„è¯·æ±‚ï¼Œå¯¼è‡´æœåŠ¡å“åº”ä¸è¿‡æ¥ã€‚</p><p>SYNæ”»å‡»ä¸€èˆ¬ä¼šä¼´éšç€DDoSæ”»å‡»è¿›è¡Œ</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g56eutfdydj30qq0ikgmc.jpg" alt="image-20190720170129641"></p><p>SYNæ”»å‡»åŸç†ï¼Œegå¯ä»¥åˆ©ç”¨hpingä¼ªé€ æºipï¼Œå‘é€ç»™å‡çš„ä¸»æœºï¼Œå¾—ä¸åˆ°ç¬¬ä¸‰æ¬¡è¯·æ±‚ã€‚ç›®æ ‡æœºå™¨ä¸æ–­å‘é€é‡è¯•ï¼Œä¸åœå›åº”åŒ…ï¼Œå°±ä¼šå¯¼è‡´ç½‘ç»œå¸¦å®½å æ»¡ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g56f1z4xe1j30og0iuq3m.jpg" alt="image-20190720170357218"></p><ul><li><p>å‡å°‘é‡è¯•æ¬¡æ•°</p></li><li><p>å¯ä»¥å¢åŠ backlog</p></li><li><p>ç¦æ­¢ä¸‰æ¬¡æ¡æ‰‹ï¼ŒSYN cookiesæŠ€æœ¯</p></li></ul><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g56f1r9lamj30m40c40x8.jpg" alt="image-20190720170816652"></p><p>linuxä¸‹å…¶ä»–é¢„é˜²ç­–ç•¥</p><p>1ã€é˜²ç«å¢™ä¸Šé¢åšç›¸å…³è®¾ç½®</p><p>2ã€linuxä¸‹é¢å¯ä»¥å…³é—­icmpåè®®è¯·æ±‚</p><p>3ã€é€šè¿‡iptablesé˜²æ­¢æ‰«æ</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g56f53ibkej30xc0bqmyd.jpg" alt="image-20190720171122849"></p><blockquote><p>å­¦ä¹ ç¬”è®°æ•´ç†è‡ªæ…•è¯¾ç½‘ä»¥ä¸‹è¯¾ç¨‹:<br>linuxç³»ç»Ÿæ‰«æå‘½ä»¤å’Œå®‰å…¨é˜²èŒƒç¬”è®°</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„ç½‘ç»œæ‰«æå·¥å…·ä»¥åŠå®‰å…¨é˜²èŒƒï¼Œäº†è§£æ›´å¤šå‘½ä»¤çš„ä½¿ç”¨ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="hping" scheme="https://annecoding.github.io/tags/hping/"/>
    
      <category term="traceroute" scheme="https://annecoding.github.io/tags/traceroute/"/>
    
      <category term="Nmap" scheme="https://annecoding.github.io/tags/Nmap/"/>
    
      <category term="Ncap" scheme="https://annecoding.github.io/tags/Ncap/"/>
    
      <category term="fping" scheme="https://annecoding.github.io/tags/fping/"/>
    
  </entry>
  
  <entry>
    <title>linuxä¸‹å ç”¨cpuå’Œå†…å­˜top10</title>
    <link href="https://annecoding.github.io/2019/06/15/linux%E4%B8%8B%E5%8D%A0%E7%94%A8cpu%E5%92%8C%E5%86%85%E5%AD%98%E5%BE%88%E9%AB%98%E7%9A%84%E8%BF%9B%E7%A8%8B/"/>
    <id>https://annecoding.github.io/2019/06/15/linuxä¸‹å ç”¨cpuå’Œå†…å­˜å¾ˆé«˜çš„è¿›ç¨‹/</id>
    <published>2019-06-15T06:00:21.000Z</published>
    <updated>2019-09-01T04:58:41.496Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p>æœåŠ¡å™¨è®¿é—®å˜æ…¢ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆè¿›ç¨‹å¯¼è‡´æœåŠ¡å™¨èµ„æºå˜æ…¢å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ ¹æ®cpuã€å†…å­˜ç­‰æŸ¥çœ‹å ç”¨èµ„æºè¾ƒé«˜çš„è¿›ç¨‹ã€‚</p><a id="more"></a><p>å¯ä»¥é€šè¿‡pså‘½ä»¤çš„ç›¸å…³æ“ä½œæ¥æŸ¥çœ‹ã€‚è¿™é‡Œåˆ†åˆ«æ‰¾å‡ºæœ€é«˜å ç”¨cpuå’Œå†…å­˜çš„10ä¸ªè¿›ç¨‹ï¼Œå®ç°è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ cat cpu_memory_top.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å ç”¨cpuã€å†…å­˜è¿‡é«˜çš„è¿›ç¨‹</span></span><br><span class="line"><span class="comment"># å ç”¨cpuå†…å­˜è¿‡é«˜çš„å‰åä¸ªè¿›ç¨‹</span></span><br><span class="line"><span class="comment"># -e æ˜¾ç¤ºæ‰€æœ‰ç¨‹åº -o ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ ¼å¼ --sortæ’åº</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------    cpu top10   ---------"</span></span><br><span class="line">ps -eo user,pid,pcpu,pmem,args --sort=-pcpu |head -n 10</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"--------  memory top10  ---------"</span></span><br><span class="line">ps -eo user,pid,pcpu,pmem,args --sort=-pmem |head -n 10</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ ./cpu_memory_top.sh   </span><br><span class="line">--------    cpu top10   ---------</span><br><span class="line">USER       PID %CPU %MEM COMMAND</span><br><span class="line">root      1066  0.3  0.6 /usr/<span class="built_in">local</span>/aegis/aegis_client/aegis_10_69/AliYunDun</span><br><span class="line">root         1  0.0  0.1 /usr/lib/systemd/systemd --switched-root --system --deserialize 21</span><br><span class="line">root         2  0.0  0.0 [kthreadd]</span><br><span class="line">root         3  0.0  0.0 [ksoftirqd/0]</span><br><span class="line">root         5  0.0  0.0 [kworker/0:0H]</span><br><span class="line">root         7  0.0  0.0 [migration/0]</span><br><span class="line">root         8  0.0  0.0 [rcu_bh]</span><br><span class="line">root         9  0.0  0.0 [rcu_sched]</span><br><span class="line">root        10  0.0  0.0 [watchdog/0]</span><br><span class="line">--------  memory top10  ---------</span><br><span class="line">USER       PID %CPU %MEM COMMAND</span><br><span class="line">root       683  0.0  1.8 /sbin/dhclient -H localhost -1 -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid eth0</span><br><span class="line">root       328  0.0  1.5 /usr/lib/systemd/systemd-journald</span><br><span class="line">root       765  0.0  0.8 /usr/bin/python -Es /usr/sbin/tuned -l -P</span><br><span class="line">polkitd    458  0.0  0.6 /usr/lib/polkit-1/polkitd --no-debug</span><br><span class="line">root      1066  0.3  0.6 /usr/<span class="built_in">local</span>/aegis/aegis_client/aegis_10_69/AliYunDun</span><br><span class="line">root       767  0.0  0.4 /usr/sbin/rsyslogd -n</span><br><span class="line">root     11661  0.0  0.3 sshd: root@notty</span><br><span class="line">root     11752  0.0  0.2 sshd: root@pts/0</span><br><span class="line">root      2166  0.0  0.2 /usr/sbin/aliyun-service</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;æœåŠ¡å™¨è®¿é—®å˜æ…¢ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆè¿›ç¨‹å¯¼è‡´æœåŠ¡å™¨èµ„æºå˜æ…¢å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ ¹æ®cpuã€å†…å­˜ç­‰æŸ¥çœ‹å ç”¨èµ„æºè¾ƒé«˜çš„è¿›ç¨‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>linuxä¸­ç©è½¬sedæŠ€å·§åˆ†äº«</title>
    <link href="https://annecoding.github.io/2019/06/11/linux%E4%B8%AD%E7%8E%A9%E8%BD%ACsed/"/>
    <id>https://annecoding.github.io/2019/06/11/linuxä¸­ç©è½¬sed/</id>
    <published>2019-06-11T10:51:19.000Z</published>
    <updated>2019-09-01T11:39:38.161Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p><code>sed</code>å‘½ä»¤åº”ç”¨å¹¿æ³›ï¼Œä½¿ç”¨ç®€å•ï¼Œæ˜¯å¿«é€Ÿæ–‡æœ¬å¤„ç†çš„åˆ©å™¨ã€‚å®ƒå…¶å®æ²¡å¤šå°‘æŠ€å·§ï¼ŒèƒŒè¯µã€ä½¿ç”¨æ˜¯æœ€åˆé€‚çš„å­¦ä¹ æ¸ é“ï¼Œå±äºç¡¬æŠ€èƒ½ã€‚ä½†å®ƒåˆå¾ˆå¤æ‚ï¼Œå› ä¸ºé«˜çº§åŠŸèƒ½å¤ªå¤šã€‚æœ¬ç¯‡ä¸å»å…³æ³¨sedçš„é«˜çº§åŠŸèƒ½ï¼Œä»…å¯¹å¸¸ç”¨çš„ä¸€äº›æ“ä½œï¼Œè¿›è¡Œè¯´æ˜ã€‚<br><a id="more"></a></p><h3 id="sedä½¿ç”¨"><a href="#sedä½¿ç”¨" class="headerlink" title="sedä½¿ç”¨"></a>sedä½¿ç”¨</h3><p>sedç¼–è¾‘å™¨è¢«ç§°ä½œæµç¼–è¾‘å™¨ï¼Œå®ƒå’Œvimè¿™ç§çš„äº¤äº’å¼æ–‡æœ¬ç¼–è¾‘å™¨ä¸åŒï¼Œæ˜¯æ ¹æ®å‘½ä»¤æ¥å¤„ç†æ•°æ®æµä¸­çš„æ•°æ®ã€‚ä¼šæ‰§è¡Œä¸‹åˆ—æ“ä½œï¼š</p><ul><li>ä¸€æ¬¡ä»è¾“å…¥ä¸­è¯»å–ä¸€è¡Œæ•°æ®ï¼ˆé‡å¤è¯¥æ“ä½œç›´åˆ°å…¨éƒ¨è¡Œè¢«è¯»å–å®Œï¼‰</li><li>æ ¹æ®ç¼–è¾‘å™¨å‘½ä»¤åŒ¹é…æ•°æ®</li><li>æŒ‰ç…§å‘½ä»¤ä¿®æ”¹æ•°æ®æµä¸­çš„æ•°æ®</li><li>å°†æ–°æ•°æ®è¾“å‡ºåˆ°STDOUT(æ ‡å‡†è¾“å‡º)</li></ul><p>å…¶ä¸­sedå‘½ä»¤çš„å¯ä»¥ä»å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªå‘½ä»¤æ–‡ä»¶ä¸­è¯»å–ã€‚</p><p><strong>sed</strong>å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨æ ¼å¼</span></span><br><span class="line">$ sed options script file</span><br><span class="line"><span class="comment"># æ·»åŠ scriptä¸­æŒ‡å®šçš„å‘½ä»¤</span></span><br><span class="line">$ sed -e script </span><br><span class="line"><span class="comment"># æ·»åŠ fileä¸­æŒ‡å®šçš„å‘½ä»¤</span></span><br><span class="line">$ sed -f file </span><br><span class="line"><span class="comment"># ä¸äº§ç”Ÿå‘½ä»¤è¾“å‡ºï¼Œä½¿ç”¨printå‘½ä»¤æ¥å®Œæˆè¾“å‡º</span></span><br><span class="line"><span class="comment"># -n è¿™ä¸ªå‚æ•°æ˜¯--quietæˆ–è€…--silentçš„æ„æ€ã€‚è¡¨æ˜å¿½ç•¥æ‰§è¡Œè¿‡ç¨‹çš„è¾“å‡ºï¼Œåªè¾“å‡ºæˆ‘ä»¬çš„ç»“æœå³å¯ã€‚</span></span><br><span class="line">$ sed -n</span><br></pre></td></tr></table></figure><h3 id="æ›¿æ¢å‘½ä»¤s"><a href="#æ›¿æ¢å‘½ä»¤s" class="headerlink" title="æ›¿æ¢å‘½ä»¤s"></a>æ›¿æ¢å‘½ä»¤s</h3><p><code>s</code>å‘½ä»¤ä¼šç”¨æ–œçº¿é—´æŒ‡å®šçš„<strong>ç¬¬äºŒä¸ª</strong>æ–‡æœ¬å­—ç¬¦ä¸²æ¥<strong>æ›¿æ¢ç¬¬ä¸€ä¸ª</strong>æ–‡æœ¬å­—ç¬¦ä¸²æ¨¡å¼ã€‚</p><p>1.ç”¨big testæ›¿æ¢äº†testã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"This is a test"</span> | sed <span class="string">'s/test/big test/'</span></span><br><span class="line">This is a big <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>2.ç”¨<strong>cat</strong>æ›¿æ¢æ•´ä¸ªæ–‡ä»¶ä¸­çš„<strong>dog</strong></p><p>ç¤ºä¾‹æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨sedå‘½ä»¤è¿›è¡Œæ›¿æ¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'s/dog/cat/'</span> data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy cat.</span><br><span class="line">The quick brown fox jumps over the lazy cat.</span><br><span class="line">The quick brown fox jumps over the lazy cat.</span><br><span class="line">The quick brown fox jumps over the lazy cat.</span><br></pre></td></tr></table></figure><p>ğŸŒŸ é‡è¦çš„æ˜¯ï¼Œè¦è®°ä½ï¼Œ<strong>sedç¼–è¾‘å™¨å¹¶ä¸ä¼šä¿®æ”¹æ–‡æœ¬æ–‡ä»¶çš„æ•°æ®</strong>ã€‚å®ƒåªä¼šå°†ä¿®æ”¹åçš„æ•°æ®å‘é€åˆ°STDOUTã€‚<strong>å¦‚æœä½ æŸ¥çœ‹åŸæ¥çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒä»ç„¶ä¿ç•™ç€åŸå§‹æ•°æ®ã€‚</strong></p><p>3.åœ¨å‘½ä»¤è¡Œä½¿ç”¨å¤šä¸ªç¼–è¾‘å™¨å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed -e <span class="string">'s/brown/green/; s/dog/cat/'</span> data1.txt</span><br><span class="line">The quick green fox jumps over the lazy cat.</span><br><span class="line">The quick green fox jumps over the lazy cat.</span><br><span class="line">The quick green fox jumps over the lazy cat.</span><br><span class="line">The quick green fox jumps over the lazy cat.</span><br></pre></td></tr></table></figure><p>4.ä»æ–‡ä»¶ä¸­è¯»å–ç¼–è¾‘å™¨å‘½ä»¤</p><p>å¦‚æœæœ‰å¤§é‡è¦å¤„ç†çš„sedå‘½ä»¤ï¼Œé‚£ä¹ˆå°†å®ƒä»¬æ”¾è¿›ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­é€šå¸¸ä¼šæ›´æ–¹ä¾¿ä¸€äº›ã€‚<br>å¯ä»¥åœ¨sedå‘½ä»¤ä¸­ç”¨<code>-f</code>é€‰é¡¹æ¥æŒ‡å®šæ–‡ä»¶ã€‚</p><p>ç¤ºä¾‹sedç¼–è¾‘å™¨è„šæœ¬æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat script1.sed</span><br><span class="line">s/brown/green/</span><br><span class="line">s/fox/elephant/</span><br><span class="line">s/dog/cat/</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œsedç¼–è¾‘å™¨è„šæœ¬æ–‡ä»¶ï¼ŒæŒ‰ç…§è„šæœ¬æ–‡ä»¶æ›¿æ¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed -f script1.sed data1.txt</span><br><span class="line">The quick green elephant jumps over the lazy cat.</span><br><span class="line">The quick green elephant jumps over the lazy cat.</span><br><span class="line">The quick green elephant jumps over the lazy cat.</span><br><span class="line">The quick green elephant jumps over the lazy cat.</span><br></pre></td></tr></table></figure><h3 id="æ›´å¤šæ›¿æ¢é€‰é¡¹"><a href="#æ›´å¤šæ›¿æ¢é€‰é¡¹" class="headerlink" title="æ›´å¤šæ›¿æ¢é€‰é¡¹"></a>æ›´å¤šæ›¿æ¢é€‰é¡¹</h3><h4 id="æ›¿æ¢æ ‡è®°"><a href="#æ›¿æ¢æ ‡è®°" class="headerlink" title="æ›¿æ¢æ ‡è®°"></a>æ›¿æ¢æ ‡è®°</h4><p>æ›¿æ¢å‘½ä»¤åœ¨æ›¿æ¢å¤šè¡Œä¸­çš„æ–‡æœ¬æ—¶èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†é»˜è®¤æƒ…å†µä¸‹å®ƒåªæ›¿æ¢æ¯è¡Œä¸­å‡ºç°çš„ç¬¬ä¸€å¤„ã€‚è¦è®©æ›¿æ¢å‘½ä»¤èƒ½å¤Ÿæ›¿æ¢ä¸€è¡Œä¸­ä¸åŒåœ°æ–¹å‡ºç°çš„æ–‡æœ¬å¿…é¡»ä½¿ç”¨æ›¿æ¢æ ‡è®°ï¼ˆsubstitution flagï¼‰ã€‚</p><p>æ›¿æ¢æ ‡è®°ä¼šåœ¨æ›¿æ¢å‘½ä»¤å­—ç¬¦ä¸²ä¹‹åè®¾ç½®ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s/pattern/replacement/flags</span><br></pre></td></tr></table></figure><p>æœ‰4ç§å¯ç”¨çš„æ›¿æ¢æ ‡è®°ï¼š</p><ul><li>æ•°å­—ï¼Œè¡¨æ˜æ–°æ–‡æœ¬å°†æ›¿æ¢ç¬¬å‡ å¤„æ¨¡å¼åŒ¹é…çš„åœ°æ–¹ï¼›</li><li>gï¼Œè¡¨æ˜æ–°æ–‡æœ¬å°†ä¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…çš„æ–‡æœ¬ï¼›</li><li>pï¼Œè¡¨æ˜åŸå…ˆè¡Œçš„å†…å®¹è¦æ‰“å°å‡ºæ¥ï¼›</li><li>w fileï¼Œå°†æ›¿æ¢çš„ç»“æœå†™åˆ°æ–‡ä»¶ä¸­ã€‚</li></ul><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sedç¼–è¾‘å™¨åªæ›¿æ¢æ¯è¡Œä¸­ç¬¬äºŒæ¬¡å‡ºç°çš„åŒ¹é…æ¨¡å¼</span></span><br><span class="line">$ sed <span class="string">'s/test/trial/2'</span> data4.txt</span><br><span class="line">This is a <span class="built_in">test</span> of the trial script.</span><br><span class="line">This is the second <span class="built_in">test</span> of the trial script. </span><br><span class="line"><span class="comment"># gæ›¿æ¢æ ‡è®°ä½¿ä½ èƒ½æ›¿æ¢æ–‡æœ¬ä¸­åŒ¹é…æ¨¡å¼æ‰€åŒ¹é…çš„æ¯å¤„åœ°æ–¹</span></span><br><span class="line">$ sed <span class="string">'s/test/trial/g'</span> data4.txt</span><br><span class="line">This is a trial of the trial script.</span><br><span class="line">This is the second trial of the trial script. </span><br><span class="line"><span class="comment"># pæ›¿æ¢æ ‡è®°ä¼šæ‰“å°ä¸æ›¿æ¢å‘½ä»¤ä¸­æŒ‡å®šçš„æ¨¡å¼åŒ¹é…çš„è¡Œã€‚-né€‰é¡¹å°†ç¦æ­¢sedç¼–è¾‘å™¨è¾“å‡ºã€‚</span></span><br><span class="line"><span class="comment"># p -nåªè¾“å‡ºè¢«æ›¿æ¢å‘½ä»¤ä¿®æ”¹è¿‡çš„è¡Œã€‚</span></span><br><span class="line">$ cat data5.txt</span><br><span class="line">This is a <span class="built_in">test</span> line.</span><br><span class="line">This is a different line.</span><br><span class="line">$ sed -n <span class="string">'s/test/trial/p'</span> data5.txt</span><br><span class="line">This is a trial line. </span><br><span class="line"><span class="comment"># wæ›¿æ¢æ ‡è®°ä¼šäº§ç”ŸåŒæ ·çš„è¾“å‡ºï¼Œä¸è¿‡ä¼šå°†è¾“å‡ºä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚</span></span><br><span class="line">$ sed <span class="string">'s/test/trial/w test.txt'</span> data5.txt</span><br><span class="line">This is a trial line.</span><br><span class="line">This is a different line.</span><br><span class="line">$ cat test.txt</span><br><span class="line">This is a trial line.</span><br></pre></td></tr></table></figure><p>ğŸŒŸ  sedå¹¶æ²¡æœ‰å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œæ”¹å˜ï¼Œå› æ­¤å¦‚æœè¦å†™å›æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘ã€‚</p><p>1.é€šè¿‡é‡å®šå‘å†™å…¥æ–°æ–‡ä»¶ï¼Œå¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">"s/dog/cat/g"</span> data1.txt &gt; data1new.txt</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨<code>-i</code>å‚æ•°ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -i <span class="string">"s/dog/cat/g"</span> data1.txt</span><br></pre></td></tr></table></figure><p>2.åœ¨æ¯ä¸€è¡Œå‰é¢æ·»åŠ å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'s/^/#/g'</span> data1.txt</span><br><span class="line"><span class="comment">#the quick brown fox jumps over the lazy dog.</span></span><br><span class="line"><span class="comment">#the quick brown fox jumps over the lazy dog.</span></span><br><span class="line"><span class="comment">#the quick brown fox jumps over the lazy dog.</span></span><br><span class="line"><span class="comment">#the quick brown fox jumps over the lazy dog.</span></span><br></pre></td></tr></table></figure><p>3.åœ¨æ¯ä¸€è¡Œæœ€åæ·»åŠ å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'s/$/---/g'</span> data1.txt</span><br><span class="line">the quick brown fox jumps over the lazy dog.---</span><br><span class="line">the quick brown fox jumps over the lazy dog.---</span><br><span class="line">the quick brown fox jumps over the lazy dog.---</span><br><span class="line">the quick brown fox jumps over the lazy dog.---</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿ä»‹ç»ä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€äº›æœ€åŸºæœ¬çš„ä¸œè¥¿ï¼š</p><ul><li><code>^</code> è¡¨ç¤ºä¸€è¡Œçš„å¼€å¤´ã€‚å¦‚ï¼š<code>/^#/</code> ä»¥#å¼€å¤´çš„åŒ¹é…ã€‚</li><li><code>$</code> è¡¨ç¤ºä¸€è¡Œçš„ç»“å°¾ã€‚å¦‚ï¼š<code>/}$/</code> ä»¥}ç»“å°¾çš„åŒ¹é…ã€‚</li><li><code>\&lt;</code> è¡¨ç¤ºè¯é¦–ã€‚ å¦‚ï¼š<code>\&lt;abc</code> è¡¨ç¤ºä»¥ abc ä¸ºé¦–çš„è©ã€‚</li><li><code>\&gt;</code> è¡¨ç¤ºè¯å°¾ã€‚ å¦‚ï¼š<code>abc\&gt;</code> è¡¨ç¤ºä»¥ abc çµå°¾çš„è©ã€‚</li><li><code>.</code> é€šé…ç¬¦ï¼Œè¡¨ç¤ºå‡ ä¹ä»»æ„å­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦é™¤å¤–ã€‚è®°å¿†æ–¹å¼ï¼šæƒ³æƒ³çœç•¥å· â€¦ ä¸­çš„æ¯ä¸ªç‚¹ï¼Œæ­¤å¤„çœç•¥äº†æ— æ•°ä¸ªå­—ï¼ˆä»€ä¹ˆæƒ…å†µéƒ½å¯èƒ½å‘ç”Ÿï¼‰ã€‚</li><li><code>?</code>è¡¨ç¤ºæŸä¸ªå­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–1æ¬¡ã€‚</li><li><code>*</code>è¡¨ç¤ºæŸä¸ªå­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>+</code>è¡¨ç¤ºæŸä¸ªå­—ç¬¦å‡ºç°äº†1æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>[ ]</code> å­—ç¬¦é›†åˆã€‚ å¦‚ï¼š<code>[abc]</code> è¡¨ç¤ºåŒ¹é…aæˆ–bæˆ–cï¼Œè¿˜æœ‰ <code>[a-zA-Z]</code> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„26ä¸ªå­—ç¬¦ã€‚å¦‚æœå…¶ä¸­æœ‰^è¡¨ç¤ºåï¼Œå¦‚ <code>[^a]</code> è¡¨ç¤ºéaçš„å­—ç¬¦ã€‚è¿˜æœ‰<code>[0-9]</code> åŒ¹é…æ‹¬å·ä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ã€‚</li><li><code>{m}</code>å‰é¢çš„åŒ¹é…é‡å¤mæ¬¡ï¼Œ<code>{m,n}</code> å‰é¢çš„åŒ¹é…é‡å¤måˆ°næ¬¡</li></ul><p>ğŸ’¡ å¼ºå¤§åˆ°æ— å¾€ä¸åˆ©çš„æ­£åˆ™è¡¨è¾¾å¼ç®€å•ç¤ºä¾‹ï¼Œæ¯”å¦‚å»é™¤ä¸‹é¢htmlä¸­çš„tags:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;b&gt;This&lt;/b&gt; is what &lt;span style=<span class="string">"text-decoration: underline;"</span>&gt;I&lt;/span&gt; meant. Understand?</span><br></pre></td></tr></table></figure></p><p>sedå‘½ä»¤å®ç°ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœä½ è¿™æ ·æçš„è¯ï¼Œå°±ä¼šæœ‰é—®é¢˜ï¼Œè´ªå©ªæ¨¡å¼ï¼ŒåŒ¹é…(&lt;)åˆ°(&gt;)ä¹‹é—´çš„æ‰€æœ‰å†…å®¹</span></span><br><span class="line">$ sed <span class="string">'s/&lt;.*&gt;//g'</span> html.txt</span><br><span class="line"> meant. Understand</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è¦è§£å†³ä¸Šé¢çš„é‚£ä¸ªé—®é¢˜ï¼Œå°±å¾—åƒä¸‹é¢è¿™æ ·ã€‚</span></span><br><span class="line"><span class="comment"># å…¶ä¸­çš„'[^&gt;]' æŒ‡å®šäº†é™¤äº†&gt;çš„å­—ç¬¦é‡å¤0æ¬¡æˆ–å¤šæ¬¡ã€‚</span></span><br><span class="line">$ sed <span class="string">'s/&lt;[^&gt;]*&gt;//g'</span> html.txt</span><br><span class="line">This is what I meant. Understand?</span><br></pre></td></tr></table></figure></p><p>ğŸ’¡ <strong>å…¶ä»–æœ‰è¶£ç¤ºä¾‹</strong></p><p>1.è¾“å‡ºé•¿åº¦ä¸å°äº50ä¸ªå­—ç¬¦çš„è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">'/^.&#123;50&#125;/p'</span></span><br></pre></td></tr></table></figure><p>2.ç»Ÿè®¡æ–‡ä»¶ä¸­æœ‰æ¯ä¸ªå•è¯å‡ºç°äº†å¤šå°‘æ¬¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'s/ /\n/g'</span> file | sort | uniq -c</span><br></pre></td></tr></table></figure><p>3.æŸ¥æ‰¾ç›®å½•ä¸­çš„pyæ–‡ä»¶ï¼Œåˆ æ‰æ‰€æœ‰è¡Œçº§æ³¨é‡Š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find ./ -name <span class="string">"*.py"</span> | xargs sed  -i.bak <span class="string">'/^[ ]*#/d'</span></span><br></pre></td></tr></table></figure><p>4.æŸ¥çœ‹ç¬¬5-7è¡Œå’Œ10-13è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n -e <span class="string">'5,7p'</span> -e <span class="string">'10,13p'</span> file</span><br></pre></td></tr></table></figure><p>5.ä»…è¾“å‡ºipåœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ip route show | sed -n <span class="string">'/src/p'</span> | sed -e <span class="string">'s/  */ /g'</span> | cut -d<span class="string">' '</span> -f9</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨åœ°å€"><a href="#ä½¿ç”¨åœ°å€" class="headerlink" title="ä½¿ç”¨åœ°å€"></a>ä½¿ç”¨åœ°å€</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨sedç¼–è¾‘å™¨ä¸­ä½¿ç”¨çš„å‘½ä»¤ä¼šä½œç”¨äºæ–‡æœ¬æ•°æ®çš„æ‰€æœ‰è¡Œã€‚å¦‚æœåªæƒ³å°†å‘½ä»¤ä½œç”¨äºç‰¹å®šè¡Œæˆ–æŸäº›è¡Œï¼Œåˆ™å¿…é¡»ç”¨è¡Œå¯»å€ï¼ˆline addressingï¼‰ã€‚</p><h4 id="æ•°å­—æ–¹å¼å¯»å€"><a href="#æ•°å­—æ–¹å¼å¯»å€" class="headerlink" title="æ•°å­—æ–¹å¼å¯»å€"></a>æ•°å­—æ–¹å¼å¯»å€</h4><p>sedç¼–è¾‘å™¨ä¼šå°†æ–‡æœ¬æµä¸­çš„ç¬¬ä¸€è¡Œç¼–å·ä¸º1ï¼Œç„¶åç»§ç»­æŒ‰é¡ºåºä¸ºæ¥ä¸‹æ¥çš„è¡Œåˆ†é…è¡Œå·ã€‚</p><p>1.åªä¿®æ”¹ç¬¬äºŒè¡Œçš„æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'2s/dog/cat/'</span> data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œï¼Œä½¿ç”¨è¡Œåœ°å€åŒºé—´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'2,3s/dog/cat/'</span> data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br></pre></td></tr></table></figure><p>3.ä¹Ÿå¯ä»¥åŒ¹é…ä»æ–‡æœ¬ä¸­æŸè¡Œå¼€å§‹åˆ°ç»“æŸçš„æ‰€æœ‰è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sed <span class="string">'2,$s/dog/cat/'</span> data1.txt</span><br><span class="line">The quick brown fox jumps over the lazy dog</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br><span class="line">The quick brown fox jumps over the lazy cat</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ–‡æœ¬è¿‡æ»¤å™¨"><a href="#ä½¿ç”¨æ–‡æœ¬è¿‡æ»¤å™¨" class="headerlink" title="ä½¿ç”¨æ–‡æœ¬è¿‡æ»¤å™¨"></a>ä½¿ç”¨æ–‡æœ¬è¿‡æ»¤å™¨</h4><p>sedç¼–è¾‘å™¨å…è®¸æŒ‡å®šæ–‡æœ¬æ¨¡å¼æ¥è¿‡æ»¤å‡ºå‘½ä»¤è¦ä½œç”¨çš„è¡Œã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/pattern/<span class="built_in">command</span></span><br></pre></td></tr></table></figure><p>å¿…é¡»ç”¨æ­£æ–œçº¿å°†è¦æŒ‡å®šçš„patternå°èµ·æ¥ã€‚sedç¼–è¾‘å™¨ä¼šå°†è¯¥å‘½ä»¤ä½œç”¨åˆ°åŒ…å«æŒ‡å®šæ–‡æœ¬æ¨¡å¼çš„è¡Œä¸Šã€‚</p><p>ä¸¾ä¸ªæ —å­ğŸŒ°æ¥è¯´æ˜ä¸€ä¸‹å§ï¼Œåœ¨<code>/etc/passwd</code>ä¸­åªä¿®æ”¹ç”¨æˆ·Samanthaçš„é»˜è®¤shellï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ grep Samantha /etc/passwd</span><br><span class="line">Samantha:x:502:502::/home/Samantha:/bin/bash</span><br><span class="line">$ sed <span class="string">'/Samantha/s/bash/csh/'</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">[...]</span><br><span class="line">Christine:x:501:501:Christine B:/home/Christine:/bin/bash</span><br><span class="line">Samantha:x:502:502::/home/Samantha:/bin/csh</span><br><span class="line">Timothy:x:503:503::/home/Timothy:/bin/bash</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è¡Œ"><a href="#åˆ é™¤è¡Œ" class="headerlink" title="åˆ é™¤è¡Œ"></a>åˆ é™¤è¡Œ</h3><p>ä½¿ç”¨åˆ é™¤å‘½ä»¤då¯¹æ–‡æœ¬è¿›è¡Œåˆ é™¤æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰æ–‡æœ¬</span></span><br><span class="line">sed <span class="string">'d'</span> data1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å•è¡Œ</span></span><br><span class="line">sed <span class="string">'2d'</span> data1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤è¡ŒåŒºé—´[2,3]</span></span><br><span class="line">sed <span class="string">'2,3d'</span> data1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤è¡ŒåŒºé—´[2,endline]</span></span><br><span class="line">sed <span class="string">'2,$d'</span> data1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åŒ¹é…æ–‡æœ¬aaçš„è¡Œ</span></span><br><span class="line">sed <span class="string">'/aa/d'</span> data1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ä¸¤ä¸ªåŒ¹é…æ–‡æœ¬ä¹‹é—´çš„æ–‡æœ¬ åŒ¹é…åˆ°1å’Œ3çš„è¡Œä¹‹é—´çš„æ–‡æœ¬å…¨éƒ¨è¢«åˆ é™¤</span></span><br><span class="line">sed <span class="string">'/1/,/3/d'</span> data1.txt</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥ã€é™„åŠ æ–‡æœ¬"><a href="#æ’å…¥ã€é™„åŠ æ–‡æœ¬" class="headerlink" title="æ’å…¥ã€é™„åŠ æ–‡æœ¬"></a>æ’å…¥ã€é™„åŠ æ–‡æœ¬</h3><p>1.æ’å…¥å‘½ä»¤<code>i</code>åœ¨æŒ‡å®šè¡Œå‰å¢åŠ æ–°è¡Œ</p><p>2.é™„åŠ å‘½ä»¤<code>a</code>åœ¨æŒ‡å®šè¡Œåå¢åŠ æ–°è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿½åŠ </span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"Test Line 2"</span> | sed <span class="string">'a\Test Line 1'</span></span><br><span class="line">Test Line 2</span><br><span class="line">Test Line 1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"Test Line 2"</span> | sed <span class="string">'i\Test Line 1'</span></span><br><span class="line">Test Line 1</span><br><span class="line">Test Line 2</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¡Œ"><a href="#ä¿®æ”¹è¡Œ" class="headerlink" title="ä¿®æ”¹è¡Œ"></a>ä¿®æ”¹è¡Œ</h3><p>ä½¿ç”¨<code>c</code>å‘½ä»¤æ¥ä¿®æ”¹ä¸€è¡Œæ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ç¬¬ä¸‰è¡Œæ–‡æœ¬</span></span><br><span class="line">$ sed <span class="string">'3c\</span></span><br><span class="line"><span class="string">This is a changed line of text.'</span> data1.txt</span><br><span class="line">the quick brown fox jumps over the lazy dog.</span><br><span class="line">the quick brown fox jumps over the lazy dog.</span><br><span class="line">This is a changed line of text.</span><br><span class="line">the quick brown fox jumps over the lazy dog.</span><br></pre></td></tr></table></figure><h3 id="è½¬æ¢å‘½ä»¤"><a href="#è½¬æ¢å‘½ä»¤" class="headerlink" title="è½¬æ¢å‘½ä»¤"></a>è½¬æ¢å‘½ä»¤</h3><p>å‘½ä»¤æ ¼å¼<code>sed &#39;y/inchar/outchar&#39;</code></p><p>å°†incharä¸­çš„å­—ç¬¦ä¸€ä¸€å¯¹åº”åœ°è½¬æ¢æˆoutcharçš„å­—ç¬¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"This 1 is a test of 1 try."</span> | sed <span class="string">'y/123/456/'</span></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">This 4 is a <span class="built_in">test</span> of 4 try.</span><br></pre></td></tr></table></figure><p>ğŸ’¡ å¦‚ä½ åœ¨è¾“å‡ºä¸­çœ‹åˆ°çš„ï¼Œincharsæ¨¡å¼ä¸­æŒ‡å®šå­—ç¬¦çš„<strong>æ¯ä¸ªå®ä¾‹éƒ½ä¼šè¢«æ›¿æ¢æˆoutcharsæ¨¡å¼ä¸­</strong><br><strong>ç›¸åŒä½ç½®çš„é‚£ä¸ªå­—ç¬¦ã€‚</strong></p><h3 id="æ‰“å°å‘½ä»¤"><a href="#æ‰“å°å‘½ä»¤" class="headerlink" title="æ‰“å°å‘½ä»¤"></a>æ‰“å°å‘½ä»¤</h3><p>1.æ‰“å°æ•°æ®æ–‡æœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"this is a test"</span> | sed <span class="string">'p'</span></span><br><span class="line">this is a <span class="built_in">test</span></span><br><span class="line">this is a <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>2.æ‰“å°åŒ…å«åŒ¹é…æ–‡æœ¬æ¨¡å¼çš„è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat data6.txt</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line"><span class="comment"># æ¨¡å¼åŒ¹é…</span></span><br><span class="line">$ sed -n <span class="string">'/number 3/p'</span> data6.txt</span><br><span class="line">This is line number 3. </span><br><span class="line"><span class="comment"># ä»ä¸€ä¸ªæ¨¡å¼åˆ°å¦ä¸€ä¸ªæ¨¡å¼</span></span><br><span class="line">$ sed -n <span class="string">'/number 2/,/number 3/p'</span> data6.txt</span><br><span class="line">this is line number 2.</span><br><span class="line">this is line number 3.</span><br></pre></td></tr></table></figure><p>3.å¿«é€Ÿæ‰“å°æ•°æ®æµä¸­çš„æŸäº›è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">'2,3p'</span> data6.txt</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br></pre></td></tr></table></figure><p>4.ä»ç¬¬ä¸€è¡Œæ‰“å°åŒ¹é…3æˆåŠŸçš„é‚£ä¸€è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">'1,/3/p'</span> data6.txt</span><br><span class="line">this is line number 1.</span><br><span class="line">this is line number 2.</span><br><span class="line">this is line number 3.</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://coolshell.cn/articles/9104.html" target="_blank" rel="noopener">SED ç®€æ˜æ•™ç¨‹</a><br><a href="https://juejin.im/post/5ce5190b5188252dbb08baa8" target="_blank" rel="noopener">Linuxç”Ÿäº§ç¯å¢ƒä¸Šï¼Œæœ€å¸¸ç”¨çš„ä¸€å¥—â€œSedâ€œæŠ€å·§</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;&lt;code&gt;sed&lt;/code&gt;å‘½ä»¤åº”ç”¨å¹¿æ³›ï¼Œä½¿ç”¨ç®€å•ï¼Œæ˜¯å¿«é€Ÿæ–‡æœ¬å¤„ç†çš„åˆ©å™¨ã€‚å®ƒå…¶å®æ²¡å¤šå°‘æŠ€å·§ï¼ŒèƒŒè¯µã€ä½¿ç”¨æ˜¯æœ€åˆé€‚çš„å­¦ä¹ æ¸ é“ï¼Œå±äºç¡¬æŠ€èƒ½ã€‚ä½†å®ƒåˆå¾ˆå¤æ‚ï¼Œå› ä¸ºé«˜çº§åŠŸèƒ½å¤ªå¤šã€‚æœ¬ç¯‡ä¸å»å…³æ³¨sedçš„é«˜çº§åŠŸèƒ½ï¼Œä»…å¯¹å¸¸ç”¨çš„ä¸€äº›æ“ä½œï¼Œè¿›è¡Œè¯´æ˜ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="sed" scheme="https://annecoding.github.io/tags/sed/"/>
    
  </entry>
  
  <entry>
    <title>linuxä¸­ç©è½¬awkæŠ€å·§åˆ†äº«</title>
    <link href="https://annecoding.github.io/2019/06/10/linux%E4%B8%AD%E7%8E%A9%E8%BD%ACawk/"/>
    <id>https://annecoding.github.io/2019/06/10/linuxä¸­ç©è½¬awk/</id>
    <published>2019-06-10T01:22:36.000Z</published>
    <updated>2019-09-01T11:39:33.992Z</updated>
    
    <content type="html"><![CDATA[<!-- <meta name="referrer" content="no-referrer" /> --><p><strong>awk</strong>å…¶åç§°å¾—è‡ªäºå®ƒçš„åˆ›å§‹äºº Alfred Aho ã€Peter Weinberger å’Œ Brian Kernighan å§“æ°çš„é¦–ä¸ªå­—æ¯ã€‚å®é™…ä¸Š AWK çš„ç¡®æ‹¥æœ‰è‡ªå·±çš„è¯­è¨€ï¼š AWK ç¨‹åºè®¾è®¡è¯­è¨€ ï¼Œ ä¸‰ä½åˆ›å»ºè€…å·²å°†å®ƒæ­£å¼å®šä¹‰ä¸ºâ€œæ ·å¼æ‰«æå’Œå¤„ç†è¯­è¨€â€ã€‚å®ƒå…è®¸æ‚¨åˆ›å»ºç®€çŸ­çš„ç¨‹åºï¼Œè¿™äº›ç¨‹åºè¯»å–è¾“å…¥æ–‡ä»¶ã€ä¸ºæ•°æ®æ’åºã€å¤„ç†æ•°æ®ã€å¯¹è¾“å…¥æ‰§è¡Œè®¡ç®—ä»¥åŠç”ŸæˆæŠ¥è¡¨ï¼Œè¿˜æœ‰æ— æ•°å…¶ä»–çš„åŠŸèƒ½ã€‚</p><a id="more"></a><h3 id="awkç®€æ˜æ•™ç¨‹"><a href="#awkç®€æ˜æ•™ç¨‹" class="headerlink" title="awkç®€æ˜æ•™ç¨‹"></a>awkç®€æ˜æ•™ç¨‹</h3><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a><strong>ç®€ä»‹</strong></h3><p>awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼ˆæ“…é•¿å–è¡Œï¼‰ï¼Œawkï¼ˆæ“…é•¿å–åˆ—ï¼‰åœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚</p><p>awkæœ‰3ä¸ªä¸åŒç‰ˆæœ¬: awkã€nawkå’Œgawkï¼Œæœªä½œç‰¹åˆ«è¯´æ˜ï¼Œä¸€èˆ¬æŒ‡gawkï¼Œgawk æ˜¯ AWK çš„ GNU ç‰ˆæœ¬ã€‚</p><p><strong>awk</strong>ç®€å•æ¥è®²ï¼š<strong>å–æ–‡ä»¶ä¸­çš„æŸåˆ—æ•°æ®</strong>ã€‚</p><p>é€šå¸¸ï¼Œawkæ˜¯ä»¥æ–‡ä»¶çš„ä¸€è¡Œä¸ºå¤„ç†å•ä½çš„ã€‚awkæ¯æ¥æ”¶æ–‡ä»¶çš„ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ï¼Œæ¥å¤„ç†æ–‡æœ¬ã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line">awk <span class="string">'&#123;pattern + action&#125;'</span> &#123;filenames&#125;</span><br><span class="line"><span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line">awk [å¯é€‰çš„å‘½ä»¤è¡Œé€‰é¡¹] <span class="string">'BEGIN&#123;å‘½ä»¤ &#125; pattern&#123; å‘½ä»¤ &#125; END&#123; å‘½ä»¤ &#125;'</span>  æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>å…³äºç¬¬äºŒç§æ–¹å¼ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š</p><p>1.<strong>BEGIN å¼€å¤´éƒ¨åˆ†</strong>ï¼Œå¯é€‰çš„ã€‚ç”¨æ¥è®¾ç½®ä¸€äº›å‚æ•°ï¼Œè¾“å‡ºä¸€äº›è¡¨å¤´ï¼Œå®šä¹‰ä¸€äº›å˜é‡ç­‰ã€‚ä¸Šé¢çš„å‘½ä»¤ä»…æ‰“å°äº†ä¸€è¡Œä¿¡æ¯è€Œå·²ã€‚</p><p>2.<strong>END ç»“å°¾éƒ¨åˆ†</strong>ï¼Œå¯é€‰çš„ã€‚ç”¨æ¥è®¡ç®—ä¸€äº›æ±‡æ€»é€»è¾‘ï¼Œæˆ–è€…è¾“å‡ºè¿™äº›å†…å®¹ã€‚ä¸Šé¢çš„å‘½ä»¤ï¼Œä½¿ç”¨ç®€å•çš„forå¾ªç¯ï¼Œè¾“å‡ºäº†æ•°ç»„rtä¸­çš„å†…å®¹ã€‚</p><p>3.<strong>Pattern åŒ¹é…éƒ¨åˆ†</strong>ï¼Œä¾ç„¶å¯é€‰ã€‚ç”¨æ¥åŒ¹é…ä¸€äº›éœ€è¦å¤„ç†çš„è¡Œã€‚ä¸Šé¢çš„å‘½ä»¤ï¼ŒåªåŒ¹é…tcpå¼€å¤´çš„è¡Œï¼Œå…¶ä»–çš„ä¸è¿›å…¥å¤„ç†ã€‚</p><p>4.<strong>Action æ¨¡å—</strong>ã€‚ä¸»è¦é€»è¾‘ä½“ï¼ŒæŒ‰è¡Œå¤„ç†ï¼Œç»Ÿè®¡æ‰“å°ï¼Œéƒ½å¯ä»¥ã€‚</p><h3 id="åˆæ­¥ä½¿ç”¨"><a href="#åˆæ­¥ä½¿ç”¨" class="headerlink" title="åˆæ­¥ä½¿ç”¨"></a>åˆæ­¥ä½¿ç”¨</h3><p>1.é¦–å…ˆä¿å­˜ä¸€ä¸ªç¤ºä¾‹æ–‡æ¡£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat netstat </span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps</span><br></pre></td></tr></table></figure><p>2.è¾“å‡ºç¬¬ä¸€åˆ—å’Œç¬¬å››åˆ—</p><ul><li>å…¶ä¸­<strong>å•å¼•å·</strong>ä¸­è¢«å¤§æ‹¬å·æ‹¬ç€çš„å°±æ˜¯<strong>awkè¯­å¥</strong>ï¼Œ<strong>åªèƒ½è¢«å•å¼•å·åŒ…å«</strong>ã€‚</li><li><code>$1..$n</code>è¡¨ç¤º<strong>ç¬¬å‡ åˆ—</strong>ï¼Œ<code>$0</code>è¡¨ç¤º<strong>æ•´è¡Œ</strong>ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'&#123;print $1,$4&#125;'</span> netstat </span><br><span class="line">Active (only</span><br><span class="line">Proto Local</span><br><span class="line">tcp 0.0.0.0:22</span><br><span class="line">tcp6 :::7500</span><br><span class="line">tcp6 :::80</span><br><span class="line">tcp6 :::7000</span><br><span class="line">tcp6 :::443</span><br><span class="line"></span><br><span class="line">$ cat /etc/passwd |awk  -F <span class="string">':'</span>  <span class="string">'&#123;print $1&#125;'</span>  </span><br><span class="line">root</span><br><span class="line">daemon</span><br><span class="line">bin</span><br><span class="line">sys</span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤è®°å½•"><a href="#è¿‡æ»¤è®°å½•" class="headerlink" title="è¿‡æ»¤è®°å½•"></a>è¿‡æ»¤è®°å½•</h3><p>1.awkå¯ä»¥å¯¹å…¶ä¸­çš„æŸäº›å­—æ®µè¿›è¡Œåˆ¤æ–­ï¼Œé€šè¿‡ä¸æˆ–éè¿æ¥ã€‚awk ä¸­çš„æ¯”è¾ƒè¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²å’Œæˆ–è€…æ•°å€¼ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š</p><ul><li><code>&gt;</code> â€“ å¤§äº</li><li><code>&lt;</code> â€“ å°äº</li><li><code>&gt;=</code> â€“ å¤§äºç­‰äº</li><li><code>&lt;=</code> â€“ å°äºç­‰äº</li><li><code>==</code> â€“ ç­‰äº</li><li><code>!=</code> â€“ ä¸ç­‰äº</li><li><code>some_value ~ / pattern/</code> â€“ å¦‚æœ some_value åŒ¹é…æ¨¡å¼ patternï¼Œåˆ™è¿”å› true</li><li><code>some_value !~ / pattern/</code> â€“ å¦‚æœ some_value ä¸åŒ¹é…æ¨¡å¼ patternï¼Œåˆ™è¿”å› true</li></ul><p>å¦‚ä»¥ä¸‹å¸¸ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'$1=="tcp" &amp;&amp; $6=="LISTEN" '</span> netstat  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd   </span><br><span class="line"><span class="comment"># éœ€è¦è¡¨å¤´çš„è¯ï¼Œå¯ä»¥å¼•å…¥å†…å»ºå˜é‡NR</span></span><br><span class="line">$ awk <span class="string">'$1=="tcp" &amp;&amp; $6=="LISTEN" || NR==2 '</span> netstat  </span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd </span><br><span class="line"><span class="comment"># NRä¹Ÿå¯ä»¥ç”¨æ¥æ‰“å°è¡Œå·</span></span><br><span class="line">$ awk <span class="string">'$1=="tcp6" &#123; print NR,$0 &#125;'</span> netstat  </span><br><span class="line">4 tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">5 tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps        </span><br><span class="line">6 tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">7 tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps</span><br></pre></td></tr></table></figure><h3 id="å†…å»ºå˜é‡"><a href="#å†…å»ºå˜é‡" class="headerlink" title="å†…å»ºå˜é‡"></a>å†…å»ºå˜é‡</h3><p>ç¨‹åºå·²ç»å®šä¹‰å¥½çš„å˜é‡ï¼Œå¯ä»¥ç›´æ¥æ¥ä½¿ç”¨ï¼Œä»¥ä¸‹å¸¸è§çš„å˜é‡ã€‚</p><table><thead><tr><th style="text-align:left">å˜é‡</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td style="text-align:left"><code>$0</code></td><td>å½“å‰è®°å½•ï¼ˆè¿™ä¸ªå˜é‡ä¸­å­˜æ”¾ç€æ•´ä¸ªè¡Œçš„å†…å®¹ï¼‰</td></tr><tr><td style="text-align:left"><code>$1~$n</code></td><td>å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œå­—æ®µé—´ç”±FSåˆ†éš”</td></tr><tr><td style="text-align:left"><code>FS</code></td><td>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ é»˜è®¤æ˜¯ç©ºæ ¼æˆ–Tab</td></tr><tr><td style="text-align:left"><code>NF</code></td><td>å½“å‰è®°å½•ä¸­çš„å­—æ®µä¸ªæ•°ï¼Œå°±æ˜¯æœ‰å¤šå°‘åˆ—</td></tr><tr><td style="text-align:left"><code>NR</code></td><td>å·²ç»è¯»å‡ºçš„è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œä»1å¼€å§‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶è¯ï¼Œä¸æ–­ç´¯åŠ ã€‚</td></tr><tr><td style="text-align:left"><code>FNR</code></td><td>å½“å‰è®°å½•æ•°ï¼Œä¸NRä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯å„ä¸ªæ–‡ä»¶è‡ªå·±çš„è¡Œå·</td></tr><tr><td style="text-align:left"><code>RS</code></td><td>è¾“å…¥çš„è®°å½•åˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr><tr><td style="text-align:left"><code>OFS</code></td><td>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¹Ÿæ˜¯ç©ºæ ¼</td></tr><tr><td style="text-align:left"><code>ORS</code></td><td>è¾“å‡ºçš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</td></tr><tr><td style="text-align:left"><code>FILENAME</code></td><td>å½“å‰è¾“å…¥æ–‡ä»¶çš„åå­—</td></tr></tbody></table><p>âˆ âˆ âˆ   <strong>ä¸€èˆ¬çš„å¼€å‘è¯­è¨€ï¼Œæ•°ç»„ä¸‹æ ‡æ˜¯ä»¥0å¼€å§‹çš„ï¼Œä½†awkçš„åˆ—$æ˜¯ä»¥1å¼€å§‹çš„ï¼Œè€Œ0æŒ‡çš„æ˜¯åŸå§‹å­—ç¬¦ä¸²ã€‚</strong></p><p>1.è¾“å‡ºè¡¨å¤´ã€è¡Œå·åŠç‰¹å®šåˆ—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å†…å»ºå˜é‡NRã€FNRè¾“å‡ºè¡Œå·ä»¥åŠè¡¨å¤´</span></span><br><span class="line">$ awk <span class="string">'$3==0 &amp;&amp; $6=="LISTEN" || NR==2 &#123;print NR,FNR,$1,$3,$6&#125;'</span> netstat</span><br><span class="line">2 2 Proto Send-Q Foreign</span><br><span class="line">3 3 tcp 0 LISTEN</span><br><span class="line">4 4 tcp6 0 LISTEN</span><br><span class="line">5 5 tcp6 0 LISTEN</span><br><span class="line">6 6 tcp6 0 LISTEN</span><br><span class="line">7 7 tcp6 0 LISTEN</span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨åˆ†éš”ç¬¦æ¥è¾“å‡ºç‰¹å®šçš„è¡Œæˆ–è€…åˆ—ï¼Œä¸‹é¢ğŸ‘‡ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;FS=":"&#125; &#123;print $1, $7&#125;'</span> /etc/passwd | head -n 4</span><br><span class="line">root /bin/bash</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment"># -FæŒ‡å®šåŸŸåˆ†éš”ç¬¦ä¸º':'</span></span><br><span class="line">$ cat /etc/passwd |awk  -F <span class="string">':'</span>  <span class="string">'&#123;print $1"\t"$7&#125;'</span> | head -n 4</span><br><span class="line">root    /bin/bash</span><br><span class="line">bin     /sbin/nologin</span><br><span class="line">daemon  /sbin/nologin</span><br><span class="line">adm     /sbin/nologin</span><br></pre></td></tr></table></figure><p>âˆ âˆ âˆ  å¦‚æœè¦æ˜¯ç”¨å¤šä¸ªåˆ†éš”ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼æ¥æŒ‡å®šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F <span class="string">'[;:]'</span></span><br></pre></td></tr></table></figure><p>3.è‡ªå®šä¹‰ä»¥<code>\t</code>ä½œä¸ºåˆ†éš”ç¬¦è¾“å‡ºçš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F: <span class="string">'&#123;print $1,$7&#125;'</span> OFS=<span class="string">"\t"</span> /etc/passwd | head -n 4</span><br><span class="line">root    /bin/bash</span><br><span class="line">bin     /sbin/nologin</span><br><span class="line">daemon  /sbin/nologin</span><br><span class="line">adm     /sbin/nologin</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²åŒ¹é…"><a href="#å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="å­—ç¬¦ä¸²åŒ¹é…"></a>å­—ç¬¦ä¸²åŒ¹é…</h3><p>1.åƒ<strong>grep</strong>ä¸€æ ·åŒ¹é…ç›¸å…³å­—ç¬¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªåŒ¹é…80çš„å­—ç¬¦</span></span><br><span class="line">$ awk <span class="string">'/80/'</span> netstat</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps  </span><br><span class="line"><span class="comment"># åŒ¹é…80ã€æˆ–è€…7000ã€æˆ–è€…tcp6çš„ç›¸å…³å­—ç¬¦</span></span><br><span class="line">$ awk <span class="string">'/80|7000|tcp6/'</span> netstat  </span><br><span class="line">tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps</span><br></pre></td></tr></table></figure><p>2.ç²¾ç¡®çš„åŒ¹é…æŸä¸ªå­—æ®µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># $4åŒ¹é…ç¬¬å››åˆ—çš„æ•°æ®</span></span><br><span class="line">$ awk <span class="string">'$4 ~/80|7000/ &#123;print $0&#125;'</span> netstat </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps   </span><br><span class="line"><span class="comment"># æœç´¢åŒ…å«Systemå…³é”®å­—çš„è¡Œå¹¶è¾“å‡º</span></span><br><span class="line">$ cat -n /etc/passwd | gawk -F: <span class="string">'/System/&#123;print $1" "$5&#125;'</span></span><br><span class="line">    17  dbus System message bus</span><br></pre></td></tr></table></figure><p> âˆ âˆ âˆ  <strong>å…¶å® <code>~</code>è¡¨ç¤ºæ¨¡å¼å¼€å§‹ã€‚<code>/ /</code>ä¸­æ˜¯æ¨¡å¼ã€‚è¿™å°±æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚</strong></p><p>å¯¹æ­¤æ¨¡å¼å–åçš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­—ç¬¦ä¸²åŒ¹é…å–å</span></span><br><span class="line">$ awk <span class="string">'!/80/'</span> netstat                      </span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps </span><br><span class="line"><span class="comment"># ç²¾ç¡®åŒ¹é…å–å</span></span><br><span class="line">$ awk <span class="string">'$4 !~/80|7000/ &#123;print $0&#125;'</span> netstat    </span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps</span><br></pre></td></tr></table></figure><h3 id="æ‹†åˆ†æ–‡ä»¶"><a href="#æ‹†åˆ†æ–‡ä»¶" class="headerlink" title="æ‹†åˆ†æ–‡ä»¶"></a>æ‹†åˆ†æ–‡ä»¶</h3><p>1.æŒ‡å®šæŸåˆ—ä¸ºåˆ†ç±»ç¬¦ï¼Œä½¿ç”¨<strong>é‡å®šå‘</strong>å°±å¯ä»¥å¯¼å‡ºåˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ä¸‹åˆ—è¯­å¥é€šè¿‡ç¬¬1åˆ—è¿›è¡Œåˆ†å‰²ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‰ç…§ç¬¬1åˆ—æ‹†åˆ†æ–‡ä»¶ï¼Œç¬¬ä¸€åˆ—æœ‰tcpã€tcp6ä¸¤ç§ç±»å‹</span></span><br><span class="line"><span class="comment"># æ‰€ä»¥æŒ‰ç…§ç±»å‹å‘½åï¼Œå½“å‰ç›®å½•ä¸‹ä¼šå¤šä¸¤ä¸ªæ–‡ä»¶</span></span><br><span class="line">$ awk <span class="string">'NR!=2&#123;print &gt; $1&#125;'</span> netstat  </span><br><span class="line">$ cat tcp</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">$ ls</span><br><span class="line">netstat  tcp  tcp6</span><br></pre></td></tr></table></figure><p>2.ä¹Ÿå¯ä»¥æŠŠ<strong>æŒ‡å®šçš„åˆ—</strong>è¿½åŠ <code>&gt;&gt;</code>åˆ°æ–‡ä»¶ï¼Œè¿½åŠ ä¸ä¼šè¦†ç›–æºæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'NR!=1&#123;print $4,$7 &gt;&gt; $1&#125;'</span> netstat</span><br><span class="line">$ cat tcp</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">0.0.0.0:22 2036/sshd</span><br></pre></td></tr></table></figure><p>3.ä¹Ÿå¯ä»¥ä½¿ç”¨å¤æ‚çš„è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚if-else-ifè¯­å¥ï¼Œawkæ˜¯ä¸ªè„šæœ¬è§£é‡Šå™¨ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'NR!=1&#123;if($4 ~ /80|443/) print &gt; "1.txt";         </span></span><br><span class="line"><span class="string">else if($4 ~/7000/) print &gt; "2.txt";</span></span><br><span class="line"><span class="string">else print &gt; "3.txt" &#125;'</span> netstat</span><br><span class="line">$ ls ?.txt</span><br><span class="line">1.txt  2.txt  3.txt    </span><br><span class="line">$ cat 1.txt</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17767/./frps        </span><br><span class="line">tcp6       0      0 :::443                  :::*                    LISTEN      17767/./frps </span><br><span class="line">$ cat 2.txt</span><br><span class="line">tcp6       0      0 :::7000                 :::*                    LISTEN      17767/./frps </span><br><span class="line"><span class="comment"># å…¶ä¸­NR!=1ï¼Œä¸å–ç¬¬ä¸€è¡Œæ•°æ®</span></span><br><span class="line"><span class="comment"># è¿™æ˜¯ç¬¬ä¸€è¡Œæ•°æ®Active Internet connections (only servers)</span></span><br><span class="line"><span class="comment"># else print &gt; "3.txt" åŒ¹é…çš„æ˜¯éå‰ä¸¤åˆ—åŒ¹é…åˆ°çš„å…¶ä»–å†…å®¹ï¼Œæ³¨æ„ifå’Œelse ifè¦å¯¹ç›¸åŒåˆ—æ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸ç„¶å¯èƒ½è¾“å‡ºå†…å®¹æœ‰é—®é¢˜</span></span><br><span class="line">$ cat 3.txt</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      2036/sshd           </span><br><span class="line">tcp6       0      0 :::7500                 :::*                    LISTEN      17767/./frps</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿè®¡"><a href="#ç»Ÿè®¡" class="headerlink" title="ç»Ÿè®¡"></a>ç»Ÿè®¡</h3><p>1.ç»Ÿè®¡æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å ç”¨çš„å­—èŠ‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l |awk <span class="string">'BEGIN &#123;size=0;&#125; &#123;size=size+$5;&#125; END&#123;print "[end]size is ", size&#125;'</span></span><br><span class="line">[end]size is  8657198</span><br></pre></td></tr></table></figure><p> å¦‚æœä»¥Mä¸ºå•ä½æ˜¾ç¤º:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l |awk <span class="string">'BEGIN &#123;size=0;&#125; &#123;size=size+$5;&#125; END&#123;print "[end]size is ", size/1024/1024,"M"&#125;'</span> </span><br><span class="line">[end]size is  8.25889 M</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œç»Ÿè®¡ä¸åŒ…æ‹¬æ–‡ä»¶å¤¹çš„å­ç›®å½•ã€‚</p><p>2.ç»Ÿè®¡ä»¥.txtä¸ºåç¼€çš„æ–‡ä»¶æ€»å¤§å°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ll *.txt | awk <span class="string">'&#123;sum+=$5&#125; END &#123;print sum&#125;'</span></span><br><span class="line">769.9</span><br></pre></td></tr></table></figure><p>3.ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ•°ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -lha | gawk <span class="string">'BEGIN &#123;count=0&#125; &#123;count++&#125; END &#123; print "File Count:"count&#125;'</span> </span><br><span class="line">File Count:41</span><br></pre></td></tr></table></figure><p>4.ç»Ÿè®¡å¤–ç½‘è¿æ¥æ•°ï¼Œæ ¹æ®ipåˆ†ç»„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -ant | awk <span class="string">'/^tcp/&#123;print $5&#125;'</span> | awk -F: <span class="string">'!/^:/&#123;print $1&#125;'</span> | sort | uniq -c</span><br><span class="line"><span class="comment"># sort å°†é‡å¤çš„è¡Œé›†ä¸­åœ¨ä¸€èµ·</span></span><br><span class="line"><span class="comment"># uniq å¯¹æ–‡æœ¬è¡Œè¿›è¡Œå»é‡ -c ç»Ÿè®¡é‡å¤æ¬¡æ•°</span></span><br><span class="line"><span class="comment"># å¯å®ç°å¯¹æ–‡æœ¬è¡ŒæŒ‰é‡å¤æ¬¡æ•°è¿›è¡Œæ’åº é»˜è®¤æ˜¯å‡åº  -r é™åº</span></span><br><span class="line">$ sort 1.txt | uniq -c | sort -rn</span><br></pre></td></tr></table></figure><p>5.ç»Ÿè®¡ç¬¬6åˆ—è¿æ¥çŠ¶æ€æ€»å…±å‡ºç°äº†å‡ æ¬¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'NR!=1&#123;a[$6]++;&#125; END &#123;for (i in a) print i ", " a[i];&#125;'</span> netstat </span><br><span class="line">LISTEN, 5</span><br><span class="line">Foreign, 1</span><br></pre></td></tr></table></figure><p>6.ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„è¿›ç¨‹å ç”¨äº†å¤šå°‘å†…å­˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ps aux | awk <span class="string">'NR!=1&#123;a[$1]+=$6;&#125; END &#123;for(i in a) print i "," a[i]"KB"; &#125;'</span></span></span><br><span class="line">dbus,1492KB</span><br><span class="line">polkitd,10972KB</span><br><span class="line">ntp,2104KB</span><br><span class="line">root,138580KB</span><br></pre></td></tr></table></figure><h3 id="awkè„šæœ¬"><a href="#awkè„šæœ¬" class="headerlink" title="awkè„šæœ¬"></a>awkè„šæœ¬</h3><p>åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª<strong>END</strong>å…³é”®å­—ã€‚<strong>END</strong>çš„æ„æ€æ˜¯â€œå¤„ç†å®Œæ‰€æœ‰çš„è¡Œçš„æ ‡è¯†â€ï¼Œå³ç„¶è¯´åˆ°äº†<strong>END</strong>å°±æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹BEGINï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—æ„å‘³ç€<strong>æ‰§è¡Œå‰</strong>å’Œ<strong>æ‰§è¡Œå</strong>çš„æ„æ€ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><ul><li><strong>BEGIN</strong>{ è¿™é‡Œé¢æ”¾çš„æ˜¯æ‰§è¡Œå‰çš„è¯­å¥ }</li><li><strong>END</strong> { è¿™é‡Œé¢æ”¾çš„æ˜¯å¤„ç†å®Œæ‰€æœ‰çš„è¡Œåè¦æ‰§è¡Œçš„è¯­å¥ }</li><li>{ è¿™é‡Œé¢æ”¾çš„æ˜¯å¤„ç†æ¯ä¸€è¡Œæ—¶è¦æ‰§è¡Œçš„è¯­å¥ }</li></ul><p>soï¼Œä¸¾ä¸ªæ —å­ğŸŒ°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat score </span><br><span class="line">Marry   2143 78 84 77</span><br><span class="line">Jack    2321 66 78 45</span><br><span class="line">Tom     2122 48 77 71</span><br><span class="line">Mike    2537 87 97 95</span><br><span class="line">Bob     2415 40 57 62</span><br></pre></td></tr></table></figure><p>awkè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ cat cal.awk </span><br><span class="line"><span class="comment">#!/bin/awk -f</span></span><br><span class="line"><span class="comment">#è¿è¡Œå‰</span></span><br><span class="line">BEGIN &#123;</span><br><span class="line">    math = 0</span><br><span class="line">    english = 0</span><br><span class="line">    computer = 0</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL\n"</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"---------------------------------------------\n"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#è¿è¡Œä¸­</span></span><br><span class="line">&#123;</span><br><span class="line">    math+=<span class="variable">$3</span></span><br><span class="line">    english+=<span class="variable">$4</span></span><br><span class="line">    computer+=<span class="variable">$5</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"%-6s %-6s %4d %8d %8d %8d\n"</span>, <span class="variable">$1</span>, <span class="variable">$2</span>, <span class="variable">$3</span>,<span class="variable">$4</span>,<span class="variable">$5</span>, <span class="variable">$3</span>+<span class="variable">$4</span>+<span class="variable">$5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#è¿è¡Œå</span></span><br><span class="line">END &#123;</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"---------------------------------------------\n"</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"  TOTAL:%10d %8d %8d \n"</span>, math, english, computer</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"AVERAGE:%10.2f %8.2f %8.2f\n"</span>, math/NR, english/NR, computer/NR</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -fè°ƒç”¨è„šæœ¬</span></span><br><span class="line">$ awk -f cal.awk score     </span><br><span class="line">NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL</span><br><span class="line">---------------------------------------------</span><br><span class="line">Marry  2143     78       84       77      239</span><br><span class="line">Jack   2321     66       78       45      189</span><br><span class="line">Tom    2122     48       77       71      196</span><br><span class="line">Mike   2537     87       97       95      279</span><br><span class="line">Bob    2415     40       57       62      159</span><br><span class="line">---------------------------------------------</span><br><span class="line">  TOTAL:       319      393      350 </span><br><span class="line">AVERAGE:     63.80    78.60    70.00</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p>awkè„šæœ¬ä¸ç¯å¢ƒå˜é‡çš„äº¤äº’ï¼Œä½¿ç”¨-vå‚æ•°ï¼ˆå®šä¹‰å˜é‡ï¼‰å’ŒENVIRONï¼Œä½¿ç”¨ENVIRONçš„ç¯å¢ƒå˜é‡éœ€è¦exportã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ x=5</span><br><span class="line">$ y=10</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$x</span></span><br><span class="line">5</span><br><span class="line">$ <span class="built_in">export</span> y</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$x</span> <span class="variable">$y</span></span><br><span class="line">5 10</span><br><span class="line">$ awk -v val=<span class="variable">$x</span> <span class="string">'&#123;print $1,$2,$3,$4+val,$5+ENVIRON["y"]&#125;'</span> OFS=<span class="string">"\t"</span> score </span><br><span class="line">Marry   2143    78      89      87</span><br><span class="line">Jack    2321    66      83      55</span><br><span class="line">Tom     2122    48      82      81</span><br><span class="line">Mike    2537    87      102     105</span><br><span class="line">Bob     2415    40      62      72</span><br></pre></td></tr></table></figure><h3 id="æœ‰è¶£ç¤ºä¾‹"><a href="#æœ‰è¶£ç¤ºä¾‹" class="headerlink" title="æœ‰è¶£ç¤ºä¾‹"></a>æœ‰è¶£ç¤ºä¾‹</h3><p>1.ä»fileæ–‡ä»¶ä¸­æ‰¾å‡ºé•¿åº¦å¤§äº20çš„è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'length&gt;=21'</span> score </span><br><span class="line">Marry   2143 78 84 77</span><br><span class="line">Jack    2321 66 78 45</span><br><span class="line">Tom     2122 48 77 71</span><br><span class="line">Mike    2537 87 97 95</span><br><span class="line">Bob     2415 40 57 62</span><br></pre></td></tr></table></figure><p>2.æŒ‰è¿æ¥æ•°æŸ¥çœ‹å®¢æˆ·ç«¯ipï¼Œæ ¹æ®ipåˆ†ç»„è®¡æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -ntu | awk <span class="string">'&#123;print $5&#125;'</span> | cut -d: -f1 | sort | uniq -c</span><br><span class="line">      1 100.100.30.25</span><br><span class="line">      2 112.213.179.149</span><br><span class="line">      1 173.255.234.138</span><br><span class="line">      1 47.52.207.198</span><br><span class="line">      1 47.93.222.200</span><br><span class="line">      1 60.247.88.82</span><br><span class="line">      1 77.247.110.219</span><br><span class="line">      1 80.1.15.172</span><br><span class="line">      7 80.82.70.187</span><br><span class="line">      1 89.248.174.198</span><br><span class="line">      1 Address</span><br><span class="line">      1 servers)</span><br><span class="line"><span class="comment"># cutç”¨æ³•</span></span><br><span class="line"><span class="comment"># -d ï¼šè‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ¶è¡¨ç¬¦ã€‚</span></span><br><span class="line"><span class="comment"># -f ï¼šä¸-dä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡å®šæ˜¾ç¤ºå“ªä¸ªåŒºåŸŸã€‚</span></span><br></pre></td></tr></table></figure><p>3.æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ seq 9 | sed <span class="string">'H;g'</span> | awk -v RS=<span class="string">''</span> <span class="string">'&#123;for(i=1;i&lt;=NF;i++)printf("%dx%d=%d%s", i, NR, i*NR, i==NR?"\n":"\t")&#125;'</span></span><br><span class="line">1x1=1</span><br><span class="line">1x2=2   2x2=4</span><br><span class="line">1x3=3   2x3=6   3x3=9</span><br><span class="line">1x4=4   2x4=8   3x4=12  4x4=16</span><br><span class="line">1x5=5   2x5=10  3x5=15  4x5=20  5x5=25</span><br><span class="line">1x6=6   2x6=12  3x6=18  4x6=24  5x6=30  6x6=36</span><br><span class="line">1x7=7   2x7=14  3x7=21  4x7=28  5x7=35  6x7=42  7x7=49</span><br><span class="line">1x8=8   2x8=16  3x8=24  4x8=32  5x8=40  6x8=48  7x8=56  8x8=64</span><br><span class="line">1x9=9   2x9=18  3x9=27  4x9=36  5x9=45  6x9=54  7x9=63  8x9=72  9x9=81</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒé“¾æ¥:<br><a href="https://coolshell.cn/articles/9070.html" target="_blank" rel="noopener">AWK ç®€æ˜æ•™ç¨‹</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;!-- &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt; --&gt;
&lt;p&gt;&lt;strong&gt;awk&lt;/strong&gt;å…¶åç§°å¾—è‡ªäºå®ƒçš„åˆ›å§‹äºº Alfred Aho ã€Peter Weinberger å’Œ Brian Kernighan å§“æ°çš„é¦–ä¸ªå­—æ¯ã€‚å®é™…ä¸Š AWK çš„ç¡®æ‹¥æœ‰è‡ªå·±çš„è¯­è¨€ï¼š AWK ç¨‹åºè®¾è®¡è¯­è¨€ ï¼Œ ä¸‰ä½åˆ›å»ºè€…å·²å°†å®ƒæ­£å¼å®šä¹‰ä¸ºâ€œæ ·å¼æ‰«æå’Œå¤„ç†è¯­è¨€â€ã€‚å®ƒå…è®¸æ‚¨åˆ›å»ºç®€çŸ­çš„ç¨‹åºï¼Œè¿™äº›ç¨‹åºè¯»å–è¾“å…¥æ–‡ä»¶ã€ä¸ºæ•°æ®æ’åºã€å¤„ç†æ•°æ®ã€å¯¹è¾“å…¥æ‰§è¡Œè®¡ç®—ä»¥åŠç”ŸæˆæŠ¥è¡¨ï¼Œè¿˜æœ‰æ— æ•°å…¶ä»–çš„åŠŸèƒ½ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="awk" scheme="https://annecoding.github.io/tags/awk/"/>
    
  </entry>
  
  <entry>
    <title>hexoå›¾ç‰‡æ˜¾ç¤ºé—®é¢˜</title>
    <link href="https://annecoding.github.io/2019/05/20/hexo%20img%20403/"/>
    <id>https://annecoding.github.io/2019/05/20/hexo img 403/</id>
    <published>2019-05-20T03:19:37.000Z</published>
    <updated>2019-07-25T00:08:26.530Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>è§£å†³markdownå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œè¿”å›403 forbiddenã€‚</p><a id="more"></a><p>åœ¨æ–‡ç« ä¸­å¼•ç”¨å¤–é“¾å›¾ç‰‡æ—¶ä¸æ˜¾ç¤ºï¼Œä½†æ˜¯æœ¬èº«å¤–é“¾ï¼ˆå›¾åºŠï¼‰å›¾ç‰‡åˆæ˜¯å¯ä»¥æ‰“å¼€çš„ï¼Œé”™è¯¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://images2015.cnblogs.com/blog/415042/201604/415042-20160419175110210-69232656.png" alt></p><p><img src="http://www.manongjc.com/images/cnblogs/153579233815357B3A9v2338.png" alt><br>åªéœ€è¦åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;</span><br></pre></td></tr></table></figure></p><p>å…³äºmeta referrerï¼Œæœ‰å¦‚ä¸‹å¯è®¾ç½®çš„å€¼ï¼š<br><img src="https://images2017.cnblogs.com/blog/985078/201802/985078-20180208084932873-358057556.png" alt></p><blockquote><p>å‚è€ƒé“¾æ¥å¦‚ä¸‹ï¼š<br><a href="https://github.com/xcodebuild/hexo-asset-image" target="_blank" rel="noopener">å…³äºhexo-asset-image</a><br><a href="http://www.manongjc.com/article/9294.html" target="_blank" rel="noopener">hexoå›¾ç‰‡ä¸æ˜¾ç¤º</a><br><a href="https://www.cnblogs.com/awzf/p/9811386.html" target="_blank" rel="noopener">imgæ ‡ç­¾forbiddené—®é¢˜</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;

&lt;p&gt;è§£å†³markdownå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œè¿”å›403 forbiddenã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://annecoding.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://annecoding.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>linuxä¸‹é¡¹ç›®ä¸Šçº¿æµç¨‹</title>
    <link href="https://annecoding.github.io/2019/05/15/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%E6%B5%81%E7%A8%8B/"/>
    <id>https://annecoding.github.io/2019/05/15/é¡¹ç›®ä¸Šçº¿æµç¨‹/</id>
    <published>2019-05-15T07:48:23.317Z</published>
    <updated>2019-07-28T01:43:11.512Z</updated>
    
    <content type="html"><![CDATA[<p>é¡¹ç›®ä¸Šçº¿æµç¨‹</p><p>1.é€‰æ‹©æœåŠ¡å™¨ï¼Œæ¯”å¦‚CentOSã€ubuntuç­‰ã€‚</p><p>2.é€‰æ‹©WebæœåŠ¡å™¨ï¼Œæ¯”å¦‚Nginxã€Apacheã€Tomcatç­‰ã€‚</p><p>3.ç‹¬ç«‹åŸŸåè´­ä¹°ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ã€‚<br><a id="more"></a></p><h3 id="webæœåŠ¡å™¨æ„å»º"><a href="#webæœåŠ¡å™¨æ„å»º" class="headerlink" title="webæœåŠ¡å™¨æ„å»º"></a>webæœåŠ¡å™¨æ„å»º</h3><p>linuxä¸‹å®‰è£…nginxï¼Œyumä¸‹æ²¡æœ‰nginxæºï¼Œåœ¨epel-releaseä¸‹æœ‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆå®‰è£…epel-releaseæº</span></span><br><span class="line">yum install epel-release</span><br><span class="line"><span class="comment"># å®‰è£…nginx</span></span><br><span class="line">yum install nginx</span><br></pre></td></tr></table></figure></p><p>å¯è¾“å…¥ä¸‹é¢å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -V</span><br></pre></td></tr></table></figure></p><p>å®‰è£…ç¼–è¾‘å™¨vim<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vim</span><br></pre></td></tr></table></figure></p><p>å®‰è£…scp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openssh-client</span><br></pre></td></tr></table></figure></p><h3 id="ç½‘ç«™ä¸Šä¼ åˆ°æœåŠ¡å™¨"><a href="#ç½‘ç«™ä¸Šä¼ åˆ°æœåŠ¡å™¨" class="headerlink" title="ç½‘ç«™ä¸Šä¼ åˆ°æœåŠ¡å™¨"></a>ç½‘ç«™ä¸Šä¼ åˆ°æœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># local_dirä¸ºæœ¬åœ°ç›®å½•æ•°æ®</span></span><br><span class="line">scp -r local_dir user@ip:/remote_dir</span><br><span class="line"><span class="comment"># ç¤ºä¾‹å¦‚ä¸‹  å½“ä¸‹ç›®å½•æ‰€æœ‰æ•°æ®ä¸Šä¼ åˆ°è¿œç¨‹ç›®å½•/root/www</span></span><br><span class="line">scp -r ./* root@ip:/root/www</span><br></pre></td></tr></table></figure><h3 id="åŸŸåè´­ä¹°åŠè§£æ-é˜¿é‡Œäº‘ç›´æ¥ç”¨æ–°æ‰‹å¼•å¯¼"><a href="#åŸŸåè´­ä¹°åŠè§£æ-é˜¿é‡Œäº‘ç›´æ¥ç”¨æ–°æ‰‹å¼•å¯¼" class="headerlink" title="åŸŸåè´­ä¹°åŠè§£æ(é˜¿é‡Œäº‘ç›´æ¥ç”¨æ–°æ‰‹å¼•å¯¼)"></a>åŸŸåè´­ä¹°åŠè§£æ(é˜¿é‡Œäº‘ç›´æ¥ç”¨æ–°æ‰‹å¼•å¯¼)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ·»åŠ wwwå’Œ@è®°å½•</span><br><span class="line"></span><br><span class="line">è®°å½•å€¼ï¼šå…¬ç½‘IPåœ°å€</span><br></pre></td></tr></table></figure><p>å¦‚ä»¥ä¸Šæ“ä½œæ­¥éª¤æ— è¯¯ï¼Œä¾¿å¯æ ¹æ®è´­ä¹°çš„åŸŸåè®¿é—®ç›¸å…³ç½‘ç«™ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¡¹ç›®ä¸Šçº¿æµç¨‹&lt;/p&gt;
&lt;p&gt;1.é€‰æ‹©æœåŠ¡å™¨ï¼Œæ¯”å¦‚CentOSã€ubuntuç­‰ã€‚&lt;/p&gt;
&lt;p&gt;2.é€‰æ‹©WebæœåŠ¡å™¨ï¼Œæ¯”å¦‚Nginxã€Apacheã€Tomcatç­‰ã€‚&lt;/p&gt;
&lt;p&gt;3.ç‹¬ç«‹åŸŸåè´­ä¹°ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>shellè„šæœ¬å®ä¾‹å…¥é—¨ç²¾é€‰ç³»åˆ—</title>
    <link href="https://annecoding.github.io/2019/05/15/shell%E8%84%9A%E6%9C%AC%E7%BB%83%E4%B9%A0/"/>
    <id>https://annecoding.github.io/2019/05/15/shellè„šæœ¬ç»ƒä¹ /</id>
    <published>2019-05-15T01:23:41.000Z</published>
    <updated>2019-09-01T04:58:06.942Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç "><a href="#è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç " class="headerlink" title="è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç "></a>è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç </h3><p>ç»™å®šä¸€ä¸ªåŒ…å«ç”µè¯å·ç åˆ—è¡¨ï¼ˆä¸€è¡Œä¸€ä¸ªç”µè¯å·ç ï¼‰çš„æ–‡æœ¬æ–‡ä»¶ <code>file.txt</code>ï¼Œå†™ä¸€ä¸ª bash è„šæœ¬è¾“å‡ºæ‰€æœ‰æœ‰æ•ˆçš„ç”µè¯å·ç ã€‚<br><a id="more"></a><br>ä½ å¯ä»¥å‡è®¾ä¸€ä¸ªæœ‰æ•ˆçš„ç”µè¯å·ç å¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸¤ç§æ ¼å¼ï¼š (xxx) xxx-xxxx æˆ– xxx-xxx-xxxxã€‚ï¼ˆx è¡¨ç¤ºä¸€ä¸ªæ•°å­—ï¼‰</p><p>ä½ ä¹Ÿå¯ä»¥å‡è®¾æ¯è¡Œå‰åæ²¡æœ‰å¤šä½™çš„ç©ºæ ¼å­—ç¬¦ã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><p>å‡è®¾ <code>file.txt</code> å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">987-123-4567</span><br><span class="line">123 456 7890</span><br><span class="line">(123) 456-7890</span><br></pre></td></tr></table></figure><p>ä½ çš„è„šæœ¬åº”å½“è¾“å‡ºä¸‹åˆ—æœ‰æ•ˆçš„ç”µè¯å·ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">987-123-4567</span><br><span class="line">(123) 456-7890</span><br></pre></td></tr></table></figure><p>å®ç°è„šæœ¬å¦‚ä¸‹ï¼š</p><p>æ–¹æ³•ä¸€ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n -r <span class="string">'/^([0-9]&#123;3&#125;-|\([0-9]&#123;3&#125;\) )[0-9]&#123;3&#125;-[0-9]&#123;4&#125;$/p'</span> file.txt</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•äºŒï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -P <span class="string">'^(\d&#123;3&#125;-|\(\d&#123;3&#125;\) )\d&#123;3&#125;-\d&#123;4&#125;$'</span> file.txt</span><br><span class="line"><span class="comment"># \d ç­‰ä»·äº [0-9]  è¯•éªŒç»“æœ[0-9]æ›´å¿«</span></span><br><span class="line">grep -P <span class="string">'^([0-9]&#123;3&#125;-|\([0-9]&#123;3&#125;\) )[0-9]&#123;3&#125;-[0-9]&#123;4&#125;$'</span> file.txt</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•ä¸‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'/^([0-9]&#123;3&#125;-|\([0-9]&#123;3&#125;\) )[0-9]&#123;3&#125;-[0-9]&#123;4&#125;$/'</span> file.txt</span><br></pre></td></tr></table></figure></p><p><strong>å…¶ä»–å‚è€ƒ</strong></p><ul><li><a href="https://blog.csdn.net/yufenghyc/article/details/51078107" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼BREs,EREs,PREsçš„æ¯”è¾ƒ</a></li></ul><h3 id="æ‰“å°æ–‡ä»¶ç¬¬åè¡Œ"><a href="#æ‰“å°æ–‡ä»¶ç¬¬åè¡Œ" class="headerlink" title="æ‰“å°æ–‡ä»¶ç¬¬åè¡Œ"></a>æ‰“å°æ–‡ä»¶ç¬¬åè¡Œ</h3><p>ç»™å®šä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ <code>file.txt</code>ï¼Œè¯·åªæ‰“å°è¿™ä¸ªæ–‡ä»¶ä¸­çš„ç¬¬åè¡Œã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><p>å‡è®¾ <code>file.txt</code> æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Line 1</span><br><span class="line">Line 2</span><br><span class="line">Line 3</span><br><span class="line">Line 4</span><br><span class="line">Line 5</span><br><span class="line">Line 6</span><br><span class="line">Line 7</span><br><span class="line">Line 8</span><br><span class="line">Line 9</span><br><span class="line">Line 10</span><br></pre></td></tr></table></figure><p>ä½ çš„è„šæœ¬åº”å½“æ˜¾ç¤ºç¬¬åè¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Line 10</span><br></pre></td></tr></table></figure><p>å®ç°è„šæœ¬å¦‚ä¸‹ï¼š<br>æ–¹æ³•ä¸€ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read from the file file.txt and output the tenth line to stdout.</span></span><br><span class="line">sed -n <span class="string">'10p'</span> file.txt</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•äºŒï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'10&#123;p;q&#125;'</span> file.txt</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•ä¸‰ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">"NR==10"</span> file.txt</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•å››ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file.txt | awk <span class="string">'NR==10'</span></span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•äº”:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat file.txt | head -10 | tail -1</span><br></pre></td></tr></table></figure></p><h3 id="centosä¸‹å¸¸ç”¨å‚æ•°"><a href="#centosä¸‹å¸¸ç”¨å‚æ•°" class="headerlink" title="centosä¸‹å¸¸ç”¨å‚æ•°"></a>centosä¸‹å¸¸ç”¨å‚æ•°</h3><p>1.æå–IPåœ°å€<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig  | grep inet | grep -v 127.0.0.1 | grep -v inet6| awk -F <span class="string">' '</span> <span class="string">'&#123;print $2&#125;'</span></span><br></pre></td></tr></table></figure></p><p>2.æ ¼å¼åŒ–æ—¥æœŸ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DATE=$(date +%F<span class="string">" "</span>%H:%M)</span><br></pre></td></tr></table></figure></p><p>3.å†…å­˜ç©ºé—²æƒ…å†µæŸ¥è¯¢<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TOTAL=$(free -m | awk <span class="string">'/Mem/&#123;print $2&#125;'</span>)</span><br><span class="line">USE=$(free -m | awk <span class="string">'/Mem/&#123;print $3+$6&#125;'</span>)</span><br><span class="line">FREE=$((<span class="variable">$TOTAL</span>-<span class="variable">$USE</span>))</span><br></pre></td></tr></table></figure></p><p>4.ç£ç›˜å‚æ•°<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TOTAL=$(fdisk -l | grep Disk | awk -F <span class="string">'[ ,]'</span> <span class="string">'NR==1&#123;print $2,$3,$4,$5&#125;'</span>)</span><br><span class="line">PART_USE=$(df -h | grep <span class="string">"/dev/vda1"</span> | awk -F <span class="string">'[ %]+'</span> <span class="string">'&#123;print $1,$5,$6&#125;'</span>)</span><br></pre></td></tr></table></figure></p><p>5.æŸ¥çœ‹ç½‘ç»œè¿æ¥æƒ…å†µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo awk <span class="string">'&#123;print $1&#125;'</span> |sort|uniq -c|sort -nr |head -10 /var/<span class="built_in">log</span>/auth.log</span><br></pre></td></tr></table></figure><p>6.æŒ‰è¿æ¥æ•°æŸ¥çœ‹å®¢æˆ·ç«¯ipï¼Œæ ¹æ®ipåˆ†ç»„è®¡æ•°<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -ntu | awk <span class="string">'&#123;print $5&#125;'</span> | cut -d: -f1 | sort | uniq -c</span><br><span class="line">      1 100.100.30.25</span><br><span class="line">      2 112.213.179.149</span><br><span class="line">      1 173.255.234.138</span><br><span class="line">      1 47.52.207.198</span><br><span class="line">      1 47.93.222.200</span><br></pre></td></tr></table></figure></p><p><strong>å…¶ä»–å‚è€ƒ</strong></p><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNTM5Njk3Mw==&amp;mid=2247486313&amp;idx=1&amp;sn=8dc03304760321212b19b4528d117236&amp;chksm=9b1c0bebac6b82fd0efd966c4bf6a43e0c9d38fbdd6c19441f061e811e454b6232f412daec7f&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">Shellåˆ†ææœåŠ¡å™¨æ—¥å¿—ï¼Œè§£é”å„ç§æ–°å§¿åŠ¿</a></li></ul><h3 id="æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ"><a href="#æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ" class="headerlink" title="æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ"></a>æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ</h3><p><strong>ç¤ºä¾‹</strong>ï¼šæ£€æµ‹sshæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œæœ‰å¤šç§æ–¹æ³•ï¼Œè¿™é‡Œåªåˆ—ä¸¾ä¸€ç§ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat service.sh </span><br><span class="line"><span class="comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€çš„è„šæœ¬</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># ss -anu æŸ¥çœ‹æ‰€æœ‰udpè¿æ¥</span></span><br><span class="line">PORT_C=$(ss -anu | grep -c 123)</span><br><span class="line">PS_C=$(ps -ef | grep sshd | grep -vc grep)</span><br><span class="line"><span class="comment"># ifä¸­-o  å¸ƒå°”è¿ç®—ä¸­çš„æˆ–è¿ç®—  åªè¦ä¸€ä¸ªä¸ºtrueåˆ™éƒ½ä¸ºtrue</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$PORT_C</span> -eq 0 -o <span class="variable">$PS_C</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"sshdå¯åŠ¨å¤±è´¥"</span> | mail -s <span class="string">"sshæœåŠ¡"</span> annecoding@163.com</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"sshå¯åŠ¨æˆåŠŸ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./service.sh </span><br><span class="line">sshå¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure></p><h3 id="æ£€æŸ¥ä¸»æœºå­˜æ´»çŠ¶æ€"><a href="#æ£€æŸ¥ä¸»æœºå­˜æ´»çŠ¶æ€" class="headerlink" title="æ£€æŸ¥ä¸»æœºå­˜æ´»çŠ¶æ€"></a>æ£€æŸ¥ä¸»æœºå­˜æ´»çŠ¶æ€</h3><p>1.å°†é”™è¯¯æ¬¡æ•°å­˜æ”¾åœ¨æ•°ç»„é‡Œé¢,ä»¥æ­¤æ¥åˆ¤æ–­ä¸»æœºå­˜æ´»çŠ¶æ€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ä¸»æœºå­˜æ´»çŠ¶æ€</span></span><br><span class="line">$ cat hostacting.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">IP_LIST=<span class="string">"114.112.114.114 1.2.4.8"</span></span><br><span class="line"><span class="keyword">for</span> IP <span class="keyword">in</span> <span class="variable">$IP_LIST</span>;<span class="keyword">do</span></span><br><span class="line">        NUM=1</span><br><span class="line">        <span class="keyword">while</span> [ <span class="variable">$NUM</span> -le 3 ]</span><br><span class="line">        <span class="keyword">do</span> </span><br><span class="line">                <span class="keyword">if</span> ping -c 1 <span class="variable">$IP</span> &gt; /dev/null;<span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">"<span class="variable">$IP</span> Ping is successful."</span></span><br><span class="line">                        <span class="built_in">break</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                <span class="comment"># pingä¸‰æ¬¡ï¼Œç»Ÿè®¡å¤±è´¥çš„æ¬¡æ•°</span></span><br><span class="line">                        FAIL_COUNT[<span class="variable">$NUM</span>]=<span class="variable">$IP</span></span><br><span class="line">                        <span class="built_in">let</span> NUM++</span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="comment"># </span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"fail_countï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º//3ï¼‰: <span class="variable">$&#123;#FAIL_COUNT[*]&#125;</span>"</span></span><br><span class="line">        <span class="comment"># echo "failcount1ï¼ˆæ•°ç»„å…ƒç´ ä¸º//IPåœ°å€ï¼‰: $&#123;FAIL_COUNT[1]&#125;"</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$&#123;#FAIL_COUNT[*]&#125;</span> -eq 3 ];<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;FAIL_COUNT[1]&#125;</span> Ping is failure!!!"</span></span><br><span class="line">                <span class="comment"># æ¸…ç©ºæ•°ç»„</span></span><br><span class="line">                <span class="built_in">unset</span> FAIL_COUNT[*]</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ./hostacting.sh   </span><br><span class="line"><span class="comment"># fail_countï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º//3ï¼‰: 3</span></span><br><span class="line">114.112.114.114 Ping is failure!!!</span><br><span class="line">1.2.4.8 Ping is successful. </span><br><span class="line"><span class="comment"># fail_countï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º//3ï¼‰: 0</span></span><br></pre></td></tr></table></figure></p><p>2.é€šè¿‡è®¡æ•°åˆ¤æ–­ä¸»æœºå­˜æ´»çŠ¶æ€<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ cat hostacting1.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">IP_LIST=<span class="string">"114.114.114.114 124.123.12.134"</span></span><br><span class="line"><span class="keyword">for</span> IP <span class="keyword">in</span> <span class="variable">$IP_LIST</span>;<span class="keyword">do</span></span><br><span class="line">        FAIL_COUNT=0</span><br><span class="line">        <span class="keyword">for</span>((i=1;i&lt;=3;i++));<span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span> ping -c 1 <span class="variable">$IP</span> &gt;/dev/null;<span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">"<span class="variable">$IP</span> Ping is successful."</span></span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">                <span class="keyword">else</span> </span><br><span class="line">                        <span class="built_in">let</span> FAIL_COUNT++</span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$FAIL_COUNT</span> -eq 3 ];<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"<span class="variable">$IP</span> Ping is failure!!!"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./hostacting1.sh </span><br><span class="line">114.114.114.114 Ping is successful.</span><br><span class="line">124.123.12.134 Ping is failure!!!</span><br></pre></td></tr></table></figure></p><p>3.é€šè¿‡è·³å‡ºå¾ªç¯çš„æ–¹å¼æ¥åˆ¤æ–­ä¸»æœºå­˜æ´»çŠ¶æ€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ cat hostacting2.sh </span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="function"><span class="title">ping_success_status</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span> ping -c 1 <span class="variable">$IP</span> &gt;/dev/null;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$IP</span> Ping is successful."</span></span><br><span class="line">        <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">IP_LIST=<span class="string">"114.114.114.114 123.13.13.23"</span></span><br><span class="line"><span class="keyword">for</span> IP <span class="keyword">in</span> <span class="variable">$IP_LIST</span>;<span class="keyword">do</span></span><br><span class="line">        ping_success_status</span><br><span class="line">        ping_success_status</span><br><span class="line">        ping_success_status</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$IP</span> Ping is failure!!!"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./hostacting2.sh   </span><br><span class="line">114.114.114.114 Ping is successful.</span><br><span class="line">123.13.13.23 Ping is successful.</span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨vmstatå·¥å…·æ¥åˆ†æCPUçš„ç»Ÿè®¡ä¿¡æ¯"><a href="#ä½¿ç”¨vmstatå·¥å…·æ¥åˆ†æCPUçš„ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="ä½¿ç”¨vmstatå·¥å…·æ¥åˆ†æCPUçš„ç»Ÿè®¡ä¿¡æ¯"></a>ä½¿ç”¨vmstatå·¥å…·æ¥åˆ†æCPUçš„ç»Ÿè®¡ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ cat cpu.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">DATE=$(date +%F<span class="string">" "</span>%H:%M)</span><br><span class="line">IP=$(ifconfig | grep inet | grep -v 127.0.0.1 | grep -v inet6 | awk -F <span class="string">" "</span> <span class="string">'&#123;print $2&#125;'</span> )</span><br><span class="line">MAIL=<span class="string">"annecoding@163.com"</span></span><br><span class="line"><span class="comment"># å¦‚æœvmstatä¸å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">which</span> vmstat &amp;&gt;/dev/null;<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"vmstat command no found,Please install procps package."</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># NR==3 å–ç¬¬ä¸‰è¡Œ</span></span><br><span class="line">US=$(vmstat | awk <span class="string">'NR==3&#123;print $13&#125;'</span>)</span><br><span class="line">SY=$(vmstat | awk <span class="string">'NR==3&#123;print $14&#125;'</span>)</span><br><span class="line">IDLE=$(vmstat | awk <span class="string">'NR==3&#123;print $15&#125;'</span>)</span><br><span class="line">WAIT=$(vmstat | awk <span class="string">'NR==3&#123;print $16&#125;'</span>)</span><br><span class="line">USE=$((<span class="variable">$US</span>+<span class="variable">$SY</span>))</span><br><span class="line"><span class="comment"># echo "use:$USE"</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USE</span> -ge 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"</span></span><br><span class="line"><span class="string">        Date: <span class="variable">$DATE</span></span></span><br><span class="line"><span class="string">        Host: <span class="variable">$IP</span></span></span><br><span class="line"><span class="string">        Problem: CPU utilization <span class="variable">$USE</span></span></span><br><span class="line"><span class="string">        "</span> | mail -s <span class="string">"CPU Monitor"</span> <span class="variable">$MAIL</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ./cpu.sh </span><br><span class="line"></span><br><span class="line">        Date: 2019-08-20 09:01</span><br><span class="line">        Host: 172.17.104.191</span><br><span class="line">        Problem: CPU utilization 0</span><br></pre></td></tr></table></figure></p><h3 id="ä½¿ç”¨freeåˆ†æå†…å­˜ä¿¡æ¯"><a href="#ä½¿ç”¨freeåˆ†æå†…å­˜ä¿¡æ¯" class="headerlink" title="ä½¿ç”¨freeåˆ†æå†…å­˜ä¿¡æ¯"></a>ä½¿ç”¨freeåˆ†æå†…å­˜ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cat memory.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–æ—¥æœŸ åé¢ä¸èƒ½æœ‰ç©ºæ ¼</span></span><br><span class="line">DATE=$(date +%F<span class="string">" "</span>%H:%M)</span><br><span class="line">MAIL=<span class="string">"annecoding@163.com"</span></span><br><span class="line"><span class="comment"># è·å–IPåœ°å€</span></span><br><span class="line">IP=$(ifconfig | grep inet | grep -v 127.0.0.1 | grep -v inet6 | awk -F <span class="string">' '</span> <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line"><span class="comment"># awk '/Mem/' æ¨¡å¼åŒ¹é…  åŒ¹é…åŒ…å«Memçš„ä¸€è¡Œ</span></span><br><span class="line">TOTAL=$(free -m | awk <span class="string">'/Mem/&#123;print $2&#125;'</span>)</span><br><span class="line">USE=$(free -m | awk <span class="string">'/Mem/&#123;print $3+$6&#125;'</span>)</span><br><span class="line">FREE=$((<span class="variable">$TOTAL</span>-<span class="variable">$USE</span>))</span><br><span class="line"><span class="comment"># å†…å­˜å°äº1.0Gè¾“å‡ºä¿¡æ¯</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$FREE</span> -lt 1024 ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"</span></span><br><span class="line"><span class="string">Date: <span class="variable">$DATE</span></span></span><br><span class="line"><span class="string">Host: <span class="variable">$IP</span></span></span><br><span class="line"><span class="string">Problem:Total=<span class="variable">$TOTAL</span>,Use=<span class="variable">$USE</span>,Free=<span class="variable">$FREE</span></span></span><br><span class="line"><span class="string">"</span> | mail -s <span class="string">"Memory Monitor"</span> <span class="variable">$MAIL</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./memory.sh </span><br><span class="line">Date: 2019-08-20 09:02</span><br><span class="line">Host: 172.17.104.191</span><br><span class="line">Problem:Total=1839,Use=890,Free=949</span><br></pre></td></tr></table></figure></p><h3 id="ç›‘æ§ç£ç›˜åˆ©ç”¨"><a href="#ç›‘æ§ç£ç›˜åˆ©ç”¨" class="headerlink" title="ç›‘æ§ç£ç›˜åˆ©ç”¨"></a>ç›‘æ§ç£ç›˜åˆ©ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cat fdisk.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">DATE=$(date +%F<span class="string">" "</span>%H:%M)</span><br><span class="line"><span class="comment"># grep -v è¡¨ç¤ºå–ååŒ¹é…</span></span><br><span class="line">IP=$(ifconfig | grep inet | grep -v 127.0.0.1 | grep -v inet6 | awk -F <span class="string">' '</span> <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line"><span class="comment"># MAIL="example@email.com"</span></span><br><span class="line">TOTAL=$(fdisk -l | grep Disk | awk -F <span class="string">'[ ,]'</span> <span class="string">'NR==1&#123;print $2,$3,$4,$5&#125;'</span>)</span><br><span class="line">PART_USE=$(df -h | grep <span class="string">"/dev/vda1"</span> | awk -F <span class="string">'[ %]+'</span> <span class="string">'&#123;print $1,$5,$6&#125;'</span>)</span><br><span class="line">PART=$(<span class="built_in">echo</span> <span class="variable">$PART_USE</span> | cut -d <span class="string">" "</span> -f1)</span><br><span class="line">USE=$(<span class="built_in">echo</span> <span class="variable">$PART_USE</span> | cut -d <span class="string">" "</span> -f2)</span><br><span class="line">MOUNT=$(<span class="built_in">echo</span> <span class="variable">$PART_USE</span> | cut -d <span class="string">" "</span> -f3)</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$USE</span> -gt 3 ];<span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"</span></span><br><span class="line"><span class="string">        Date: <span class="variable">$DATE</span></span></span><br><span class="line"><span class="string">        Host: <span class="variable">$IP</span></span></span><br><span class="line"><span class="string">        Total: <span class="variable">$TOTAL</span></span></span><br><span class="line"><span class="string">        Problem: <span class="variable">$PART</span>'å·²ä½¿ç”¨:'<span class="variable">$USE</span>%</span></span><br><span class="line"><span class="string">        "</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./fdisk.sh </span><br><span class="line"></span><br><span class="line">        Date: 2019-08-20 11:20</span><br><span class="line">        Host: 172.17.104.191</span><br><span class="line">        Total: /dev/vda: 42.9 GB </span><br><span class="line">        Problem: /dev/vda1<span class="string">'å·²ä½¿ç”¨:'</span>5%</span><br></pre></td></tr></table></figure></p><h3 id="åˆ¤æ–­urlå¯ç”¨æ€§"><a href="#åˆ¤æ–­urlå¯ç”¨æ€§" class="headerlink" title="åˆ¤æ–­urlå¯ç”¨æ€§"></a>åˆ¤æ–­urlå¯ç”¨æ€§</h3><p>1.åˆ¤æ–­ä¸‰æ¬¡URLå¯ç”¨æ€§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ cat check_url.sh </span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="function"><span class="title">check_url</span></span>()&#123;</span><br><span class="line">        <span class="comment"># curl</span></span><br><span class="line">        <span class="comment"># -o æŠŠè¾“å‡ºå†™åˆ°æ–‡ä»¶ä¸­ </span></span><br><span class="line">        <span class="comment"># --connect-timeout è®¾ç½®æœ€å¤§è¯·æ±‚æ—¶é—´</span></span><br><span class="line">        <span class="comment"># -s é™é»˜æ¨¡å¼ï¼Œä¸è¾“å‡ºä»»ä½•ä¸œè¥¿</span></span><br><span class="line">        <span class="comment"># -w ä»€ä¹ˆè¾“å‡ºå®Œæˆå</span></span><br><span class="line">        <span class="comment"># $1 å‡½æ•°å–ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™é‡Œå–$URL</span></span><br><span class="line">        HTTP_CODE=$(curl -o /dev/null --connect-timeout 3 -s -w <span class="string">"%&#123;http_code&#125;"</span>  <span class="variable">$1</span>)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$HTTP_CODE</span> -eq 200 ];<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Suprise:<span class="variable">$URL</span> Access success."</span></span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">URL_LIST=<span class="string">"www.baidu.com  www.google.com www.1211111111111.com"</span></span><br><span class="line"><span class="keyword">for</span> URL <span class="keyword">in</span> <span class="variable">$URL_LIST</span> ;<span class="keyword">do</span></span><br><span class="line">        check_url <span class="variable">$URL</span></span><br><span class="line">        check_url <span class="variable">$URL</span></span><br><span class="line">        check_url <span class="variable">$URL</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Warning: <span class="variable">$URL</span> Access failure!"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./check_url.sh </span><br><span class="line">Suprise:www.baidu.com Access success.</span><br><span class="line">Warning: www.google.com Access failure!</span><br><span class="line">Warning: www.1211111111111.com Access failure!</span><br></pre></td></tr></table></figure></p><p>2.é€šè¿‡å°†é”™è¯¯ä¿å­˜åœ¨æ•°ç»„åˆ¤æ–­urlå­˜æ´»<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat check_url1.sh </span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">URL_LIST=<span class="string">"www.baidu.com www.1233333311111.com  www.sougou.com"</span></span><br><span class="line"><span class="keyword">for</span> URL <span class="keyword">in</span> <span class="variable">$URL_LIST</span></span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">        FAIL_COUNT=0</span><br><span class="line">        <span class="keyword">for</span>((i=1;i&lt;=3;i++))</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                HTTP_CODE=$(curl -o /dev/null --connect-timeout 3 -s -w <span class="string">"%&#123;http_code&#125;"</span> <span class="variable">$URL</span>)</span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$HTTP_CODE</span> -ne 200 ];<span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">let</span> FAIL_COUNT++</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">"Suprise: <span class="variable">$URL</span> access successful."</span></span><br><span class="line">                        <span class="built_in">break</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$FAIL_COUNT</span> -eq 3 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Warning: <span class="variable">$URL</span> access failure!"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./check_url1.sh</span><br><span class="line">Suprise: www.baidu.com access successful.</span><br><span class="line">Warning: www.1233333311111.com access failure!</span><br><span class="line">Suprise: www.sougou.com access successful.</span><br></pre></td></tr></table></figure></p><p>3.é€šè¿‡å°†é”™è¯¯ä¿å­˜åˆ°å˜é‡æ¥åˆ¤æ–­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cat check_url2.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">URL_LIST=<span class="string">"www.sougou.com www.anne1111111.com www.baidu.com"</span></span><br><span class="line"><span class="keyword">for</span> URL <span class="keyword">in</span> <span class="variable">$URL_LIST</span>;<span class="keyword">do</span> </span><br><span class="line">        NUM=1</span><br><span class="line">        <span class="keyword">while</span> [ <span class="variable">$NUM</span> -le 3 ];<span class="keyword">do</span></span><br><span class="line">                HTTP_CODE=$(curl -o /dev/null --connect-timeout 3 -s -w <span class="string">"%&#123;http_code&#125;"</span> <span class="variable">$URL</span>)</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$HTTP_CODE</span> -ne 200 ];<span class="keyword">then</span></span><br><span class="line">                <span class="comment"># åˆ›å»ºæ•°ç»„ï¼Œä»¥$NUMä¸ºä¸‹æ ‡,$URLä¸ºä¼ å…¥æ•°ç»„çš„å…ƒç´ </span></span><br><span class="line">                FAIL_COUNT[<span class="variable">$NUM</span>]=<span class="variable">$URL</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"array_value:<span class="variable">$&#123;FAIL_COUNT[*]&#125;</span>"</span></span><br><span class="line">                <span class="built_in">let</span> NUM++</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Suprise: <span class="variable">$URL</span> access success."</span></span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$&#123;#FAIL_COUNT[*]&#125;</span> -eq 3 ];<span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Warning: <span class="variable">$URL</span> access failure!"</span></span><br><span class="line">                <span class="comment"># æ¸…ç©ºæ•°ç»„</span></span><br><span class="line">                <span class="built_in">unset</span> FAIL_COUNT[*] </span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ./check_url2.sh  </span><br><span class="line">Suprise: www.sougou.com access success.</span><br><span class="line"><span class="comment"># array_value:www.anne1111111.com</span></span><br><span class="line"><span class="comment"># array_value:www.anne1111111.com www.anne1111111.com</span></span><br><span class="line"><span class="comment"># array_value:www.anne1111111.com www.anne1111111.com www.anne1111111.com</span></span><br><span class="line">Warning: www.anne1111111.com access failure!</span><br><span class="line">Suprise: www.baidu.com access success.</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç &quot;&gt;&lt;a href=&quot;#è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç &quot; class=&quot;headerlink&quot; title=&quot;è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç &quot;&gt;&lt;/a&gt;è¯»å–æœ‰æ•ˆçš„ç”µè¯å·ç &lt;/h3&gt;&lt;p&gt;ç»™å®šä¸€ä¸ªåŒ…å«ç”µè¯å·ç åˆ—è¡¨ï¼ˆä¸€è¡Œä¸€ä¸ªç”µè¯å·ç ï¼‰çš„æ–‡æœ¬æ–‡ä»¶ &lt;code&gt;file.txt&lt;/code&gt;ï¼Œå†™ä¸€ä¸ª bash è„šæœ¬è¾“å‡ºæ‰€æœ‰æœ‰æ•ˆçš„ç”µè¯å·ç ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
      <category term="Centos" scheme="https://annecoding.github.io/tags/Centos/"/>
    
      <category term="shell" scheme="https://annecoding.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>linuxåŸºç¡€çŸ¥è¯†ç²¾é€‰ç³»åˆ—</title>
    <link href="https://annecoding.github.io/2019/05/10/linux%E5%9F%BA%E7%A1%80/"/>
    <id>https://annecoding.github.io/2019/05/10/linuxåŸºç¡€/</id>
    <published>2019-05-10T01:26:39.000Z</published>
    <updated>2019-08-25T09:34:30.178Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸€äº›å…³äºlinuxæ“ä½œç³»ç»Ÿã€linuxè¯ç”Ÿç­‰ä¸€äº›èƒŒæ™¯çŸ¥è¯†åŠç®€å•ä»‹ç»ã€‚ä»¥åŠä¸€äº›linuxåŸºç¡€æ“ä½œå‘½ä»¤ã€‚<br><a id="more"></a></p><h2 id="ç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†"></a>ç¬¬ä¸€éƒ¨åˆ†</h2><h3 id="æ“ä½œç³»ç»Ÿç®€ä»‹"><a href="#æ“ä½œç³»ç»Ÿç®€ä»‹" class="headerlink" title="æ“ä½œç³»ç»Ÿç®€ä»‹"></a>æ“ä½œç³»ç»Ÿç®€ä»‹</h3><p>æˆ‘é€šè¿‡ä»¥ä¸‹å››ç‚¹ä»‹ç»ä»€ä¹ˆæ“ä½œç³»ç»Ÿï¼š</p><ul><li>æ“ä½œç³»ç»Ÿï¼ˆOperation Systemï¼Œç®€ç§°OSï¼‰æ˜¯ç®¡ç†è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„ç¨‹åºï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„å†…æ ¸ä¸åŸºçŸ³ï¼›</li><li>æ“ä½œç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è½¯ä»¶ç¨‹åº ï¼›</li><li>ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªä¸ç³»ç»Ÿäº¤äº’çš„æ“ä½œç•Œé¢ ï¼›</li><li>æ“ä½œç³»ç»Ÿåˆ†å†…æ ¸ä¸å¤–å£³ï¼ˆæˆ‘ä»¬å¯ä»¥æŠŠå¤–å£³ç†è§£æˆå›´ç»•ç€å†…æ ¸çš„åº”ç”¨ç¨‹åºï¼Œè€Œå†…æ ¸å°±æ˜¯èƒ½æ“ä½œç¡¬ä»¶çš„ç¨‹åºï¼‰ã€‚</li></ul><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5cei5yjfoj30hs0d5jrf.jpg" alt="img"></p><h3 id="æ“ä½œç³»ç»Ÿç®€å•åˆ†ç±»"><a href="#æ“ä½œç³»ç»Ÿç®€å•åˆ†ç±»" class="headerlink" title="æ“ä½œç³»ç»Ÿç®€å•åˆ†ç±»"></a>æ“ä½œç³»ç»Ÿç®€å•åˆ†ç±»</h3><ul><li><strong>Windows:</strong> ç›®å‰æœ€æµè¡Œçš„ä¸ªäººæ¡Œé¢æ“ä½œç³»ç»Ÿ ï¼Œä¸åšå¤šçš„ä»‹ç»ï¼Œå¤§å®¶éƒ½æ¸…æ¥šã€‚ </li><li><strong>Unixï¼š</strong> æœ€æ—©çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ .æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„åˆ†ç±»ï¼Œå±äºåˆ†æ—¶æ“ä½œç³»ç»Ÿã€‚Unix å¤§å¤šè¢«ç”¨åœ¨æœåŠ¡å™¨ã€å·¥ä½œç«™ï¼Œç°åœ¨ä¹Ÿæœ‰ç”¨åœ¨ä¸ªäººè®¡ç®—æœºä¸Šã€‚å®ƒåœ¨åˆ›å»ºäº’è”ç½‘ã€è®¡ç®—æœºç½‘ç»œæˆ–å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹æ–¹é¢å‘æŒ¥ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚</li><li><strong>Linux:</strong> Linuxæ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»Unixæ“ä½œç³»ç»Ÿ.Linuxå­˜åœ¨ç€è®¸å¤šä¸åŒçš„Linuxç‰ˆæœ¬ï¼Œä½†å®ƒä»¬éƒ½ä½¿ç”¨äº† <strong>Linuxå†…æ ¸</strong> ã€‚Linuxå¯å®‰è£…åœ¨å„ç§è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­ï¼Œæ¯”å¦‚æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€è·¯ç”±å™¨ã€è§†é¢‘æ¸¸æˆæ§åˆ¶å°ã€å°å¼è®¡ç®—æœºã€å¤§å‹æœºå’Œè¶…çº§è®¡ç®—æœºã€‚ä¸¥æ ¼æ¥è®²ï¼ŒLinuxè¿™ä¸ªè¯æœ¬èº«åªè¡¨ç¤ºLinuxå†…æ ¸ï¼Œä½†å®é™…ä¸Šäººä»¬å·²ç»ä¹ æƒ¯äº†ç”¨Linuxæ¥å½¢å®¹æ•´ä¸ªåŸºäºLinuxå†…æ ¸ï¼Œå¹¶ä¸”ä½¿ç”¨GNU å·¥ç¨‹å„ç§å·¥å…·å’Œæ•°æ®åº“çš„æ“ä½œç³»ç»Ÿã€‚</li></ul><h3 id="Linuxç®€ä»‹"><a href="#Linuxç®€ä»‹" class="headerlink" title="Linuxç®€ä»‹"></a>Linuxç®€ä»‹</h3><p>æˆ‘ä»¬ä¸Šé¢å·²ç»ä»‹ç»åˆ°äº†Linuxï¼Œæˆ‘ä»¬è¿™é‡Œåªå¼ºè°ƒä¸‰ç‚¹ã€‚</p><ul><li><strong>ç±»Unixç³»ç»Ÿï¼š</strong> Linuxæ˜¯ä¸€ç§è‡ªç”±ã€å¼€æ”¾æºç çš„ç±»ä¼¼Unixçš„æ“ä½œç³»ç»Ÿ </li><li><strong>Linuxå†…æ ¸ï¼š</strong> ä¸¥æ ¼æ¥è¯´ï¼ŒLinuxè¿™ä¸ªè¯æœ¬èº«åªè¡¨ç¤ºLinuxå†…æ ¸ </li><li><strong>Linuxä¹‹çˆ¶ï¼š</strong> ä¸€ä¸ªç¼–ç¨‹é¢†åŸŸçš„ä¼ å¥‡å¼äººç‰©ã€‚ä»–æ˜¯Linuxå†…æ ¸çš„æœ€æ—©ä½œè€…ï¼Œéšåå‘èµ·äº†è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‹…ä»»Linuxå†…æ ¸çš„é¦–è¦æ¶æ„å¸ˆä¸é¡¹ç›®åè°ƒè€…ï¼Œæ˜¯å½“ä»Šä¸–ç•Œæœ€è‘—åçš„ç”µè„‘ç¨‹åºå‘˜ã€é»‘å®¢ä¹‹ä¸€ã€‚ä»–è¿˜å‘èµ·äº†Gitè¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œå¹¶ä¸ºä¸»è¦çš„å¼€å‘è€…ã€‚ </li></ul><h3 id="Linuxè¯ç”Ÿç®€ä»‹"><a href="#Linuxè¯ç”Ÿç®€ä»‹" class="headerlink" title="Linuxè¯ç”Ÿç®€ä»‹"></a>Linuxè¯ç”Ÿç®€ä»‹</h3><ul><li>1991å¹´ï¼ŒèŠ¬å…°çš„ä¸šä½™è®¡ç®—æœºçˆ±å¥½è€…Linus Torvaldsç¼–å†™äº†ä¸€æ¬¾ç±»ä¼¼Minixçš„ç³»ç»Ÿï¼ˆåŸºäºå¾®å†…æ ¸æ¶æ„çš„ç±»Unixæ“ä½œç³»ç»Ÿï¼‰è¢«ftpç®¡ç†å‘˜å‘½åä¸ºLinux åŠ å…¥åˆ°è‡ªç”±è½¯ä»¶åŸºé‡‘çš„GNUè®¡åˆ’ä¸­;</li><li>Linuxä»¥ä¸€åªå¯çˆ±çš„ä¼é¹…ä½œä¸ºæ ‡å¿—ï¼Œè±¡å¾ç€æ•¢ä½œæ•¢ä¸ºã€çƒ­çˆ±ç”Ÿæ´»ã€‚</li></ul><h3 id="Linuxçš„åˆ†ç±»"><a href="#Linuxçš„åˆ†ç±»" class="headerlink" title="Linuxçš„åˆ†ç±»"></a>Linuxçš„åˆ†ç±»</h3><p><strong>Linuxæ ¹æ®åŸç”Ÿç¨‹åº¦ï¼Œåˆ†ä¸ºä¸¤ç§ï¼š</strong></p><p><strong>å†…æ ¸ç‰ˆæœ¬ï¼š</strong> Linuxä¸æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œä¸¥æ ¼æ¥è®²ï¼ŒLinuxåªæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸­çš„å†…æ ¸ã€‚å†…æ ¸æ˜¯ä»€ä¹ˆï¼Ÿå†…æ ¸å»ºç«‹äº†è®¡ç®—æœºè½¯ä»¶ä¸ç¡¬ä»¶ä¹‹é—´é€šè®¯çš„å¹³å°ï¼Œå†…æ ¸æä¾›ç³»ç»ŸæœåŠ¡ï¼Œæ¯”å¦‚æ–‡ä»¶ç®¡ç†ã€è™šæ‹Ÿå†…å­˜ã€è®¾å¤‡I/Oç­‰ï¼›</p><p><strong>å‘è¡Œç‰ˆæœ¬ï¼š</strong> ä¸€äº›ç»„ç»‡æˆ–å…¬å¸åœ¨å†…æ ¸ç‰ˆåŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘è€Œé‡æ–°å‘è¡Œçš„ç‰ˆæœ¬ã€‚Linuxå‘è¡Œç‰ˆæœ¬æœ‰å¾ˆå¤šç§ï¼ˆubuntuå’ŒCentOSç”¨çš„éƒ½å¾ˆå¤šï¼Œåˆå­¦å»ºè®®é€‰æ‹©CentOSï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g5cen2ffghj30r60d0400.jpg" alt="image-20190725212731888"></p><h3 id="Linuxæ–‡ä»¶ç³»ç»Ÿç®€ä»‹"><a href="#Linuxæ–‡ä»¶ç³»ç»Ÿç®€ä»‹" class="headerlink" title="Linuxæ–‡ä»¶ç³»ç»Ÿç®€ä»‹"></a>Linuxæ–‡ä»¶ç³»ç»Ÿç®€ä»‹</h3><p><strong>åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰è¢«æ“ä½œç³»ç»Ÿç®¡ç†çš„èµ„æºï¼Œä¾‹å¦‚ç½‘ç»œæ¥å£å¡ã€ç£ç›˜é©±åŠ¨å™¨ã€æ‰“å°æœºã€è¾“å…¥è¾“å‡ºè®¾å¤‡ã€æ™®é€šæ–‡ä»¶æˆ–æ˜¯ç›®å½•éƒ½è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</strong></p><p>ä¹Ÿå°±æ˜¯è¯´åœ¨LINUXç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼š<strong>ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶</strong>ã€‚å…¶å®è¿™æ˜¯UNIXå“²å­¦çš„ä¸€ä¸ªä½“ç°ï¼Œè€ŒLinuxæ˜¯é‡å†™UNIXè€Œæ¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ¦‚å¿µä¹Ÿå°±ä¼ æ‰¿äº†ä¸‹æ¥ã€‚åœ¨UNIXç³»ç»Ÿä¸­ï¼ŒæŠŠä¸€åˆ‡èµ„æºéƒ½çœ‹ä½œæ˜¯æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡ã€‚UNIXç³»ç»ŸæŠŠæ¯ä¸ªç¡¬ä»¶éƒ½çœ‹æˆæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šå¸¸ç§°ä¸ºè®¾å¤‡æ–‡ä»¶ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ç”¨è¯»å†™æ–‡ä»¶çš„æ–¹å¼å®ç°å¯¹ç¡¬ä»¶çš„è®¿é—®ã€‚</p><h3 id="æ–‡ä»¶ç±»å‹ä¸ç›®å½•ç»“æ„"><a href="#æ–‡ä»¶ç±»å‹ä¸ç›®å½•ç»“æ„" class="headerlink" title="æ–‡ä»¶ç±»å‹ä¸ç›®å½•ç»“æ„"></a>æ–‡ä»¶ç±»å‹ä¸ç›®å½•ç»“æ„</h3><p><strong>Linuxæ”¯æŒ5ç§æ–‡ä»¶ç±»å‹ ï¼š</strong></p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g5ceo6d7hsj30w40jiwq8.jpg" alt="image-20190725212839830"></p><p><strong>Linuxçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</strong></p><p>Linuxæ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„å±‚æ¬¡é²œæ˜ï¼Œå°±åƒä¸€æ£µå€’ç«‹çš„æ ‘ï¼Œæœ€é¡¶å±‚æ˜¯å…¶æ ¹ç›®å½•ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g5ceowfanjj30wy0cwjv9.jpg" alt="image-20190725212921239"></p><p><strong>å¸¸è§ç›®å½•è¯´æ˜ï¼š</strong></p><ul><li><strong>/binï¼š</strong> å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶(ls,cat,mkdirç­‰)ï¼Œå¸¸ç”¨å‘½ä»¤ä¸€èˆ¬éƒ½åœ¨è¿™é‡Œï¼›</li><li><strong>/etcï¼š</strong>  å­˜æ”¾ç³»ç»Ÿç®¡ç†å’Œé…ç½®æ–‡ä»¶ï¼›</li><li><strong>/homeï¼š</strong>  å­˜æ”¾æ‰€æœ‰ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œæ˜¯ç”¨æˆ·ä¸»ç›®å½•çš„åŸºç‚¹ï¼Œæ¯”å¦‚ç”¨æˆ·userçš„ä¸»ç›®å½•å°±æ˜¯/home/userï¼Œå¯ä»¥ç”¨~userè¡¨ç¤ºï¼›</li><li><strong>/usr ï¼š</strong> ç”¨äºå­˜æ”¾ç³»ç»Ÿåº”ç”¨ç¨‹åºï¼›</li><li><strong>/optï¼š</strong> é¢å¤–å®‰è£…çš„å¯é€‰åº”ç”¨ç¨‹åºåŒ…æ‰€æ”¾ç½®çš„ä½ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠtomcatç­‰éƒ½å®‰è£…åˆ°è¿™é‡Œï¼›</li><li><strong>/procï¼š</strong>  è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼Œæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ã€‚å¯ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ï¼›</li><li><strong>/rootï¼š</strong>    è¶…çº§ç”¨æˆ·ï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰çš„ä¸»ç›®å½•ï¼ˆç‰¹æƒé˜¶çº§^o^ï¼‰ï¼›</li><li><strong>/sbin:</strong>    å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootæ‰èƒ½è®¿é—®ã€‚è¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿçº§åˆ«çš„ç®¡ç†å‘½ä»¤å’Œç¨‹åºã€‚å¦‚ifconfigç­‰ï¼›</li><li><strong>/devï¼š</strong>    ç”¨äºå­˜æ”¾è®¾å¤‡æ–‡ä»¶ï¼›</li><li><strong>/mntï¼š</strong>    ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹ï¼Œç³»ç»Ÿæä¾›è¿™ä¸ªç›®å½•æ˜¯è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½å…¶ä»–çš„æ–‡ä»¶ç³»ç»Ÿï¼›</li><li><strong>/bootï¼š</strong>    å­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶ï¼›</li><li><strong>/lib ï¼š</strong>      å­˜æ”¾ç€å’Œç³»ç»Ÿè¿è¡Œç›¸å…³çš„åº“æ–‡ä»¶ ï¼›</li><li><strong>/tmpï¼š</strong>    ç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶ï¼Œæ˜¯å…¬ç”¨çš„ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç‚¹ï¼›</li><li><strong>/varï¼š</strong>    ç”¨äºå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æŸäº›å¤§æ–‡ä»¶çš„æº¢å‡ºåŒºï¼Œæ¯”æ–¹è¯´å„ç§æœåŠ¡çš„æ—¥å¿—æ–‡ä»¶ï¼ˆç³»ç»Ÿå¯åŠ¨æ—¥å¿—ç­‰ã€‚ï¼‰ç­‰ï¼›</li><li><strong>/lost+foundï¼š</strong>    è¿™ä¸ªç›®å½•å¹³æ—¶æ˜¯ç©ºçš„ï¼Œç³»ç»Ÿéæ­£å¸¸å…³æœºè€Œç•™ä¸‹â€œæ— å®¶å¯å½’â€çš„æ–‡ä»¶ï¼ˆwindowsä¸‹å«ä»€ä¹ˆ.chkï¼‰å°±åœ¨è¿™é‡Œã€‚</li></ul><h2 id="ç¬¬äºŒéƒ¨åˆ†"><a href="#ç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†"></a>ç¬¬äºŒéƒ¨åˆ†</h2><p>ä¸‹é¢å°†ä¸»è¦ä»‹ç»LinuxåŸºæœ¬å‘½ä»¤ã€‚</p><p>æ¨èä¸€ä¸ªLinuxå‘½ä»¤å¿«æŸ¥ç½‘ç«™ï¼Œéå¸¸ä¸é”™ï¼Œå¤§å®¶å¦‚æœé—å¿˜æŸäº›å‘½ä»¤æˆ–è€…å¯¹æŸäº›å‘½ä»¤ä¸ç†è§£éƒ½å¯ä»¥åœ¨è¿™é‡Œå¾—åˆ°è§£å†³ã€‚</p><p>Linuxå‘½ä»¤å¤§å…¨ï¼š<a href="http://man.linuxde.net/" target="_blank" rel="noopener">http://man.linuxde.net/</a><br>linuxå‘½ä»¤é€ŸæŸ¥ï¼š<a href="https://wangchujiang.com/linux-command/" target="_blank" rel="noopener">https://wangchujiang.com/linux-command/</a></p><h3 id="å‘½ä»¤åˆ‡æ¢å‘½ä»¤"><a href="#å‘½ä»¤åˆ‡æ¢å‘½ä»¤" class="headerlink" title="å‘½ä»¤åˆ‡æ¢å‘½ä»¤"></a>å‘½ä»¤åˆ‡æ¢å‘½ä»¤</h3><ul><li><strong>cd usrï¼š</strong> åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹usrç›®å½• </li><li><strong>cd ..ï¼ˆæˆ–cd../ï¼‰ï¼š</strong> åˆ‡æ¢åˆ°ä¸Šä¸€å±‚ç›®å½• </li><li><strong>cd /ï¼š</strong> åˆ‡æ¢åˆ°ç³»ç»Ÿæ ¹ç›®å½• </li><li><strong>cd ~ï¼š</strong> åˆ‡æ¢åˆ°ç”¨æˆ·ä¸»ç›®å½• </li><li><strong>cd -ï¼š</strong> åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ‰€åœ¨ç›®å½• </li></ul><h3 id="å‘½ä»¤çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰"><a href="#å‘½ä»¤çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰" class="headerlink" title="å‘½ä»¤çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰"></a>å‘½ä»¤çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</h3><p>1.<strong>mkdir ç›®å½•åç§°</strong>ï¼šå¢åŠ ç›®å½•</p><p>2.<strong>lsæˆ–è€…ll</strong>ï¼ˆ<code>ll</code>æ˜¯<code>ls -l</code>çš„ç¼©å†™ï¼Œ<code>ll</code>å‘½ä»¤ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼‰ï¼šæŸ¥çœ‹ç›®å½•ä¿¡æ¯</p><p>3.<strong>find ç›®å½• å‚æ•°</strong>ï¼šå¯»æ‰¾ç›®å½•ï¼ˆæŸ¥ï¼‰</p><p>ç¤ºä¾‹ï¼š </p><ul><li><p>åˆ—å‡ºå½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹: <code>find .</code></p></li><li><p>åœ¨/homeç›®å½•ä¸‹æŸ¥æ‰¾ä»¥.txtç»“å°¾çš„æ–‡ä»¶å:<code>find /home -name &quot;*.txt&quot;</code></p></li><li><p>åŒä¸Šï¼Œä½†å¿½ç•¥å¤§å°å†™:<code>find /home -iname &quot;*.txt&quot;</code></p></li><li><p>å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ä»¥<code>.txt</code>å’Œ<code>.pdf</code>ç»“å°¾çš„æ–‡ä»¶:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . \( -name <span class="string">"*.txt"</span> -o -name <span class="string">"*.pdf"</span> \)æˆ–find . -name <span class="string">"*.txt"</span> -o -name <span class="string">"*.pdf"</span></span><br></pre></td></tr></table></figure></li></ul><p>4.<strong>mv ç›®å½•åç§° æ–°ç›®å½•åç§°</strong>ï¼šä¿®æ”¹ç›®å½•çš„åç§°ï¼ˆæ”¹ï¼‰ </p><p>æ³¨æ„ï¼š<code>mv</code>çš„è¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé‡å‘½åè€Œä¸”ä¹Ÿå¯ä»¥å¯¹å„ç§æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰è¿›è¡Œ é‡å‘½åçš„æ“ä½œã€‚</p><p><code>mv</code>å‘½ä»¤ç”¨æ¥å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡æ–°å‘½åï¼Œæˆ–è€…å°†æ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚åé¢ä¼šä»‹ç»åˆ°<code>mv</code>å‘½ä»¤çš„å¦ä¸€ä¸ªç”¨æ³•ã€‚</p><p>5.<strong>mv ç›®å½•åç§° ç›®å½•çš„æ–°ä½ç½®</strong>ï¼šç§»åŠ¨ç›®å½•çš„ä½ç½®â€”å‰ªåˆ‡ï¼ˆæ”¹ï¼‰ </p><p>æ³¨æ„ï¼š<code>mv</code>è¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œå‰ªåˆ‡æ“ä½œï¼Œå¯¹æ–‡ä»¶å’Œå‹ç¼©åŒ…ç­‰éƒ½å¯æ‰§è¡Œå‰ªåˆ‡æ“ä½œã€‚å¦å¤–<code>mv</code>ä¸<code>cp</code>çš„ç»“æœä¸åŒï¼Œ<code>mv</code>å¥½åƒæ–‡ä»¶â€œæ¬å®¶â€ï¼Œæ–‡ä»¶ä¸ªæ•°å¹¶æœªå¢åŠ ã€‚è€Œ<code>cp</code>å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ï¼Œæ–‡ä»¶ä¸ªæ•°å¢åŠ äº†ã€‚</p><p>6.<strong>cp -r ç›®å½•åç§° ç›®å½•æ‹·è´çš„ç›®æ ‡ä½ç½®</strong>ï¼šæ‹·è´ç›®å½•ï¼ˆæ”¹ï¼‰ï¼Œ-rä»£è¡¨é€’å½’æ‹·è´ </p><p>æ³¨æ„ï¼š<code>cp</code>å‘½ä»¤ä¸ä»…å¯ä»¥æ‹·è´ç›®å½•è¿˜å¯ä»¥æ‹·è´æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰ï¼Œæ‹·è´æ–‡ä»¶å’Œå‹ç¼©åŒ…æ—¶ä¸ ç”¨å†™<code>-r</code>é€’å½’</p><p>7.<strong>rm [-rf] ç›®å½•</strong>: åˆ é™¤ç›®å½•ï¼ˆåˆ ï¼‰ </p><p>æ³¨æ„ï¼š<code>rm</code>ä¸ä»…å¯ä»¥åˆ é™¤ç›®å½•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å…¶ä»–æ–‡ä»¶æˆ–å‹ç¼©åŒ…ï¼Œä¸ºäº†å¢å¼ºå¤§å®¶çš„è®°å¿†ï¼Œ æ— è®ºåˆ é™¤ä»»ä½•ç›®å½•æˆ–æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä½¿ç”¨<code>rm -rf</code>ç›®å½•/æ–‡ä»¶/å‹ç¼©åŒ…</p><h3 id="æ–‡ä»¶çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰"><a href="#æ–‡ä»¶çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰" class="headerlink" title="æ–‡ä»¶çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰"></a>æ–‡ä»¶çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</h3><p>1.<strong>touch æ–‡ä»¶åç§°</strong>: æ–‡ä»¶çš„åˆ›å»ºï¼ˆå¢ï¼‰</p><p>2.<strong>cat/more/less/tailæ–‡ä»¶åç§°</strong>  æ–‡ä»¶çš„æŸ¥çœ‹ï¼ˆæŸ¥ï¼‰</p><ul><li><strong>cat</strong>ï¼šåªèƒ½æ˜¾ç¤ºæœ€åä¸€å±å†…å®¹</li><li><strong>more</strong>ï¼šå¯ä»¥æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼Œå›è½¦å¯ä»¥å‘ä¸‹ä¸€è¡Œï¼Œ ç©ºæ ¼å¯ä»¥å‘ä¸‹ä¸€é¡µï¼Œ<code>q</code>å¯ä»¥é€€å‡ºæŸ¥çœ‹</li><li><strong>less</strong>ï¼šå¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„<code>PgUp</code>å’Œ<code>PgDn</code>å‘ä¸Š å’Œå‘ä¸‹ç¿»é¡µï¼Œ<code>q</code>ç»“æŸæŸ¥çœ‹</li><li><strong>tail-10</strong> ï¼šæŸ¥çœ‹æ–‡ä»¶çš„å<code>10</code>è¡Œï¼Œ<code>Ctrl+C</code>ç»“æŸ</li></ul><p>æ³¨æ„ï¼šå‘½ä»¤ <code>tail -f</code>æ–‡ä»¶ å¯ä»¥å¯¹æŸä¸ªæ–‡ä»¶è¿›è¡ŒåŠ¨æ€ç›‘æ§ï¼Œä¾‹å¦‚<code>tomcat</code>çš„æ—¥å¿—æ–‡ä»¶ï¼Œ ä¼šéšç€ç¨‹åºçš„è¿è¡Œï¼Œæ—¥å¿—ä¼šå˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨<code>tail -f catalina-2016-11-11.log</code>ç›‘æ§ æ–‡ ä»¶çš„å˜åŒ–</p><p>3.<strong>vim æ–‡ä»¶</strong>ï¼šä¿®æ”¹æ–‡ä»¶çš„å†…å®¹ï¼ˆæ”¹ï¼‰</p><p>vimç¼–è¾‘å™¨æ˜¯Linuxä¸­çš„å¼ºå¤§ç»„ä»¶ï¼Œæ˜¯viç¼–è¾‘å™¨çš„åŠ å¼ºç‰ˆï¼Œvimç¼–è¾‘å™¨çš„å‘½ä»¤å’Œå¿«æ·æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½†æ­¤å¤„ä¸ä¸€ä¸€é˜è¿°ï¼Œå¤§å®¶ä¹Ÿæ— éœ€ç ”ç©¶çš„å¾ˆé€å½»ï¼Œä½¿ç”¨vimç¼–è¾‘ä¿®æ”¹æ–‡ä»¶çš„æ–¹å¼åŸºæœ¬ä¼šä½¿ç”¨å°±å¯ä»¥äº†ã€‚ </p><p><strong>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä½¿ç”¨vimç¼–è¾‘å™¨ä¸»è¦ä½œç”¨å°±æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€èˆ¬æ­¥éª¤ï¼š</strong> </p><p>vim æ–‡ä»¶â€”â€”&gt;è¿›å…¥æ–‡ä»¶â€”â€“&gt;å‘½ä»¤æ¨¡å¼â€”â€”&gt;æŒ‰<code>i</code>è¿›å…¥ç¼–è¾‘æ¨¡å¼â€”â€“&gt;ç¼–è¾‘æ–‡ä»¶ â€”â€”-&gt;æŒ‰<code>Esc</code>è¿›å…¥åº•è¡Œæ¨¡å¼â€”â€“&gt;è¾“å…¥<code>:wq/q!</code>ï¼ˆè¾“å…¥<code>wq</code>ä»£è¡¨å†™å…¥å†…å®¹å¹¶é€€å‡ºï¼Œå³ä¿å­˜ï¼›è¾“å…¥<code>q!</code>ä»£è¡¨å¼ºåˆ¶é€€å‡ºä¸ä¿å­˜ã€‚ï¼‰</p><p>å…¶ä»–å¸¸ç”¨æ¨¡å¼ï¼š</p><ul><li><code>G</code>ç”¨äºç›´æ¥è·³è½¬åˆ°æ–‡ä»¶å°¾</li><li><code>ZZ</code>ç”¨äºå­˜ç›˜é€€å‡ºVi</li><li><code>ZQ</code>ç”¨äºä¸å­˜ç›˜é€€å‡ºVi</li><li><code>/å’Œï¼Ÿ</code>ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²</li><li><code>n</code>ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</li><li><code>yy</code>å¤åˆ¶ä¸€è¡Œ</li><li><code>p</code>ç²˜å¸–åœ¨ä¸‹ä¸€è¡Œï¼ŒPç²˜è´´åœ¨å‰ä¸€è¡Œ</li><li><code>dd</code>åˆ é™¤ä¸€è¡Œæ–‡æœ¬</li><li><code>x</code>åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å­—ç¬¦</li><li><code>u</code>å–æ¶ˆä¸Šä¸€æ¬¡ç¼–è¾‘æ“ä½œï¼ˆundoï¼‰</li></ul><p>4.<strong>rm -rf æ–‡ä»¶</strong>ï¼šåˆ é™¤æ–‡ä»¶ï¼ˆåˆ ï¼‰ åŒç›®å½•åˆ é™¤ï¼šç†Ÿè®° rm -rfæ–‡ä»¶ å³å¯</p><h3 id="å‹ç¼©æ–‡ä»¶çš„æ“ä½œå‘½ä»¤"><a href="#å‹ç¼©æ–‡ä»¶çš„æ“ä½œå‘½ä»¤" class="headerlink" title="å‹ç¼©æ–‡ä»¶çš„æ“ä½œå‘½ä»¤"></a>å‹ç¼©æ–‡ä»¶çš„æ“ä½œå‘½ä»¤</h3><p><strong>1ï¼‰æ‰“åŒ…å¹¶å‹ç¼©æ–‡ä»¶ï¼š</strong></p><p>Linuxä¸­çš„æ‰“åŒ…æ–‡ä»¶ä¸€èˆ¬æ˜¯ä»¥<code>.tar</code>ç»“å°¾çš„ï¼Œå‹ç¼©çš„å‘½ä»¤ä¸€èˆ¬æ˜¯ä»¥<code>.gz</code>ç»“å°¾çš„ã€‚</p><p>è€Œä¸€èˆ¬æƒ…å†µä¸‹æ‰“åŒ…å’Œå‹ç¼©æ˜¯ä¸€èµ·è¿›è¡Œçš„ï¼Œæ‰“åŒ…å¹¶å‹ç¼©åçš„æ–‡ä»¶çš„åç¼€åä¸€èˆ¬<code>.tar.gz</code>ã€‚å‘½ä»¤ï¼š<code>tar -zcvf</code>æ‰“åŒ…å‹ç¼©åçš„æ–‡ä»¶å è¦æ‰“åŒ…å‹ç¼©çš„æ–‡ä»¶,å…¶ä¸­ï¼š</p><ul><li><p><code>z</code>ï¼šè°ƒç”¨<code>gzip</code>å‹ç¼©å‘½ä»¤è¿›è¡Œå‹ç¼©</p></li><li><p><code>c</code>ï¼šæ‰“åŒ…æ–‡ä»¶</p></li><li><p><code>v</code>ï¼šæ˜¾ç¤ºè¿è¡Œè¿‡ç¨‹</p></li><li><p><code>f</code>ï¼šæŒ‡å®šæ–‡ä»¶å</p></li></ul><p>æ¯”å¦‚ï¼šåŠ å…¥testç›®å½•ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯ :<code>aaa.txt bbb.txt ccc.txt</code>,å¦‚æœæˆ‘ä»¬è¦æ‰“åŒ…testç›®å½•å¹¶æŒ‡å®šå‹ç¼©åçš„å‹ç¼©åŒ…åç§°ä¸ºtest.tar.gzå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<code>tar -zcvf test.tar.gz aaa.txt bbb.txt ccc.txt</code>æˆ–ï¼š<code>tar -zcvf test.tar.gz /test/</code></p><p><strong>2ï¼‰è§£å‹å‹ç¼©åŒ…ï¼š</strong></p><p>å‘½ä»¤ï¼š<code>tar [-xvf] å‹ç¼©æ–‡ä»¶</code></p><p>å…¶ä¸­ï¼š<code>x</code>ï¼šä»£è¡¨è§£å‹</p><p>ç¤ºä¾‹ï¼š</p><p>1.å°†/testä¸‹çš„test.tar.gzè§£å‹åˆ°å½“å‰ç›®å½•ä¸‹å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<code>tar -xvf test.tar.gz</code></p><p>2.å°†/testä¸‹çš„test.tar.gzè§£å‹åˆ°æ ¹ç›®å½•/usrä¸‹:<code>tar -xvf xxx.tar.gz -C /usr</code>(-Cä»£è¡¨æŒ‡å®šè§£å‹çš„ä½ç½®ï¼‰</p><h3 id="Linuxçš„æƒé™å‘½ä»¤"><a href="#Linuxçš„æƒé™å‘½ä»¤" class="headerlink" title="Linuxçš„æƒé™å‘½ä»¤"></a>Linuxçš„æƒé™å‘½ä»¤</h3><p>æ“ä½œç³»ç»Ÿä¸­æ¯ä¸ªæ–‡ä»¶éƒ½æ‹¥æœ‰ç‰¹å®šçš„æƒé™ã€æ‰€å±ç”¨æˆ·å’Œæ‰€å±ç»„ã€‚æƒé™æ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥é™åˆ¶èµ„æºè®¿é—®çš„æœºåˆ¶ï¼Œåœ¨Linuxä¸­æƒé™ä¸€èˆ¬åˆ†ä¸ºè¯»(readable)ã€å†™(writable)å’Œæ‰§è¡Œ(excutable)ï¼Œåˆ†ä¸ºä¸‰ç»„ã€‚</p><p>åˆ†åˆ«å¯¹åº”æ–‡ä»¶çš„å±ä¸»(owner)ï¼Œå±ç»„(group)å’Œå…¶ä»–ç”¨æˆ·(other)ï¼Œé€šè¿‡è¿™æ ·çš„æœºåˆ¶æ¥é™åˆ¶å“ªäº›ç”¨æˆ·ã€å“ªäº›ç»„å¯ä»¥å¯¹ç‰¹å®šçš„æ–‡ä»¶è¿›è¡Œä»€ä¹ˆæ ·çš„æ“ä½œã€‚é€šè¿‡ <code>ls -l</code> å‘½ä»¤æˆ‘ä»¬å¯ä»¥ æŸ¥çœ‹æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</p><p>ç¤ºä¾‹ï¼šåœ¨éšæ„æŸä¸ªç›®å½•ä¸‹<code>ls -l</code></p><p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g5cx60784uj30tg0bak0v.jpg" alt="image-20190726080834499"></p><p>ç¬¬ä¸€åˆ—çš„å†…å®¹çš„è§£é‡Šä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5cx6tgachj30ou09oq6f.jpg" alt="image-20190726080921780"></p><p>ä¸‹é¢å°†è¯¦ç»†è®²è§£æ–‡ä»¶çš„ç±»å‹ã€Linuxä¸­æƒé™ä»¥åŠæ–‡ä»¶æœ‰æ‰€æœ‰è€…ã€æ‰€åœ¨ç»„ã€å…¶å®ƒç»„å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æ–‡ä»¶çš„ç±»å‹ï¼š</p><ul><li><strong>d</strong>ï¼šä»£è¡¨ç›®å½•</li><li><strong>-</strong>ï¼šä»£è¡¨æ–‡ä»¶</li><li><strong>l</strong>ï¼šä»£è¡¨é“¾æ¥ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯windowä¸­çš„å¿«æ·æ–¹å¼ï¼‰</li></ul><p>Linuxä¸­æƒé™åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><strong>r</strong>ï¼šä»£è¡¨æƒé™æ˜¯å¯è¯»ï¼Œrä¹Ÿå¯ä»¥ç”¨æ•°å­—4è¡¨ç¤º</li><li><strong>w</strong>ï¼šä»£è¡¨æƒé™æ˜¯å¯å†™ï¼Œwä¹Ÿå¯ä»¥ç”¨æ•°å­—2è¡¨ç¤º</li><li><strong>x</strong>ï¼šä»£è¡¨æƒé™æ˜¯å¯æ‰§è¡Œï¼Œxä¹Ÿå¯ä»¥ç”¨æ•°å­—1è¡¨ç¤º</li></ul><p>æ–‡ä»¶å’Œç›®å½•æƒé™çš„åŒºåˆ«ï¼š</p><p>å¯¹æ–‡ä»¶å’Œç›®å½•è€Œè¨€ï¼Œè¯»å†™æ‰§è¡Œè¡¨ç¤ºä¸åŒçš„æ„ä¹‰ã€‚</p><p>å¯¹äºæ–‡ä»¶ï¼š</p><table><thead><tr><th>æƒé™åç§°</th><th>å¯æ‰§è¡Œæ“ä½œ</th></tr></thead><tbody><tr><td>r</td><td>å¯ä»¥ä½¿ç”¨catæŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹</td></tr><tr><td>w</td><td>å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹</td></tr><tr><td>x</td><td>å¯ä»¥å°†å…¶è¿è¡Œä¸ºäºŒè¿›åˆ¶æ–‡ä»¶</td></tr></tbody></table><p>å¯¹äºç›®å½•ï¼š</p><table><thead><tr><th>æƒé™åç§°</th><th>å¯æ‰§è¡Œæ“ä½œ</th></tr></thead><tbody><tr><td>r</td><td>å¯ä»¥æŸ¥çœ‹ç›®å½•ä¸‹åˆ—è¡¨</td></tr><tr><td>w</td><td>å¯ä»¥åˆ›å»ºå’Œåˆ é™¤ç›®å½•ä¸‹æ–‡ä»¶</td></tr><tr><td>x</td><td>å¯ä»¥ä½¿ç”¨cdè¿›å…¥ç›®å½•</td></tr></tbody></table><p><strong>åœ¨linuxä¸­çš„æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚åœ¨linuxä¸­æ¯ä¸ªæ–‡ä»¶æœ‰æ‰€æœ‰è€…ã€æ‰€åœ¨ç»„ã€å…¶å®ƒç»„çš„æ¦‚å¿µã€‚</strong></p><ul><li><p><strong>æ‰€æœ‰è€…</strong><br>ä¸€èˆ¬ä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…ï¼Œè°åˆ›å»ºäº†è¯¥æ–‡ä»¶ï¼Œå°±å¤©ç„¶çš„æˆä¸ºè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œç”¨ls â€ahlå‘½ä»¤å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„æ‰€æœ‰è€… ä¹Ÿå¯ä»¥ä½¿ç”¨chown ç”¨æˆ·å æ–‡ä»¶åæ¥ä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€… ã€‚</p></li><li><p><strong>æ–‡ä»¶æ‰€åœ¨ç»„</strong><br>å½“æŸä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶åï¼Œè¿™ä¸ªæ–‡ä»¶çš„æ‰€åœ¨ç»„å°±æ˜¯è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç»„ ç”¨ls â€ahlå‘½ä»¤å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„æ‰€æœ‰ç»„ ä¹Ÿå¯ä»¥ä½¿ç”¨chgrp ç»„å æ–‡ä»¶åæ¥ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨çš„ç»„ã€‚</p></li><li><p><strong>å…¶å®ƒç»„</strong><br>é™¤å¼€æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œç³»ç»Ÿçš„å…¶å®ƒç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶å®ƒç»„<br>æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•ä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æƒé™ã€‚<br><strong>ä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æƒé™çš„å‘½ä»¤ï¼šchmod</strong><br>ç¤ºä¾‹ï¼šä¿®æ”¹/testä¸‹çš„aaa.txtçš„æƒé™ä¸ºå±ä¸»æœ‰å…¨éƒ¨æƒé™ï¼Œå±ä¸»æ‰€åœ¨çš„ç»„æœ‰è¯»å†™æƒé™ï¼Œ å…¶ä»–ç”¨æˆ·åªæœ‰è¯»çš„æƒé™<br><strong>chmod u=rwx,g=rw,o=r aaa.txt</strong><br><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5d76hd4jlj30h607wq7v.jpg" alt="image-20190726135501237"><br>ä¸Šè¿°ç¤ºä¾‹è¿˜å¯ä»¥ä½¿ç”¨æ•°å­—è¡¨ç¤ºï¼š<code>chmod 764 aaa.txt</code></p></li></ul><p><strong>è¡¥å……ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ä¸œè¥¿:</strong></p><p>å‡å¦‚æˆ‘ä»¬è£…äº†ä¸€ä¸ªzookeeperï¼Œæˆ‘ä»¬æ¯æ¬¡å¼€æœºåˆ°è¦æ±‚å…¶è‡ªåŠ¨å¯åŠ¨è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>1.æ–°å»ºä¸€ä¸ªè„šæœ¬zookeeper</p><p>2.ä¸ºæ–°å»ºçš„è„šæœ¬zookeeperæ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œå‘½ä»¤æ˜¯:<code>chmod +x zookeeper</code></p><p>3.æŠŠzookeeperè¿™ä¸ªè„šæœ¬æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹é‡Œé¢ï¼Œå‘½ä»¤æ˜¯ï¼š<code>chkconfig --add zookeeper</code></p><p>4.å¦‚æœæƒ³çœ‹çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œå‘½ä»¤æ˜¯ï¼š<code>chkconfig --list</code></p><h3 id="Linuxç”¨æˆ·ç®¡ç†"><a href="#Linuxç”¨æˆ·ç®¡ç†" class="headerlink" title="Linuxç”¨æˆ·ç®¡ç†"></a>Linuxç”¨æˆ·ç®¡ç†</h3><p>Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚</p><p>ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚</p><h3 id="Linuxç”¨æˆ·ç®¡ç†ç›¸å…³å‘½ä»¤"><a href="#Linuxç”¨æˆ·ç®¡ç†ç›¸å…³å‘½ä»¤" class="headerlink" title="Linuxç”¨æˆ·ç®¡ç†ç›¸å…³å‘½ä»¤"></a>Linuxç”¨æˆ·ç®¡ç†ç›¸å…³å‘½ä»¤</h3><ul><li><p><code>useradd é€‰é¡¹ ç”¨æˆ·å</code>:æ·»åŠ ç”¨æˆ·è´¦å·</p></li><li><p><code>userdel é€‰é¡¹ ç”¨æˆ·å</code>:åˆ é™¤ç”¨æˆ·å¸å·</p></li><li><p><code>usermod é€‰é¡¹ ç”¨æˆ·å</code>:ä¿®æ”¹å¸å·</p></li><li><p><code>passwd ç”¨æˆ·å</code>:æ›´æ”¹æˆ–åˆ›å»ºç”¨æˆ·çš„å¯†ç </p></li><li><p><code>passwd -S ç”¨æˆ·å</code>:æ˜¾ç¤ºç”¨æˆ·è´¦å·å¯†ç ä¿¡æ¯</p></li><li><p><code>passwd -d ç”¨æˆ·å</code>: æ¸…é™¤ç”¨æˆ·å¯†ç </p></li></ul><p><strong>useradd</strong>å‘½ä»¤ç”¨äºLinuxä¸­åˆ›å»ºçš„æ–°çš„ç³»ç»Ÿç”¨æˆ·ã€‚<strong>useradd</strong>å¯ç”¨æ¥å»ºç«‹ç”¨æˆ·å¸å·ã€‚å¸å·å»ºå¥½ä¹‹åï¼Œå†ç”¨<strong>passwd</strong>è®¾å®šå¸å·çš„å¯†ç ï¼è€Œå¯ç”¨<strong>userdel</strong>åˆ é™¤å¸å·ã€‚ä½¿ç”¨<strong>useradd</strong>æŒ‡ä»¤æ‰€å»ºç«‹çš„å¸å·ï¼Œå®é™…ä¸Šæ˜¯ä¿å­˜åœ¨<code>/etc/passwd</code>æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚</p><p><strong>passwd</strong>å‘½ä»¤ç”¨äºè®¾ç½®ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·å¯†ç ã€å¯†ç è¿‡æœŸæ—¶é—´ç­‰ã€‚ç³»ç»Ÿç®¡ç†è€…åˆ™èƒ½ç”¨å®ƒç®¡ç†ç³»ç»Ÿç”¨æˆ·çš„å¯†ç ã€‚åªæœ‰ç®¡ç†è€…å¯ä»¥æŒ‡å®šç”¨æˆ·åç§°ï¼Œä¸€èˆ¬ç”¨æˆ·åªèƒ½å˜æ›´è‡ªå·±çš„å¯†ç ã€‚</p><h4 id="Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†"><a href="#Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†" class="headerlink" title="Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†"></a>Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†</h4><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚</p><p>ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹<code>/etc/group</code>æ–‡ä»¶çš„æ›´æ–°ã€‚</p><p>Linuxç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†ç›¸å…³å‘½ä»¤:</p><ul><li><p><code>groupadd é€‰é¡¹ ç”¨æˆ·ç»„</code> :å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ </p></li><li><p><code>groupdel ç”¨æˆ·ç»„</code>:è¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ </p></li><li><p><code>groupmod é€‰é¡¹ ç”¨æˆ·ç»„</code>: ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§</p></li></ul><p>å…¶ä»–å¸¸ç”¨å‘½ä»¤</p><ul><li><code>pwd</code>ï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨ä½ç½®</li><li><code>grep</code> è¦æœç´¢çš„å­—ç¬¦ä¸² è¦æœç´¢çš„æ–‡ä»¶ <code>--color</code>ï¼šæœç´¢å‘½ä»¤ï¼Œâ€“colorä»£è¡¨é«˜äº®æ˜¾ç¤º</li><li><p><code>ps -ef/ps aux</code>ï¼šè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ­£åœ¨è¿è¡Œè¿›ç¨‹ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯å±•ç¤ºæ ¼å¼ä¸åŒã€‚å¦‚æœæƒ³è¦æŸ¥çœ‹ç‰¹å®šçš„è¿›ç¨‹å¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ ¼å¼ï¼š<code>ps aux|grep redis</code>ï¼ˆæŸ¥çœ‹åŒ…æ‹¬rediså­—ç¬¦ä¸²çš„è¿›ç¨‹ï¼‰<br>æ³¨æ„ï¼šå¦‚æœç›´æ¥ç”¨ <strong>ps</strong>ï¼ˆï¼ˆProcess Statusï¼‰ï¼‰å‘½ä»¤ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œé€šå¸¸ç»“åˆgrepå‘½ä»¤æŸ¥çœ‹æŸè¿›ç¨‹çš„çŠ¶æ€ã€‚</p></li><li><p><code>kill -9 è¿›ç¨‹çš„pid</code>ï¼šæ€æ­»è¿›ç¨‹ï¼ˆ-9 è¡¨ç¤ºå¼ºåˆ¶ç»ˆæ­¢ã€‚ï¼‰<br>å…ˆç”¨psæŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åç”¨killæ€æ‰</p></li></ul><p><strong>ç½‘ç»œé€šä¿¡å‘½ä»¤ï¼š</strong></p><ul><li>æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç½‘å¡ä¿¡æ¯ï¼š<code>ifconfig</code></li><li>æŸ¥çœ‹ä¸æŸå°æœºå™¨çš„è¿æ¥æƒ…å†µï¼š<code>ping</code></li><li>æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç«¯å£ä½¿ç”¨ï¼š<code>netstat -ntlp</code>æˆ–è€…<code>ss -ntlp</code></li><li><p><strong>rebootï¼š</strong>é‡å¼€æœºã€‚<br> <code>reboot -w</code>ï¼šåšä¸ªé‡å¼€æœºçš„æ¨¡æ‹Ÿï¼ˆåªæœ‰çºªå½•å¹¶ä¸ä¼šçœŸçš„é‡å¼€æœºï¼‰ã€‚</p></li><li><p><strong>shutdown</strong> å…³æœºå‘½ä»¤</p></li><li><p><code>shutdown -h now</code>ï¼šæŒ‡å®šç°åœ¨ç«‹å³å…³æœºï¼›<br><code>shutdown +5 &quot;System will shutdown after 5 minutes&quot;</code>:æŒ‡å®š5åˆ†é’Ÿåå…³æœºï¼ŒåŒæ—¶é€å‡ºè­¦å‘Šä¿¡æ¯ç»™ç™»å…¥ç”¨æˆ·ã€‚</p><ul><li>-c å–æ¶ˆå‰ä¸€ä¸ªå…³æœºå‘½ä»¤</li><li>-h å…³æœº</li><li>-r é‡å¯<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r 06:00</span><br><span class="line">shutdown -c</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>init</strong>å‘½ä»¤</p><ul><li>å…³æœºï¼š<code>init 0</code></li><li>é‡å¯ï¼š<code>init 6</code></li></ul></li><li><p><strong>init</strong>ç³»ç»Ÿçš„è¿è¡Œçº§åˆ«</p><ul><li>0 å…³æœº</li><li>1 ä½†ç”¨æˆ·</li><li>2 ä¸å®Œå…¨å¤šç”¨æˆ·ï¼Œä¸åŒ…å«NFSæœåŠ¡</li><li>3 å®Œå…¨å¤šç”¨æˆ·</li><li>4 æœªåˆ†é…</li><li>5 å›¾å½¢ç•Œé¢</li><li>6 é‡å¯</li></ul></li></ul><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><h4 id="ç³»ç»Ÿå¯åŠ¨"><a href="#ç³»ç»Ÿå¯åŠ¨" class="headerlink" title="ç³»ç»Ÿå¯åŠ¨"></a>ç³»ç»Ÿå¯åŠ¨</h4><p>1.BIOS</p><ul><li>è®¡ç®—æœºé€šç”µåï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¯»å–åˆ·å…¥ROMèŠ¯ç‰‡çš„å¼€æœºç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå«åš <strong>(Basic Input/Output System)</strong></li></ul><p>2.ç¡¬ä»¶è‡ªæ£€</p><ul><li>BIOSç¨‹åºé¦–å…ˆæ£€æŸ¥ï¼Œè®¡ç®—æœºç¡¬ä»¶èƒ½å¦æ»¡è¶³è¿è¡Œçš„åŸºæœ¬æ¡ä»¶ï¼Œè¿™å«åš <strong>â€œç¡¬ä»¶è‡ªæ£€â€</strong>ï¼ˆPower-On Self-Test)</li><li>å¦‚æœç¡¬ä»¶å‡ºç°é—®é¢˜ï¼Œä¸»æ¿ä¼šå‘å‡ºä¸åŒå«ä¹‰çš„èœ‚é¸£ï¼Œå¯åŠ¨ä¸­æ­¢ã€‚</li><li>å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œå±å¹•å°±ä¼šæ˜¾ç¤ºå‡ºCPUã€å†…å­˜ã€ç¡¬ç›˜ç­‰ä¿¡æ¯ã€‚</li></ul><p>3.å¯åŠ¨é¡ºåº</p><ul><li>ç¡¬ä»¶è‡ªæ£€å®Œæˆåï¼ŒBIOSæŠŠæ§åˆ¶æƒè½¬äº¤ç»™ä¸‹ä¸€é˜¶æ®µçš„å¯åŠ¨ç¨‹åºã€‚</li><li>è¿™æ—¶ï¼ŒBIOSéœ€è¦çŸ¥é“ï¼Œ<strong>â€œä¸‹ä¸€é˜¶æ®µçš„å¯åŠ¨ç¨‹åºâ€</strong>å…·ä½“å­˜æ”¾åœ¨å“ªä¸€ä¸ªè®¾å¤‡</li><li>BIOSéœ€è¦æœ‰ä¸€ä¸ªå¤–éƒ¨å‚¨å­˜è®¾å¤‡çš„æ’åºï¼Œæ’åœ¨å‰é¢çš„è®¾å¤‡å°±æ˜¯ä¼˜å…ˆè½¬äº¤æ§åˆ¶æƒçš„è®¾å¤‡ã€‚è¿™ç§æ’åºå«åš <strong>â€œå¯åŠ¨é¡ºåºâ€</strong>ï¼ˆBoot Sequenceï¼‰</li><li>BIOSæŒ‰ç…§ <strong>â€œå¯åŠ¨é¡ºåºâ€</strong>ï¼ŒæŠŠæ§åˆ¶æƒè½¬äº¤ç»™æ’åœ¨ç¬¬ä¸€ä½çš„å‚¨å­˜è®¾å¤‡ã€‚</li><li>è¿™æ—¶ï¼Œè®¡ç®—æœºè¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯è¯»å–æœ€å‰é¢çš„512ä¸ªå­—èŠ‚ã€‚å¦‚æœè¿™512ä¸ªå­—èŠ‚çš„æœ€åä¸¤ä¸ªå­—èŠ‚æ˜¯0x55å’Œ0xAAï¼Œè¡¨æ˜è¿™ä¸ªè®¾å¤‡å¯ä»¥ç”¨äºå¯åŠ¨ï¼›å¦‚æœä¸æ˜¯ï¼Œè¡¨æ˜è®¾å¤‡ä¸èƒ½ç”¨äºå¯åŠ¨ï¼Œæ§åˆ¶æƒäºæ˜¯è¢«è½¬äº¤ç»™ <strong>â€œå¯åŠ¨é¡ºåºâ€</strong>ä¸­çš„ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚</li><li>è¿™æœ€å‰é¢çš„512ä¸ªå­—èŠ‚ï¼Œå°±å«åš <strong>â€œä¸»å¼•å¯¼è®°å½•â€</strong>ï¼ˆMaster boot recordï¼Œç¼©å†™ä¸ºMBRï¼‰</li></ul><p>4.ä¸»å¼•å¯¼è®°å½•çš„ç»“æ„</p><ul><li><strong>ä¸»å¼•å¯¼è®°å½•</strong>åªæœ‰512ä¸ªå­—èŠ‚ï¼Œæ”¾ä¸äº†å¤ªå¤šä¸œè¥¿ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œå‘Šè¯‰è®¡ç®—æœºåˆ°ç¡¬ç›˜çš„å“ªä¸€ä¸ªä½ç½®å»æ‰¾æ“ä½œç³»ç»Ÿã€‚<ul><li>ç¬¬1-446å­—èŠ‚ï¼šæ˜¯ç”¨æ¥è®°å½•ç³»ç»Ÿçš„å¯åŠ¨ä¿¡æ¯çš„,è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æœºå™¨ç </li><li>ç¬¬447-510å­—èŠ‚(64ä¸ªå­—èŠ‚)ï¼šåˆ†åŒºè¡¨ï¼ˆPartition tableï¼‰ï¼Œåˆ†åŒºè¡¨çš„ä½œç”¨ï¼Œæ˜¯å°†ç¡¬ç›˜åˆ†æˆè‹¥å¹²ä¸ªåŒº</li><li>ç¬¬511-512å­—èŠ‚ï¼šä¸»å¼•å¯¼è®°å½•ç­¾åï¼ˆ0x55å’Œ0xAAï¼‰</li></ul></li></ul><p>5.åˆ†åŒºè¡¨</p><ul><li><strong>ç£ç›˜åˆ†åŒº</strong>æ˜¯ä½¿ç”¨åˆ†åŒºç¼–è¾‘å™¨åœ¨ç£ç›˜ä¸Šåˆ’åˆ†å‡ ä¸ªé€»è¾‘éƒ¨åˆ†</li><li>ç£ç›˜ä¸€æ—¦åˆ’åˆ†æˆå¤šä¸ªåˆ†åŒºï¼Œä¸åŒç±»çš„ç›®å½•ä¸æ–‡ä»¶å¯ä»¥å­˜å‚¨è¿›ä¸åŒçš„åˆ†åŒºå†…</li><li><strong>ä¸»å¼•å¯¼è®°å½•</strong> å› æ­¤å¿…é¡»çŸ¥é“å°†æ§åˆ¶æƒè½¬äº¤ç»™å“ªä¸ªåŒº</li><li>åˆ†åŒºè¡¨çš„é•¿åº¦åªæœ‰64ä¸ªå­—èŠ‚ï¼Œé‡Œé¢åˆåˆ†æˆå››é¡¹ï¼Œæ¯é¡¹16ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªç¡¬ç›˜æœ€å¤šåªèƒ½åˆ†å››ä¸ªä¸€çº§åˆ†åŒºï¼Œåˆå«åšâ€ä¸»åˆ†åŒºâ€<ul><li>ç¬¬1ä¸ªå­—èŠ‚ï¼šå¦‚æœä¸º0x80ï¼Œå°±è¡¨ç¤ºè¯¥ä¸»åˆ†åŒºæ˜¯æ¿€æ´»åˆ†åŒºï¼Œæ§åˆ¶æƒè¦è½¬äº¤ç»™è¿™ä¸ªåˆ†åŒºã€‚å››ä¸ªä¸»åˆ†åŒºé‡Œé¢åªèƒ½æœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚</li><li>ç¬¬2-4ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½®ï¼ˆæŸ±é¢ã€ç£å¤´ã€æ‰‡åŒºå·ç­‰ç­‰ï¼‰ã€‚</li><li>ç¬¬5ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºç±»å‹ï¼Œæ¯”å¦‚FAT32ã€NTFSç­‰ã€‚</li><li>ç¬¬6-8ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºæœ€åä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½®ã€‚</li><li>ç¬¬9-12å­—èŠ‚ï¼šè¯¥ä¸»åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„é€»è¾‘åœ°å€ã€‚</li><li>ç¬¬13-16å­—èŠ‚ï¼šä¸»åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°ã€‚</li></ul></li></ul><p>6.ç¡¬ç›˜å¯åŠ¨</p><ul><li>è®¡ç®—æœºçš„æ§åˆ¶æƒå°±è¦è½¬äº¤ç»™ç¡¬ç›˜çš„æŸä¸ªåˆ†åŒºäº†</li><li>å››ä¸ªä¸»åˆ†åŒºé‡Œé¢ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚è®¡ç®—æœºä¼šè¯»å–æ¿€æ´»åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå«åš <strong>â€œå·å¼•å¯¼è®°å½•â€</strong>ï¼ˆVolume boot recordï¼Œç¼©å†™ä¸ºVBRï¼‰</li></ul><p>7.æ“ä½œç³»ç»Ÿ</p><ul><li>æ§åˆ¶æƒè½¬äº¤ç»™æ“ä½œç³»ç»Ÿåï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸é¦–å…ˆè¢«è½½å…¥å†…å­˜ã€‚</li><li>ä»¥Linuxç³»ç»Ÿä¸ºä¾‹ï¼Œå…ˆè½½å…¥<code>/boot</code>ç›®å½•ä¸‹é¢çš„<code>kernel</code>ã€‚å†…æ ¸åŠ è½½æˆåŠŸåï¼Œç¬¬ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºæ˜¯<code>/sbin/init</code>ã€‚å®ƒæ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆDebianç³»ç»Ÿæ˜¯/etc/initabï¼‰äº§ç”Ÿinitè¿›ç¨‹ã€‚è¿™æ˜¯Linuxå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œpidè¿›ç¨‹ç¼–å·ä¸º1ï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯å®ƒçš„åä»£</li><li>ç„¶åï¼Œ<code>init</code>çº¿ç¨‹åŠ è½½ç³»ç»Ÿçš„å„ä¸ªæ¨¡å—ï¼Œæ¯”å¦‚çª—å£ç¨‹åºå’Œç½‘ç»œç¨‹åºï¼Œç›´è‡³æ‰§è¡Œ<code>/bin/login</code>ç¨‹åºï¼Œè·³å‡ºç™»å½•ç•Œé¢ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</li></ul><blockquote><p>è½¬è½½è‡ªï¼š<br><a href="https://mp.weixin.qq.com/s/-eANH2n_IDo6ojyP3RdeDA" target="_blank" rel="noopener">linuxåŸºç¡€ï¼ˆä¸€ï¼‰</a><br><a href="https://mp.weixin.qq.com/s/C8kv8itPU1wHYGaH3tG9z" target="_blank" rel="noopener">linuxåŸºç¡€ï¼ˆäºŒï¼‰</a><br><a href="https://juejin.im/post/5c9319c2e51d450d597ea3ff" target="_blank" rel="noopener">å‰ç«¯linuxåŸºç¡€ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;

&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸€äº›å…³äºlinuxæ“ä½œç³»ç»Ÿã€linuxè¯ç”Ÿç­‰ä¸€äº›èƒŒæ™¯çŸ¥è¯†åŠç®€å•ä»‹ç»ã€‚ä»¥åŠä¸€äº›linuxåŸºç¡€æ“ä½œå‘½ä»¤ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://annecoding.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://annecoding.github.io/tags/Linux/"/>
    
  </entry>
  
</feed>
